(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8778],{7432:function(e,n,t){var r={"./Active4D.json":[266,266],"./All Hallows Eve.json":[4450,4450],"./Amy.json":[88849,8849],"./Birds of Paradise.json":[78097,8097],"./Blackboard.json":[88018,6115],"./Brilliance Black.json":[73835,3835],"./Brilliance Dull.json":[6507,6507],"./Chrome DevTools.json":[22508,2508],"./Clouds Midnight.json":[49566,9566],"./Clouds.json":[57951,7951],"./Cobalt.json":[80826,826],"./Cobalt2.json":[98256,8256],"./Dawn.json":[76958,6958],"./Dominion Day.json":[89307,9307],"./Dracula.json":[33453,3453],"./Dreamweaver.json":[19363,9363],"./Eiffel.json":[82481,2481],"./Espresso Libre.json":[44776,4776],"./GitHub.json":[10739,739],"./IDLE.json":[67947,7947],"./Katzenmilch.json":[81240,1240],"./Kuroir Theme.json":[4388,4388],"./LAZY.json":[25164,5164],"./MagicWB (Amiga).json":[76443,6443],"./Merbivore Soft.json":[99361,9361],"./Merbivore.json":[86042,6042],"./Monokai Bright.json":[14883,4883],"./Monokai.json":[34454,4454],"./Night Owl.json":[60261,261],"./Nord.json":[59785,9785],"./Oceanic Next.json":[58920,8920],"./Pastels on Dark.json":[38901,8901],"./Slush and Poppies.json":[26434,6434],"./Solarized-dark.json":[36116,6116],"./Solarized-light.json":[5008,5008],"./SpaceCadet.json":[20440,440],"./Sunburst.json":[68018,8018],"./Textmate (Mac Classic).json":[15824,5824],"./Tomorrow-Night-Blue.json":[81150,1150],"./Tomorrow-Night-Bright.json":[8762,8762],"./Tomorrow-Night-Eighties.json":[82545,2545],"./Tomorrow-Night.json":[99855,9855],"./Tomorrow.json":[34092,4092],"./Twilight.json":[93898,3898],"./Upstream Sunburst.json":[98807,8807],"./Vibrant Ink.json":[89927,9927],"./Xcode_default.json":[64042,4042],"./Zenburnesque.json":[33467,3467],"./iPlastic.json":[88277,8277],"./idleFingers.json":[5104,5104],"./krTheme.json":[9633,9633],"./monoindustrial.json":[15729,5729],"./themelist.json":[79437,9437]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t.t(o,19)}))}o.keys=function(){return Object.keys(r)},o.id=7432,e.exports=o},63048:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Zc}});var r,o,i,c=t(77837),l=t(12757),u=t(82394),a=t(38860),s=t.n(a),d=t(56085),f=t(82684),p=t(83455),h=t(34376);!function(e){e.CHART="chart",e.DATA_EXPORTER="data_exporter",e.DATA_LOADER="data_loader",e.SCRATCHPAD="scratchpad",e.TRANSFORMER="transformer"}(i||(i={}));var m,v=[i.DATA_EXPORTER,i.DATA_LOADER,i.SCRATCHPAD,i.TRANSFORMER];!function(e){e.EXECUTED="executed",e.FAILED="failed",e.NOT_EXECUTED="not_executed",e.UPDATED="updated"}(m||(m={}));var g=(r={},(0,u.Z)(r,i.DATA_EXPORTER,"Data exporter"),(0,u.Z)(r,i.DATA_LOADER,"Data loader"),(0,u.Z)(r,i.SCRATCHPAD,"Scratchpad"),(0,u.Z)(r,i.TRANSFORMER,"Transformer"),r),b=[i.DATA_EXPORTER,i.DATA_LOADER,i.TRANSFORMER],x=(o={},(0,u.Z)(o,i.DATA_EXPORTER,"DE"),(0,u.Z)(o,i.DATA_LOADER,"DL"),(0,u.Z)(o,i.SCRATCHPAD,"SP"),(0,u.Z)(o,i.TRANSFORMER,"TF"),t(67971)),y=t(46313),j=t(19711),k=t(1132),O=t(73942),C=t(28598),w=(0,y.css)(["min-width:18px;padding-left:2px;padding-right:2px;"," "," "," "," "," ",""],(function(e){return!e.disabled&&"\n    background-color: ".concat((e.theme.content||k.Z.content).inverted,";\n  ")}),(function(e){return e.disabled&&"\n    // background-color: ".concat((e.theme.monotone||k.Z.monotone).grey400," !important;\n  ")}),(function(e){return e.mutedDisabled&&"\n    opacity: 0.3;\n  "}),(function(e){return!e.borderless&&"\n    box-shadow: ".concat((e.theme.shadow||k.Z.shadow).tiny,";\n    padding-bottom: 3px;\n    padding-top: 3px;\n  ")}),(function(e){return e.borderless&&"\n    border-radius: ".concat(O.BG,"px;\n    padding-bottom: 4px;\n    padding-top: 4px;\n  ")}),(function(e){return e.spacingLeft&&"\n    margin-left: ".concat(e.spacingLeft,"px;\n  ")})),Z=y.default.kbd.withConfig({displayName:"KeyboardText__KbdStyle",componentId:"sc-18540m4-0"})(["",""],w),P=y.default.div.withConfig({displayName:"KeyboardText__DivStyle",componentId:"sc-18540m4-1"})(["",""],w);var E=function(e){var n=e.borderless,t=e.disabled,r=e.inline,o=e.keyText,i=e.monospace,c=e.mutedDisabled,l=e.spacingLeft,u=r?P:Z,a=(0,f.useContext)(y.ThemeContext),s={};if(!n){var d,p;if(t)s.borderColor=null===(d=(null===a||void 0===a?void 0:a.monotone)||k.Z.monotone)||void 0===d?void 0:d.grey400;else s.borderColor=null===(p=(null===a||void 0===a?void 0:a.content)||k.Z.content)||void 0===p?void 0:p.active;s.borderRadius=O.BG,s.borderStyle="solid",s.borderWidth=1,s.overflow="hidden"}return(0,C.jsx)(j.ZP,{center:!0,inline:!0,monospace:i,muted:t||c,style:s,xsmall:!0,children:(0,C.jsx)(u,{borderless:n,disabled:t,mutedDisabled:c,spacingLeft:l,children:o})})},I=t(49125),S=y.default.div.withConfig({displayName:"KeyboardTextGroup__SpacingStyle",componentId:"sc-1bx41p7-0"})([""," "," ",""],(function(e){return e.small&&"\n    margin-left: ".concat(.25*I.iI,"px;\n  ")}),(function(e){return!e.small&&"\n    margin-left: ".concat(.25*I.iI,"px;\n  ")}),(function(e){return e.marginRight&&"\n    margin-right: ".concat(.25*I.iI,"px;\n  ")}));var T=function(e){var n=e.borderless,t=e.disabled,r=e.keyTextGroups,o=e.inline,i=e.monospace,c=e.mutedDisabled,l=e.small,u=e.uuidForKey,a=[],s=[];return r.forEach((function(e,r){var o=[];e.forEach((function(e,r){s.push(e),r>=1&&o.push((0,C.jsx)(S,{small:l},"spacing-".concat(e))),o.push((0,C.jsx)(E,{borderless:n,disabled:t,inline:!0,keyText:e,monospace:i,mutedDisabled:c},"key-".concat(s.join("-"),"-").concat(u)))})),r>=1&&a.push((0,C.jsx)(S,{marginRight:!0,children:(0,C.jsx)(j.ZP,{monospace:i,muted:!0,small:!l,xsmall:l,children:"then"})},"then-".concat(r))),a.push.apply(a,o)})),(0,C.jsx)(x.Z,{alignItems:"center",inline:o,children:a})},_=t(10512),D=34*I.iI,R=20*I.iI,A=y.default.div.withConfig({displayName:"indexstyle__FlyoutMenuContainerStyle",componentId:"sc-1o7k6f4-0"})(["position:absolute;max-height:","px;"," "," "," ",""],58*I.iI,(function(e){return!e.compact&&"\n    min-width: ".concat(D,"px;\n  ")}),(function(e){return e.compact&&"\n    min-width: ".concat(R,"px;\n  ")}),(function(e){return e.width&&"\n    min-width: 0px;\n    width: ".concat(e.width,"px;\n  ")}),(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||k.Z.shadow).popup,";\n\n    &:hover {\n      background-color: ").concat((e.theme.interactive||k.Z.interactive).hoverBackground,";\n    }\n  ")})),B=y.default.div.withConfig({displayName:"indexstyle__TitleContainerStyle",componentId:"sc-1o7k6f4-1"})(["padding:","px;padding-bottom:0;",""],I.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).popup,";\n  ")})),N=y.default.div.withConfig({displayName:"indexstyle__LinkStyle",componentId:"sc-1o7k6f4-2"})(["align-items:center;display:flex;justify-content:space-between;padding:","px;&:hover{cursor:default;}"," "," ",""],I.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).popup,";\n\n    &:hover {\n      background-color: ").concat((e.theme.interactive||k.Z.interactive).hoverBackground,";\n    }\n  ")}),(function(e){return e.indent&&"\n    padding-left: ".concat(2*I.iI,"px;\n  ")}),(function(e){return e.highlighted&&"\n    background-color: ".concat((e.theme.interactive||k.Z.interactive).hoverBackground,";\n  ")})),M=t(16115);function F(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}var L=t(41150);function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var z=function(e){var n,t,r=e.compact,o=e.items,i=e.left,c=e.onClickCallback,l=e.open,a=e.parentRef,s=e.topOffset,d=void 0===s?0:s,p=e.uuid,h=e.width,m=(0,f.useState)([]),v=m[0],g=m[1],b=(0,f.useState)({}),y=b[0],k=b[1],O=(0,f.useState)(0),w=O[0],Z=O[1],P=((null===a||void 0===a||null===(n=a.current)||void 0===n||null===(t=n.getBoundingClientRect)||void 0===t?void 0:t.call(n))||{}).height,E=(0,f.useRef)({}),I=(0,L.y)(),S=I.registerOnKeyDown,H=I.unregisterOnKeyDown;return(0,f.useEffect)((function(){return function(){H(p)}}),[H,p]),S(p,(function(e,n,t){if(l){var r=v[0];if(n[M.kD])F(e),"undefined"===typeof r||r===o.length-1?g([0]):g([r+1]);else if(n[M.Bu])F(e),g("undefined"===typeof r||0===r?[o.length-1]:[r-1]);else if(n[M.Uq]&&"undefined"!==typeof r){var i,u;null===(i=o[r])||void 0===i||null===(u=i.onClick)||void 0===u||u.call(i),null===c||void 0===c||c()}else o.forEach((function(e){var r=e.keyboardShortcutValidation;null===r||void 0===r||r({keyHistory:t,keyMapping:n})}))}}),[v,o,c,l,g]),(0,f.useEffect)((function(){l||g([])}),[l]),o?function e(n,t,o){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0;return l+=1,(0,C.jsx)(A,{compact:r,style:{display:o||y[t]?null:"none",left:1===l?i||0:r?(l-1)*R:(l-1)*D,top:1===l?(P||0)+d:w||0},width:h,children:null===n||void 0===n?void 0:n.map((function(n,t){var r=n.items,o=n.indent,i=n.isGroupingTitle,s=n.keyTextGroups,d=n.label,p=n.onClick,h=n.uuid;return a.current[h]=(0,f.createRef)(),i?(0,C.jsx)(B,{children:(0,C.jsx)(j.ZP,{bold:!0,muted:!0,children:d()},h)}):(0,C.jsxs)(N,{highlighted:v[0]===t,indent:o,onClick:function(e){e.preventDefault(),null===p||void 0===p||p(),null===c||void 0===c||c()},onMouseEnter:function(){var e,n;(k((function(e){return U(U({},e),{},(0,u.Z)({},h,!0))})),1===l)&&Z((null===(e=a.current[h])||void 0===e||null===(n=e.current)||void 0===n?void 0:n.offsetTop)||0)},onMouseLeave:function(){k((function(e){return U(U({},e),{},(0,u.Z)({},h,!1))}))},ref:a.current[h],children:[(0,C.jsxs)(x.Z,{alignItems:"center",fullWidth:!0,justifyContent:"space-between",children:[(0,C.jsx)(j.ZP,{children:d()}),r&&(0,C.jsx)(_.ol,{})]}),s&&(0,C.jsx)(T,{keyTextGroups:s}),r&&e(r,h,!1,l,a)]},h)}))})}(o,void 0,l,0,E):null},W=t(26304),Q=t(93461),G=["children"];function K(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?K(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var X=y.default.div.withConfig({displayName:"Circle__CircleStyle",componentId:"sc-1o70504-0"})([""," "," "," "," "," "," ",""],(function(e){return!e.square&&"\n    border-radius: 50%;\n  "}),(function(e){return e.square&&"\n    border-radius: ".concat(O.BG,"px;\n  ")}),(function(e){return!e.color&&!(e.borderSize||e.borderColor)&&"\n    background-color: ".concat((e.theme.content||k.Z.content).muted,";\n  ")}),(function(e){return(e.borderSize||e.borderColor)&&"\n    border: ".concat(e.borderSize||1,"px solid ").concat(e.borderColor||(e.theme.content||k.Z.content).active,";\n  ")}),(function(e){return e.color&&"\n    background-color: ".concat(e.color,";\n  ")}),(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n    width: ").concat(e.size,"px;\n  ")}),(function(e){return e.danger&&"\n    background-color: ".concat((e.theme.borders||k.Z.borders).danger,";\n  ")}));var Y,q,J=function(e){var n=e.children,t=(0,W.Z)(e,G);return(0,C.jsx)(X,V(V({},t),{},{children:(0,C.jsx)(x.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,justifyContent:"center",children:n&&(0,C.jsx)(Q.Z,{children:n})})}))};!function(e){e.PY="py",e.TXT="txt",e.YAML="yaml",e.YML="yml"}(q||(q={}));var $,ee,ne=[q.TXT,q.YAML,q.YML],te=new RegExp(ne.map((function(e){return".".concat(e,"$")})).join("|")),re="pipelines",oe=(Y={},(0,u.Z)(Y,q.PY,"python"),(0,u.Z)(Y,q.TXT,"text"),(0,u.Z)(Y,q.YAML,"yaml"),(0,u.Z)(Y,q.YML,"yaml"),Y),ie=1.5*I.iI,ce=1*ie+I.iI/2,le=y.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-uvd91-0"})([".row:hover{","}"],(function(e){return"\n      background-color: ".concat((e.theme.interactive||k.Z.interactive).hoverBackground,";\n    ")})),ue=function(e){return e.at(-1)},ae=function(e){return e.at(-2).slice(0,-1)},se=function(e){return ue(e).slice(0,-3)};!function(e){e.DATA_LOADERS="data_loaders",e.DATA_EXPORTERS="data_exporters",e.GLOBAL_VARIABLES="global_variables",e.PIPELINES="pipelines",e.SCRATCHPADS="scratchpads",e.TRANSFORMERS="transformers"}($||($={})),function(e){e.INIT_PY="__init__.py"}(ee||(ee={}));var de=t(91427),fe=t(90880);function pe(e,n){var t=(n.theme.borders||k.Z.borders).light,r=(n.theme.monotone||k.Z.monotone).grey500,o=n||{},c=o.isSelected,l=o.theme;return c?t=(l.content||k.Z.content).active:i.TRANSFORMER===e?(t=(l.accent||k.Z.accent).purple,r=(l.accent||k.Z.accent).purpleLight):i.DATA_EXPORTER===e?(t=(l.accent||k.Z.accent).yellow,r=(l.accent||k.Z.accent).yellowLight):i.DATA_LOADER===e?(t=(l.accent||k.Z.accent).blue,r=(l.accent||k.Z.accent).blueLight):i.SCRATCHPAD===e&&(t=(l.content||k.Z.content).default,r=(l.accent||k.Z.accent).contentDefaultTransparent),{accent:t,accentLight:r}}var he=(0,y.css)([""," "," "," ",""],(0,fe.eR)(),(function(e){return!e.selected&&!e.hasError&&"\n    border-color: ".concat(pe(e.blockType,e).accentLight,";\n  ")}),(function(e){return e.selected&&!e.hasError&&"\n    border-color: ".concat(pe(e.blockType,e).accent,";\n  ")}),(function(e){return e.selected&&e.hasError&&"\n    border-color: ".concat((e.theme.borders||k.Z.borders).danger,";\n  ")})),me=y.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-s5rj34-0"})(["border-radius:","px;overflow:hidden;position:relative;"],O.n_),ve=y.default.div.withConfig({displayName:"indexstyle__CodeContainerStyle",componentId:"sc-s5rj34-1"})([""," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;border-top-left-radius:","px;border-top-right-radius:","px;border-top-style:solid;border-top-width:2px;padding-bottom:","px;padding-top:","px;"," "," .line-numbers{opacity:0;}&.selected{.line-numbers{opacity:1 !important;}}"],he,O.n_,O.n_,I.iI,I.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).codeTextarea,";\n  ")}),(function(e){return!e.hasOutput&&"\n    border-bottom-left-radius: ".concat(O.n_,"px;\n    border-bottom-right-radius: ").concat(O.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n  ")})),ge=y.default.div.withConfig({displayName:"indexstyle__BlockDivider",componentId:"sc-s5rj34-2"})(["align-items:center;display:flex;height:","px;justify-content:center;position:relative;z-index:10;&:hover{.block-divider-inner{","}}"],2*I.iI,(function(e){return"\n        background-color: ".concat((e.theme.text||k.Z.text).fileBrowser,";\n      ")})),be=y.default.div.withConfig({displayName:"indexstyle__BlockDividerInner",componentId:"sc-s5rj34-3"})(["height 1px;width:100%;position:absolute;z-index:-1;"]),xe=y.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-s5rj34-4"})(["margin-bottom:","px;padding-bottom:","px;padding-left:","px;",""],I.cd*I.iI,I.iI,68,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||k.Z.borders).medium,";\n  ")})),ye=t(29817);function je(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=n||(null===e||void 0===e?void 0:e.name);return null!==e&&void 0!==e&&e.parent?je(e.parent,"".concat(e.parent.name,"/").concat(t)):t}function ke(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=je(e,n).split("/"),r=(0,ye.C5)(t[1]),o=t[t.length-1],i=new RegExp(".".concat(q.PY,"$"));if(v.includes(r)&&o.match(i))return{type:r,uuid:o.replace(i,"")}}var Oe=t(24224);function Ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function we(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ce(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ce(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ze,Pe=function e(n){var t,r=n.file,o=n.level,i=n.onSelectBlockFile,c=n.openFile,l=n.openPipeline,u=n.setContextItem,a=n.theme,s=r.children,d=r.disabled,p=r.name,h=r.parent,m=d||"__init__.py"===p||!!p.match(/^\./),g=(null===h||void 0===h?void 0:h.name)===re,b=(0,f.useMemo)((function(){return g?null:s?(0,Oe.YC)(s,(function(e){var n=e.children,t=e.name;return p===re?t:n?0:1})):s}),[s,g]),x="".concat(o,"/").concat(p),y=(0,f.useState)((0,de.U2)(x,!1)),k=y[0],O=y[1],w=_.iU;g&&!m?w=_.B_:b&&(w=_.gt),b&&v.includes((0,ye.C5)(p))&&(t=pe((0,ye.C5)(p),{theme:a}).accent);var Z=(0,f.useMemo)((function(){return null===b||void 0===b?void 0:b.map((function(n){return(0,C.jsx)(e,{file:we(we({},n),{},{parent:r}),level:o+1,onSelectBlockFile:i,openFile:c,openPipeline:l,setContextItem:u,theme:a},"".concat(x,"/").concat(n.name))}))}),[b,c,l]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"row",onClick:function(e){if(e.preventDefault(),!m)if(g)l(p);else if(b)O((function(e){return(0,de.t8)(x,!e),!e}));else if(p.match(te))c(je(r).split("/").slice(1).join("/"));else{var n=ke(r);n&&i(n.uuid,n.type,je(r).split("/").slice(1).join("/"))}},onContextMenu:function(e){e.preventDefault();var n={data:{block:ke(r)}};m?u(we({type:Ze.DISABLED},n)):g?u(we({type:Ze.PIPELINE},n)):b?u(we({type:Ze.FOLDER},n)):p.match(te)||p===ee.INIT_PY?u(we({type:Ze.FILE},n)):u(we({type:Ze.BLOCK_FILE},n))},style:{alignItems:"center",cursor:"default",display:"flex",minWidth:o*ce+r.name.length*I.Fo+2*I.iI,paddingBottom:I.iI/4,paddingLeft:I.iI/4+ce*o,paddingRight:I.iI/4,paddingTop:I.iI/4},children:[b&&!k&&(0,C.jsx)(_._M,{muted:!0,size:ie}),b&&k&&(0,C.jsx)(_._Q,{muted:!0,size:ie}),!b&&(0,C.jsx)("div",{style:{width:ie}}),(0,C.jsxs)("div",{style:{marginLeft:I.iI/2,marginRight:I.iI/2},children:[!t&&(0,C.jsx)(w,{disabled:m,size:ie}),t&&(0,C.jsx)(J,{color:t,size:ie,square:!0})]}),(0,C.jsx)(j.ZP,{color:t,default:!t&&!m,monospace:!0,disabled:m,small:!0,children:p})]}),(0,C.jsx)("div",{style:{display:k?"none":"block"},children:Z})]})},Ee=["files","setContextItem"];function Ie(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ie(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ie(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Te(e,n){var t=e.files,r=e.setContextItem,o=(0,W.Z)(e,Ee),i=(0,f.useContext)(y.ThemeContext);return(0,C.jsx)(le,{ref:n,children:null===t||void 0===t?void 0:t.map((function(e){return(0,f.createElement)(Pe,Se(Se({},o),{},{file:e,key:e.name,level:0,setContextItem:r,theme:i}))}))})}!function(e){e.BLOCK_FILE="block_file",e.DISABLED="disabled",e.FILE="file",e.FOLDER="folder",e.PIPELINE="pipeline"}(Ze||(Ze={}));var _e,De=f.forwardRef(Te),Re=t(86585);!function(e){e.FILE_BROWSER="file_browser"}(_e||(_e={}));var Ae=y.default.div.withConfig({displayName:"ContextMenu__ContainerStyle",componentId:"sc-b9ha7f-0"})(["position:fixed;z-index:",";"," "," "," "," "," "," ",""],Re.bf+100,(function(e){return"undefined"!==typeof e.left&&"\n    left: ".concat(e.left+5,"px;\n  ")}),(function(e){return"undefined"!==typeof e.right&&"\n    right: ".concat(e.right,"px;\n  ")}),(function(e){return"undefined"!==typeof e.top&&"\n    top: ".concat(e.top,"px;\n  ")}),(function(e){return"undefined"!==typeof e.bottom&&"\n    bottom: ".concat(e.bottom,"px;\n  ")}),(function(e){return"undefined"===typeof e.top&&"undefined"===typeof e.bottom&&"\n    top: ".concat(Re.Mz-1*I.iI,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width,"px;\n  ")}),(function(e){return!e.width&&"\n    min-width: ".concat(33*I.iI,"px;\n  ")}));var Be=function(e){var n=e.areaRef,t=e.children,r=e.deleteBlockFile,o=e.enableContextItem,i=e.type,c=(0,f.useState)({x:0,y:0}),l=c[0],a=c[1],s=(0,f.useState)({}),d=s[0],p=s[1],h=(0,f.useState)(!1),m=h[0],v=h[1];(0,f.useEffect)((function(){return document.addEventListener("click",g),document.addEventListener("contextmenu",b),function(){document.addEventListener("click",g),document.removeEventListener("contextmenu",b)}}),[]);var g=(0,f.useCallback)((function(e){e.preventDefault(),v(!1)}),[v]),b=(0,f.useCallback)((function(e){n.current.contains(e.target)?(o||e.preventDefault(),a({x:e.pageX,y:e.pageY}),v(!0)):v(!1)}),[n,o,a,v]),x=(0,u.Z)({},Ze.BLOCK_FILE,[{label:function(){return"Delete"},onClick:function(){return r(d.data.block)},uuid:"delete block file"}]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ae,{left:l.x,top:l.y,children:(0,C.jsx)(z,{compact:!0,items:x[o?d.type:i],open:m,parentRef:void 0,uuid:"ContextMenu"})}),f.Children.map(t,(function(e){return f.cloneElement(e,{setContextItem:p})}))]})},Ne=t(85202),Me=t(38789),Fe=t(66166),Le="twilight",He=t(2005),Ue=t(31012),ze=y.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-w2hta3-0"})([""]),We=y.default.div.withConfig({displayName:"indexstyle__PlaceholderStyle",componentId:"sc-w2hta3-1"})(["padding-left:67px;position:absolute;z-index:1;"]);var Qe={"all-hallows-eve":"All Hallows Eve","birds-of-paradise":"Birds of Paradise","brilliance-black":"Brilliance Black","brilliance-dull":"Brilliance Dull","chrome-devtools":"Chrome DevTools","clouds-midnight":"Clouds Midnight","espresso-libre":"Espresso Libre","kuroir-theme":"Kuroir Theme","magicwb--amiga-":"MagicWB (Amiga)","merbivore-soft":"Merbivore Soft","monokai-bright":"Monokai Bright","night-owl":"Night Owl","oceanic-next":"Oceanic Next","pastels-on-dark":"Pastels on Dark","slush-and-poppies":"Slush and Poppies","solarized-dark":"Solarized-dark","solarized-light":"Solarized-light","textmate--mac-classic-":"Textmate (Mac Classic)","tomorrow-night":"Tomorrow-Night","tomorrow-night-blue":"Tomorrow-Night-Blue","tomorrow-night-bright":"Tomorrow-Night-Bright","tomorrow-night-eighties":"Tomorrow-Night-Eighties","upstream-sunburst":"Upstream Sunburst","vibrant-ink":"Vibrant Ink","xcode-default":"Xcode_default",active4d:"Active4D",amy:"Amy",blackboard:"Blackboard",clouds:"Clouds",cobalt:"Cobalt",dawn:"Dawn",dreamweaver:"Dreamweaver",eiffel:"Eiffel",github:"GitHub",idle:"IDLE",idlefingers:"idleFingers",iplastic:"iPlastic",katzenmilch:"Katzenmilch",krtheme:"krTheme",lazy:"LAZY",merbivore:"Merbivore",monoindustrial:"monoindustrial",monokai:"Monokai",spacecadet:"SpaceCadet",sunburst:"Sunburst",tomorrow:"Tomorrow",twilight:"Twilight",zenburnesque:"Zenburnesque"};var Ge=function(e){var n=e.autoHeight,r=e.autoSave,o=e.fontSize,i=void 0===o?Ue.i3:o,c=e.height,u=e.language,a=e.onChange,s=e.onDidChangeCursorPosition,d=e.onSave,p=e.placeholder,h=e.selected,m=e.setSelected,v=e.setTextareaFocused,g=e.shortcuts,b=e.showLineNumbers,x=void 0===b||b,y=e.textareaFocused,k=e.theme,O=e.value,w=e.width,Z=void 0===w?"100%":w,P=(0,f.useRef)(null),E=(0,f.useRef)(null),I=(0,f.useRef)(null),S=(0,f.useState)(!1),T=S[0],_=S[1],D=(0,f.useState)(c),R=(D[0],D[1],(0,f.useState)(k||Le)),A=R[0],B=R[1],N=(0,f.useCallback)((function(e){e.languages.typescript.javascriptDefaults.setEagerModelSync(!0)}),[]),M=(0,f.useCallback)((function(e,t){P.current=e,E.current=t;var r=[];null===g||void 0===g||g.forEach((function(n){r.push(n(t,e))})),d&&r.push(function(e,n){return{contextMenuGroupId:"navigation",contextMenuOrder:1.5,id:"saveCode",keybindingContext:null,keybindings:[e.KeyMod.CtrlCmd|e.KeyCode.KeyS],label:"Save",precondition:null,run:function(e){n()}}}(t,(function(){d(e.getValue())}))),function(e,n,t){t.forEach((function(e){n.addAction(e)}))}(0,e,r),e.getModel().updateOptions({tabSize:4}),n&&!c&&(e._domElement.style.height="".concat(21*((O||"").split("\n").length+2),"px")),e.onDidFocusEditorWidget((function(){null===m||void 0===m||m(!0),null===v||void 0===v||v(!0)})),e.onDidContentSizeChange((function(t){var r=t.contentHeight,o=t.contentHeightChanged;n&&o&&(e._domElement.style.height="".concat(r+42,"px"))})),h&&y&&setTimeout((function(){e.focus()}),1),s&&e.onDidChangeCursorPosition((function(n){var t=n.position.lineNumber,r=e._domElement.getBoundingClientRect(),o=r.height,i=r.top;s({editorRect:{height:Number(o),top:Number(i)},position:{lineNumber:Number(t)}})})),_(!0)}),[n,c,s,d,I.current,h,_,m,v,g,y,O]);(0,f.useEffect)((function(){(function(e){return new Promise((function(n){Promise.all([Me._m.init(),t(7432)("./".concat(Qe[e],".json"))]).then((function(t){var r=(0,l.Z)(t,2),o=r[0],i=r[1];i.colors["editor.background"]="#000000",i.colors["editor.foreground"]="#FFFFFF",o.editor.defineTheme(e,i),n()}))}))})(Le).then((function(){B(Le)}))}),[]),(0,f.useEffect)((function(){var e;return r&&d&&(e=setInterval((function(){d(P.current.getValue())}),5e3)),function(){r&&e&&clearInterval(e)}}),[r,P,d]);var F=(0,Fe.Z)(h),L=(0,Fe.Z)(y);return(0,f.useEffect)((function(){null!==P&&void 0!==P&&P.current&&(h&&y?setTimeout((function(){P.current.focus()}),1):Ne.findDOMNode(P.current._domElement).getElementsByClassName("inputarea")[0].blur())}),[P,h,F,y,L]),(0,C.jsxs)(ze,{style:{display:T?null:"none"},children:[p&&!(null!==O&&void 0!==O&&O.length)&&(0,C.jsx)(We,{children:(0,C.jsx)(j.ZP,{monospace:!0,muted:!0,children:p})}),(0,C.jsx)(Me.ZP,{beforeMount:N,height:c,language:u||"python",onChange:function(e){null===a||void 0===a||a(e)},onMount:M,options:{fontFamily:He.Vp,fontLigatures:!0,fontSize:i,hideCursorInOverviewRuler:!0,lineNumbers:x,minimap:{enabled:!1},overviewRulerBorder:!1,renderLineHighlightOnlyWhenFocus:!0,scrollBeyondLastLine:!1,scrollbar:{alwaysConsumeMouseWheel:!1,vertical:"hidden"},wordBasedSuggestions:!1},theme:A,value:O,width:Z}),(0,C.jsx)("div",{ref:I})]})},Ke=t(12691),Ve=t.n(Ke),Xe=t(39421),Ye=t(56663),qe=t.n(Ye),Je=t(66757),$e=t.n(Je),en=t(55361);var nn="current_group_id",tn="current_group",rn="current_user";function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e){var n=qe()(e),t=n.current_group_id;return{id:t}}var r=$e().get(tn),o=Xe.Z.get(nn,en.Hu);if(r&&o)return r}function cn(){return $e().get(rn)}function ln(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function un(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ln(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ln(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function an(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return un(un({},t),{},{groupId:null===(e=on())||void 0===e?void 0:e.id,id:null===(n=cn())||void 0===n?void 0:n.id})}var sn=t(86954);function dn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function fn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?dn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function pn(){return[[sn.go,"initialAsPath"],[sn.iT,"initialPathname"],[sn.FT,"notificationTemplate"],[sn.Ll,"notificationUUID"],[sn.$m,"referringURL"]].reduce((function(e,n){var t=(0,l.Z)(n,2),r=t[0],o=t[1];return fn(fn({},e),{},(0,u.Z)({},o,Xe.Z.get(r,sn.vZ)))}),{})}var hn=t(36283);function mn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function vn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?mn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var gn="click",bn="button";function xn(e){var n,t,r=e.actionName,o=e.actionType,i=e.componentName,c=e.componentType,l=e.properties,u=e.screenName,a=(n=r||o,t=i||c,"".concat(u,".").concat(n,"_").concat(t)),s=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=pn(),o=(null!==t&&void 0!==t&&t.width,window.innerWidth);return vn(vn(vn({},t),r),{},{groupId:null===(e=on())||void 0===e?void 0:e.id,partner_id:"Mage",screenSize:(0,hn.Z3)(o),userId:null===(n=cn())||void 0===n?void 0:n.id})}(vn({actionType:o,componentType:c},l));return{eventProperties:s,eventType:a,userProperties:an()}}function yn(e,n){null===e||void 0===e||e(n)}var jn=function(e){var n=e.children;return e.eventProperties,e.userProperties,n((function(e){return!1}))};function kn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function On(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?kn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Cn,wn,Zn=function(e){var n,t=e.buildChildren,r=e.disabled,o=e.eventActionName,i=void 0===o?gn:o,c=e.eventComponentName,l=void 0===c?bn:c,u=e.eventProperties,a=void 0===u?{}:u,s=e.eventScreenName,d=void 0===s?"generic":s,p=e.keyboardShortcutValidation,m=e.linkProps,v=e.onClick,g=e.openNewTab,b=e.requireKeyUp,x=e.uuid,y=(0,h.useRouter)(),j=(0,L.y)(),k=j.registerOnKeyDown,O=j.registerOnKeyUp,w=j.unregisterOnKeyDown,Z=j.unregisterOnKeyUp;(0,f.useEffect)((function(){return function(){var e=b?Z:w;null===e||void 0===e||e(x)}}),[b,w,Z,x]),r||!v&&!m||(n=function(e){null===v||void 0===v||v(e),m&&(g?(window.open(m.as||m.href),e.preventDefault()):y.push(m.href,m.as))});var P=xn({actionName:i,actionType:gn,componentName:l,componentType:bn,properties:a,screenName:d}),E=P.eventType,I=P.eventProperties,S=P.userProperties;return(0,C.jsx)(jn,{eventProperties:I,userProperties:S,children:function(e){var r=e.logEvent;p&&n&&(b?O:k)(x,(function(e,t,o){p({keyHistory:o,keyMapping:t})&&(yn(r,E,{eventProperties:On(On({},I),{},{usedKeyboardShortcut:!0}),userProperties:S}),n(e))}),[I,E,r,n,S]);return t({eventProperties:I,eventType:E,logEvent:r,onClick:n,userProperties:S})}})},Pn={chatBubbleProps:null,graphicButtonProps:null,logoProps:null,mageImageUrl:null,mascotImageUrls:{base:null,castingSpell:null,chargingUp:null,thinking:null},sharedProps:null},En=f.createContext(Pn),In=En,Sn=t(86673),Tn=t(54283),_n=t(10919),Dn=["Icon","afterElement","beforeElement","bold","borderless","centerText","children","compact","disabled","fitContentWidth","inverted","keyTextGroups","keyTextsPosition","linkProps","loading","mutedDisabled","onClick","type","useModelTheme"];function Rn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function An(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Rn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Rn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.LEFT="left",e.RIGHT="right"}(Cn||(Cn={})),function(e){e.BUTTON="button",e.SUBMIT="submit"}(wn||(wn={}));var Bn=(0,y.css)([""," align-items:center;border:none;display:flex;flex-direction:row;position:relative;text-align:left;z-index:0;"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ",""],(0,fe.eR)(),(function(e){return!e.large1&&!e.large2&&"\n    ".concat(Ue.iD,"\n  ")}),(function(e){return e.small&&"\n    ".concat(Ue.HC,"\n  ")}),(function(e){return e.large1&&"\n    ".concat(Ue.ln,"\n  ")}),(function(e){return e.large2&&"\n    ".concat(Ue.QU,"\n  ")}),(function(e){return!e.inline&&"\n    width: 100%;\n  "}),(function(e){return e.shortWidth&&"\n    min-width: ".concat(28*I.iI,"px;\n  ")}),(function(e){return!e.wrapText&&"\n    white-space: nowrap;\n  "}),(function(e){return!e.secondary&&"\n    font-family: ".concat(He.ry,";\n    justify-content: space-between;\n  ")}),(function(e){return e.center&&"\n    justify-content: center;\n  "}),(function(e){return!e.noPadding&&!e.spacious&&!e.compact&&"\n    padding: ".concat(1.25*I.iI,"px ").concat(1.5*I.iI,"px;\n  ")}),(function(e){return e.compact&&"\n    padding: ".concat(.5*I.iI,"px ").concat(.75*I.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingTop&&"\n    padding-top: ".concat(.625*I.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingBottom&&"\n    padding-bottom: ".concat(.625*I.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingRight&&"\n    padding-right: ".concat(.75*I.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingLeft&&"\n    padding-left: ".concat(.75*I.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&!e.marketing&&"\n    padding: ".concat(2.25*I.iI,"px ").concat(3*I.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.marketing&&"\n    padding: ".concat(2.25*I.iI-2,"px ").concat(3*I.iI-2,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingTop&&"\n    padding-top: ".concat(1.125*I.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingBottom&&"\n    padding-bottom: ".concat(1.125*I.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingRight&&"\n    padding-right: ".concat(1.5*I.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingLeft&&"\n    padding-left: ".concat(1.5*I.iI,"px;\n  ")}),(function(e){return e.secondary&&"\n    flex-basis: content;\n    font-family: ".concat(He.nF,";\n    padding: 0;\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.bold&&"\n    font-family: ".concat(He.nF,";\n  ")}),(function(e){return!e.muted&&!e.inverted&&"\n    color: ".concat((e.theme.content||k.Z.content).active,";\n  ")}),(function(e){return!e.muted&&e.inverted&&"\n    color: ".concat((e.theme.content||k.Z.content).inverted,";\n  ")}),(function(e){return e.muted&&"\n    color: ".concat((e.theme.monotone||k.Z.monotone).grey300,";\n  ")}),(function(e){return e.warning&&"\n    color: ".concat((e.theme.brand||k.Z.brand).energy400,";\n  ")}),(function(e){return e.noHover&&"\n    &:hover {\n      cursor: default;\n    }\n  "}),(function(e){return e.blackBorder&&"\n    border: ".concat(O.YF,"px ").concat(O.M8," ").concat((e.theme.monotone||k.Z.monotone).black,";\n  ")}),(function(e){return!e.pill&&!e.borderless&&!e.compact&&"\n    border-radius: ".concat(O.n_,"px;\n  ")}),(function(e){return e.compact&&"\n    border-radius: ".concat(O.BG,"px;\n  ")}),(function(e){return!e.borderRadiusLeft&&!e.borderRadiusRight&&e.pill&&!e.spacious&&"\n    border-radius: ".concat(5*I.iI,"px;\n  ")}),(function(e){return e.borderRadiusLeft&&e.pill&&!e.spacious&&"\n    border-bottom-left-radius: ".concat(5*I.iI,"px;\n    border-top-left-radius: ").concat(5*I.iI,"px;\n  ")}),(function(e){return e.borderRadiusRight&&e.pill&&!e.spacious&&"\n    border-bottom-right-radius: ".concat(5*I.iI,"px;\n    border-top-right-radius: ").concat(5*I.iI,"px;\n  ")}),(function(e){return e.borderRadiusLeft&&e.pill&&e.spacious&&"\n    border-bottom-left-radius: ".concat(8*I.iI,"px;\n    border-top-left-radius: ").concat(8*I.iI,"px;\n  ")}),(function(e){return e.borderRadiusRight&&e.pill&&e.spacious&&"\n    border-bottom-right-radius: ".concat(8*I.iI,"px;\n    border-top-right-radius: ").concat(8*I.iI,"px;\n  ")}),(function(e){return!e.noBackground&&e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")}),(function(e){return e.inverted&&!e.noBackground&&!e.backgroundColor&&"\n    background-color: ".concat((e.theme.monotone||k.Z.monotone).black,";\n  ")}),(function(e){return!e.inverted&&!e.noBackground&&"\n    background-color: ".concat((e.theme.interactive||k.Z.interactive).defaultBackground,";\n\n    &:hover {\n      background-color: ").concat((e.theme.interactive||k.Z.interactive).hoverBackground,";\n    }\n  ")}),(function(e){return e.noBackground&&"\n    background-color: transparent !important;\n  "}),(function(e){return e.disabled&&e.inverted&&"\n    color: ".concat((e.theme.monotone||k.Z.monotone).grey400," !important;\n  ")}),(function(e){return e.disabled&&!e.inverted&&"\n    color: ".concat((e.theme.monotone||k.Z.monotone).grey300," !important;\n  ")}),(function(e){return e.disabled&&"\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.monotone||k.Z.monotone).black,";\n    color: ").concat((e.theme.monotone||k.Z.monotone).white,";\n  ")}),(function(e){return e.selected&&e.grey300&&"\n    background-color: ".concat((e.theme.monotone||k.Z.monotone).grey300,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.fire&&"\n    background-color: ".concat((e.theme.brand||k.Z.brand).fire400,";\n  ")}),(function(e){return e.useModelTheme&&"\n    color: ".concat((e.theme.monotone||k.Z.monotone).white,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.earth&&"\n    background-color: ".concat((e.theme.brand||k.Z.brand).earth400,";\n  ")}),(function(e){return e.primaryEnergy&&"\n    background-color: ".concat((e.theme.brand||k.Z.brand).energy400,";\n    border: none;\n    font-family: ").concat(He.nF,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.wind&&"\n    background-color: ".concat((e.theme.brand||k.Z.brand).wind400,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.water&&"\n    background-color: ".concat((e.theme.brand||k.Z.brand).water400,";\n  ")}),(function(e){return e.withIcon&&"\n    padding: ".concat(1.25*I.iI-1,"px !important;\n  ")}),(function(e){return e.shadow&&"\n    box-shadow: ".concat((e.theme.shadow||k.Z.shadow).large,";\n  ")})),Nn=y.default.button.withConfig({displayName:"KeyboardShortcutButton__ButtonStyle",componentId:"sc-10tm4pj-0"})(["",""],Bn),Mn=y.default.a.withConfig({displayName:"KeyboardShortcutButton__AnchorStyle",componentId:"sc-10tm4pj-1"})([""," ",""],Bn,_n.R),Fn=y.default.span.withConfig({displayName:"KeyboardShortcutButton__SpanStyle",componentId:"sc-10tm4pj-2"})(["margin-right:","px;"],1*I.iI);var Ln=function(e){var n=e.Icon,t=e.afterElement,r=e.beforeElement,o=e.bold,i=e.borderless,c=e.centerText,l=e.children,a=e.compact,s=e.disabled,d=e.fitContentWidth,p=e.inverted,h=e.keyTextGroups,m=e.keyTextsPosition,v=void 0===m?Cn.RIGHT:m,g=e.linkProps,b=e.loading,x=e.mutedDisabled,y=e.onClick,j=e.type,k=void 0===j?wn.BUTTON:j,O=e.useModelTheme,w=(0,W.Z)(e,Dn),Z=g||{},P=Z.as,E=Z.href,S=P||E?Mn:Nn,_=(0,f.useMemo)((function(){if(!h)return null;var e=(0,u.Z)({},v===Cn.RIGHT?"ml":"mr",l?1:0);return(0,C.jsx)(Sn.Z,An(An({},e),{},{children:(0,C.jsx)(T,{borderless:p,disabled:s,keyTextGroups:h,mutedDisabled:x})}))}),[l,s,p,h,v,x]),D=((0,f.useContext)(In)||{}).sharedProps;return(0,C.jsx)(Zn,An(An({},w),{},{buildChildren:function(e){var u=e.eventProperties,f=e.eventType,h=e.logEvent,m=e.onClick,y=e.userProperties,j=(0,C.jsxs)(S,An(An(An({},w),O?D:{}),{},{bold:O||o,borderless:O||i,center:c,compact:a,disabled:s||x,fitContentWidth:d,inverted:p,noHover:!m&&!(P||E)&&k===wn.BUTTON,onClick:function(e){yn(h,f,{eventProperties:u,userProperties:y}),null===m||void 0===m||m(e)},type:P||E?null:k,useModelTheme:O,withIcon:!!n,children:[r&&!b&&(0,C.jsxs)(C.Fragment,{children:[r,(0,C.jsx)(Sn.Z,{mr:1})]}),v===Cn.LEFT&&_,(0,C.jsxs)(Q.Z,{alignItems:"center",children:[n&&(0,C.jsx)(n,{inverted:!p,muted:s||x,size:2.5*I.iI}),n&&l&&(0,C.jsx)(Sn.Z,{mr:1}),b&&(0,C.jsx)(Fn,{children:(0,C.jsx)(Tn.Z,{inverted:!p})}),!b&&l]}),v===Cn.RIGHT&&_&&(0,C.jsx)(Sn.Z,{ml:1,children:_}),t&&!b&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Sn.Z,{ml:t?1:0}),t]})]}));return!P&&!E||s||x?j:(0,C.jsx)(Ve(),An(An({},g),{},{passHref:!0,children:j}))},disabled:s||x,linkProps:g,onClick:y}))},Hn=t(50079),Un=t(96510);function zn(e,n){var t=e.map((function(e){return String(e)})),r=e.includes(M.PQ),o=e.includes(M.zX),i=e.includes(M.XR),c=M.xU.map((function(e){return String(e)})),u=M.vk.map((function(e){return String(e)})),a=M.Tr.map((function(e){return String(e)})),s=Object.entries(n).find((function(e){var n=(0,l.Z)(e,2),s=n[0];return n[1]&&!t.includes(String(s))&&(!o||!u.includes(String(s)))&&(!r||!c.includes(String(s)))&&(!i||!a.includes(String(s)))}));return e.every((function(e){return n[e]}))&&!s}function Wn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Qn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Wn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Gn=function(e){var n=e.addNewBlock,t=e.filePath,r=(e.pipeline,e.setFilesTouched),o=(0,f.useState)(null),c=o[0],a=o[1],s=Hn.ZP.file_contents.detail(t).data;(0,f.useEffect)((function(){null!==s&&void 0!==s&&s.file_content&&a(s.file_content)}),[s]);var d=(0,f.useState)(null===c||void 0===c?void 0:c.content),h=d[0],m=d[1],v=(0,f.useState)(!1),g=v[0],b=v[1],x=(0,p.Db)(Hn.ZP.file_contents.useUpdate(null===c||void 0===c?void 0:c.path),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(){return!0},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),y=(0,l.Z)(x,1)[0],j=function(e,n){y({file_content:Qn(Qn({},n),{},{content:e})}),r((function(e){return Qn(Qn({},e),{},(0,u.Z)({},null===n||void 0===n?void 0:n.path,!1))})),b(!1)},k=(0,f.useMemo)((function(){return new RegExp(Object.keys(oe).map((function(e){return".(".concat(e,")$")})).join("|"))}),[]),O=(0,f.useMemo)((function(){var e;return null===c||void 0===c||null===(e=c.path.match(k)[0])||void 0===e?void 0:e.split(".")[1]}),[k,c]),w=(0,f.useMemo)((function(){if(null!==c&&void 0!==c&&c.path)return(0,C.jsx)(Ge,{autoHeight:!0,language:oe[O],onSave:function(e){j(e,c)},onChange:function(e){m(e),r((function(e){return Qn(Qn({},e),{},(0,u.Z)({},null===c||void 0===c?void 0:c.path,!0))})),b(!0)},selected:!0,textareaFocused:!0,value:null===c||void 0===c?void 0:c.content,width:"100%"})}),[c,O,j,r]),Z=O===q.PY&&ae(c.path.split("/"))!==i.SCRATCHPAD&&(0,C.jsx)(Sn.Z,{p:2,children:(0,C.jsx)(Ln,{inline:!0,onClick:function(){return n({type:ae(c.path.split("/")),uuid:se(c.path.split("/"))})},uuid:"FileEditor/AddToCurrentPipeline",children:"Add to current pipeline"})}),P="FileEditor/".concat(null===c||void 0===c?void 0:c.path),E=(0,L.y)(),I=E.registerOnKeyDown,S=E.unregisterOnKeyDown;return(0,f.useEffect)((function(){return function(){S(P)}}),[S,P]),I(P,(function(e,n,t){if(zn([M.zX,M.Um],n))e.preventDefault(),j(h,c);else if(g&&zn([M.zX,M.hS],n)){e.preventDefault();var r="".concat(c.path," has changes that are unsaved. ")+"Click cancel and save your changes before reloading page.";"undefined"!==typeof location&&window.confirm(r)&&location.reload()}}),[h,c,j,g]),(0,C.jsxs)(C.Fragment,{children:[w,Z]})},Kn=t(47999),Vn=y.default.div.withConfig({displayName:"indexstyle__LinkStyle",componentId:"sc-y3uzxv-0"})(["padding:","px;&:hover{cursor:pointer;","}",""],I.iI,(function(e){return"\n      background-color: ".concat((e.theme.interactive||k.Z.interactive).hoverBackground,";\n    ")}),(function(e){return e.highlighted&&"\n    background-color: ".concat((e.theme.interactive||k.Z.interactive).hoverBackground,";\n  ")}));function Xn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Yn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Xn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qn=function(e){var n=e.fetchFileTree,t=e.interruptKernel,r=e.restartKernel,o=e.savePipelineContent,i=e.setMessages,c=(0,h.useRouter)(),a=(0,f.useState)(null),s=a[0],d=a[1],m=(0,f.useRef)(null),v=(0,f.useRef)(null),g=(0,p.Db)(Hn.ZP.pipelines.useCreate(),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(e){var t=e.pipeline.uuid;c.push("/pipelines/[...slug]","/pipelines/".concat(t)),n()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),b=(0,l.Z)(g,1)[0],y=[{label:function(){return"New pipeline"},onClick:function(){return b({pipeline:{name:(0,ye.Y6)()}})},uuid:"new pipeline"},{label:function(){return"Save pipeline"},keyTextGroups:[[M.RJ,M.SS]],onClick:function(){return o()},uuid:"save pipeline"}],k=[{label:function(){return"Interrupt kernel"},keyTextGroups:[[M.kA],[M.kA]],onClick:function(){return t()},uuid:"Interrupt kernel"},{label:function(){return"Restart kernel"},keyTextGroups:[[M.t_[M.OC]],[M.t_[M.OC]]],onClick:function(){return r()},uuid:"Restart kernel"},{label:function(){return"Clear all outputs"},onClick:function(){return i((function(e){return Object.keys(e).reduce((function(e,n){return Yn(Yn({},e),{},(0,u.Z)({},n,[]))}),{})}))},uuid:"Clear all outputs"}],O="FileHeaderMenu/index",w=(0,L.y)(),Z=w.registerOnKeyDown,P=w.unregisterOnKeyDown;return(0,f.useEffect)((function(){return function(){P(O)}}),[P,O]),Z(O,(function(e,n,t){null!==s&&(n[M.QK]?d((function(e){return 0===e?1:e-1})):n[M.DY]&&d((function(e){return 1===e?0:e+1})))}),[s,d]),(0,C.jsx)(Kn.Z,{onClickOutside:function(){return d(null)},open:!0,style:{position:"relative"},children:(0,C.jsxs)(x.Z,{children:[(0,C.jsxs)("div",{style:{position:"relative"},children:[(0,C.jsx)(Vn,{highlighted:0===s,onClick:function(){return d((function(e){return 0===e?null:0}))},onMouseEnter:function(){return d((function(e){return null!==e?0:null}))},ref:m,children:(0,C.jsx)(j.ZP,{children:"File"})}),(0,C.jsx)(z,{items:y,onClickCallback:function(){return d(null)},open:0===s,parentRef:m,uuid:"FileHeaderMenu/file_items"})]}),(0,C.jsxs)("div",{style:{position:"relative"},children:[(0,C.jsx)(Vn,{highlighted:1===s,onClick:function(){return d((function(e){return 1===e?null:1}))},onMouseEnter:function(){return d((function(e){return null!==e?1:null}))},ref:v,children:(0,C.jsx)(j.ZP,{children:"Run"})}),(0,C.jsx)(z,{items:k,onClickCallback:function(){return d(null)},open:1===s,parentRef:v,uuid:"FileHeaderMenu/run_items"})]})]})})},Jn=t(57384),$n=t(82944),et=t(60328),nt=(0,y.css)(["position:relative;",""],(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n  ")})),tt=y.default.div.withConfig({displayName:"TooltipWrapper__ContainerStyle",componentId:"sc-1dd57l8-0"})(["",""],nt),rt=y.default.span.withConfig({displayName:"TooltipWrapper__ContainerSpanStyle",componentId:"sc-1dd57l8-1"})(["",""],nt),ot=y.default.a.withConfig({displayName:"TooltipWrapper__HoverStyle",componentId:"sc-1dd57l8-2"})([""," "," border-radius:50%;"," "," &:active,&:focus{outline:none;}",""],(0,fe.eR)(),(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n    width: ").concat(e.size,"px;\n  ")}),(function(e){return!e.block&&"\n    display: inline-block;\n  "}),(function(e){return e.block&&"\n    display: block;\n  "}),(function(e){return!e.noHoverOutline&&"\n    &:hover {\n      cursor: pointer;\n\n      box-shadow:\n        0 0 0 ".concat(O.PV,"px ").concat((0,et.W)(e),",\n        0 0 0 ").concat(O.PV+O.q2,"px ").concat((e.theme.interactive||k.Z.interactive).hoverOverlay,";\n    }\n  ")})),it=y.default.span.withConfig({displayName:"TooltipWrapper__BasicStyle",componentId:"sc-1dd57l8-3"})([""]),ct=y.default.div.withConfig({displayName:"TooltipWrapper__ContentStyle",componentId:"sc-1dd57l8-4"})(["position:absolute;z-index:3;"," "," "," "," "," "," "," "," ",""],(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||k.Z.shadow).base,";\n  ")}),(function(e){return e.appearAbove&&!e.size&&"\n    bottom: 0;\n  "}),(function(e){return e.appearAbove&&e.size&&"\n    bottom: ".concat(e.size+O.PV+O.q2,"px;\n  ")}),(function(e){return e.appearBefore&&"\n    right: 0;\n  "}),(function(e){return e.leftPosition&&"\n    left: ".concat(e.leftPosition,"px;\n  ")}),(function(e){return!e.leftPosition&&e.rightPosition&&"\n    right: 0px;\n  "}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n  ")}),(function(e){return e.widthFitContent&&"\n    width: max-content;\n  "}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset,"px;\n  ")}));var lt=function(e){var n=e.alignLeft,t=e.appearAbove,r=e.appearBefore,o=e.autoWidth,i=e.basic,c=e.block,l=e.center,u=e.children,a=e.content,s=e.inline,d=e.minWidth,p=e.noHoverOutline,h=e.size,m=void 0===h?2*I.iI:h,v=e.topOffset,g=e.widthFitContent,b=(0,f.useState)(!1),x=b[0],y=b[1],j=(0,f.useState)(!1),k=j[0],O=j[1],w=(d-m)/-2,Z=s?rt:tt,P=i?it:ot,E=(0,C.jsx)(P,{block:c,href:"#",noHoverOutline:p,onClick:function(e){return e.preventDefault()},onMouseEnter:function(){return y(!0)},size:m,children:u});return(0,f.useEffect)((function(){var e=setInterval((function(){return O(!0)}),1e3);return x||clearInterval(e),function(){return clearInterval(e)}}),[O,x]),(0,C.jsxs)(Z,{onMouseLeave:function(){y(!1),O(!1)},size:m,children:[E,k&&(0,C.jsx)(ct,{appearAbove:t,appearBefore:r,leftPosition:l?w:null,minWidth:o?d:null,rightPosition:n,size:m,topOffset:v,widthFitContent:g,children:a})]})},ut=["autoWidth","children","default","description","inverted","keyboardShortcuts","label","maxWidth","muted","size","warning","widthFitContent"];function at(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function st(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?at(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):at(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var dt=42*I.iI,ft=((0,y.css)(["position:relative;",""],(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n  ")})),(0,y.css)(["border-radius:","px;"," "," ",""],O.BG,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||k.Z.shadow).popup,";\n\n    background-color: ").concat((e.theme.background||k.Z.background).popup,";\n  ")}),(function(e){return e.width&&!(e.widthFitContent||e.autoWidth)&&"\n    width: ".concat(e.width,"px;\n  ")}),(function(e){return!e.width&&!(e.widthFitContent||e.autoWidth)&&"\n    width: ".concat(dt,"px;\n  ")}))),pt=y.default.div.withConfig({displayName:"Tooltip__LabelStyle",componentId:"sc-allmdq-0"})([""," padding:","px ","px;"],ft,.75*I.iI,1*I.iI),ht=y.default.div.withConfig({displayName:"Tooltip__DescriptionStyle",componentId:"sc-allmdq-1"})([""," padding:","px ","px;"],ft,1.5*I.iI,2*I.iI);var mt=function(e){var n=e.autoWidth,t=e.children,r=e.default,o=e.description,i=e.inverted,c=e.keyboardShortcuts,l=e.label,u=e.maxWidth,a=e.muted,s=e.size,d=void 0===s?2*I.iI:s,p=e.warning,h=e.widthFitContent,m=(0,W.Z)(e,ut),v=o||l||"",g=o?ht:pt,b=Math.min(u||dt,v.length*I.Fo),y=[];null===c||void 0===c||c.forEach((function(e,n){n>=1&&y.push((0,C.jsx)(j.ZP,{default:!0,children:"+"})),y.push(e)}));var k=y.map((function(e,n){var t="keyboard-shortcut-".concat(n);return"string"===typeof e?(0,C.jsx)("span",{children:e},t):f.cloneElement(e,{key:t})}));return(0,C.jsx)(lt,st(st({},m),{},{autoWidth:n,content:(0,C.jsx)(g,{autoWidth:n,width:u,widthFitContent:h,children:(0,C.jsxs)(x.Z,{alignItems:"center",children:[(0,C.jsx)(j.ZP,{whiteSpaceNormal:!0,children:v}),k.length>=1&&(0,C.jsx)(j.ZP,{muted:!0,children:"\xa0\xa0\xa0\u2022\xa0\xa0\xa0"}),k.length>=1&&k]})}),minWidth:b,noHoverOutline:!!t,size:d,widthFitContent:h,children:t||(0,C.jsx)(_.kI,{default:r,inverted:i,muted:a,size:d,warning:p})}))},vt=["bold","defaultColor","description","disableWordBreak","inputValue","inputWidth","invertedTheme","label","menuOpen","monospace","muted","onClick","notRequired","selectedTextProps","small","stacked","tooltipProps","value"];function gt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function bt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?gt(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var xt=y.default.div.withConfig({displayName:"LabelWithValueClicker__LabelStyle",componentId:"sc-1hzpn4h-0"})(["margin-bottom:","px;"],.25*I.iI),yt=y.default.div.withConfig({displayName:"LabelWithValueClicker__DescriptionStyle",componentId:"sc-1hzpn4h-1"})([""]);var jt=function(e){var n=e.bold,t=void 0===n||n,r=e.defaultColor,o=e.description,i=e.disableWordBreak,c=e.inputValue,l=e.inputWidth,u=e.invertedTheme,a=e.label,s=e.menuOpen,d=void 0!==s&&s,p=e.monospace,h=e.muted,m=e.onClick,v=e.notRequired,g=e.selectedTextProps,b=e.small,y=e.stacked,k=e.tooltipProps,O=e.value,w=(0,W.Z)(e,vt),Z=(0,f.useRef)(null),P=(0,f.useState)(!1),E=P[0],I=P[1],S=(0,f.useState)(!1),T=S[0],_=S[1],D=a&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j.ZP,{bold:t,inverted:u,lineHeight:20,monospace:p,muted:h,small:b,children:a}),k&&(0,C.jsx)(Sn.Z,{ml:1,children:(0,C.jsx)(mt,bt({muted:!0},k))})]}),R=(0,C.jsxs)(C.Fragment,{children:[O&&(0,C.jsx)(_n.Z,{block:!0,danger:null===g||void 0===g?void 0:g.danger,fullWidth:!0,muted:h,onClick:function(){m(),Z.current&&Z.current.focus(),I(!0)},preventDefault:!0,sameColorAsText:h||!(null!==g&&void 0!==g&&g.primary)&&!(null!==g&&void 0!==g&&g.danger)&&!(null!==g&&void 0!==g&&g.warning),underline:null===g||void 0===g?void 0:g.underline,warning:null===g||void 0===g?void 0:g.warning,children:(0,C.jsx)(j.ZP,bt(bt({inverted:u,muted:h},g),{},{disableWordBreak:i,monospace:p,small:b,width:l,children:O}))}),(0,C.jsx)($n.Z,bt(bt({},w),{},{basic:!0,defaultColor:r,invertedTheme:u,monospace:p,onBlur:function(e){I(!1),w.onBlur&&w.onBlur(e),T||_(!0)},onFocus:function(e){I(!0),w.onFocus&&w.onFocus(e)},ref:Z,small:b,value:c,visible:!O}))]}),A=o&&(0,C.jsx)(yt,{children:(0,C.jsx)(j.ZP,{dangerouslySetInnerHTML:{__html:o},monospace:p,muted:!0,small:b})});return(0,C.jsxs)(C.Fragment,{children:[y&&(0,C.jsxs)(C.Fragment,{children:[D&&(0,C.jsxs)(xt,{children:[(0,C.jsx)(x.Z,{alignItems:"center",fullHeight:!1,fullWidth:!0,children:D}),A]}),R]}),!y&&(0,C.jsxs)(x.Z,{alignItems:"center",fullWidth:!0,children:[D&&(0,C.jsxs)(C.Fragment,{children:[D,(0,C.jsx)(Sn.Z,{ml:1})]}),(0,C.jsx)(Q.Z,{flex:"1",children:R})]}),T&&!E&&!O&&!d&&!v&&(0,C.jsx)(j.ZP,{danger:!0,small:b,children:"This field is required."})]})},kt=t(37391),Ot=64*I.iI,Ct=3*I.cd*I.iI,wt=Ct,Zt=35*I.iI,Pt=.5*I.iI,Et=13*I.iI,It=3*I.cd*I.iI,St=(y.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-1lxpneo-0"})(["position:fixed;z-index:2;"," "," ",""],(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.monotone||k.Z.monotone).grey200,";\n  ")}),(function(e){return!e.beforeVisible&&"\n    width: 100%;\n  "}),(function(e){return e.beforeVisible&&"\n    left: ".concat(Zt,"px;\n    width: calc(100% - ").concat(Zt,"px);\n  ")})),y.default.div.withConfig({displayName:"indexstyle__TabStyle",componentId:"sc-1lxpneo-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;padding:","px ","px;position:relative;top:1px;"," "," ",""],O.n_,O.n_,1*I.iI,2*I.iI,(function(e){return"\n    border-left: 1px solid ".concat((e.theme.monotone||k.Z.monotone).grey200,";\n    border-right: 1px solid ").concat((e.theme.monotone||k.Z.monotone).grey200,";\n    border-top: 1px solid ").concat((e.theme.monotone||k.Z.monotone).grey200,";\n  ")}),(function(e){return!e.first&&"\n    margin-left: ".concat(1*I.iI,"px;\n  ")}),(function(e){return e.selected&&"\n    border-bottom: 1px solid ".concat((e.theme.monotone||k.Z.monotone).white,";\n  ")})),(0,y.css)(["height:calc(100% - ","px);position:fixed;top:","px;z-index:2;",""],It,It,(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).sidePanel,";\n  ")}))),Tt=(0,y.css)([""," height:100%;overflow:auto;position:relative;z-index:2;"],kt.w5),_t=(0,y.css)(["height:calc(100% + ","px);position:absolute;top:-","px;width:","px;z-index:6;&:hover{","}"," ",""],It,It,Pt,(function(e){return!e.disabled&&"\n      border-color: ".concat((e.theme.text||k.Z.text).fileBrowser," !important;\n    ")}),(function(e){return!e.disabled&&"\n    cursor: col-resize;\n  "}),(function(e){return e.active&&!e.disabled&&"\n    border-color: ".concat((e.theme.text||k.Z.text).fileBrowser," !important;\n  ")})),Dt=y.default.div.withConfig({displayName:"indexstyle__AsideHeaderStyle",componentId:"sc-1lxpneo-2"})(["border-bottom:1px solid transparent;height:","px;position:fixed;top:0;z-index:4;"," "," ",""],It,(0,kt.y$)(),(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).sidePanel,";\n  ")}),(function(e){return!e.visible&&"\n    border-color: ".concat((e.theme.borders||k.Z.borders).medium," !important;\n  ")})),Rt=y.default.aside.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-1lxpneo-3"})([""," left:0;"],St),At=y.default.div.withConfig({displayName:"indexstyle__BeforeInnerStyle",componentId:"sc-1lxpneo-4"})([""," overflow:hidden;&:hover{overflow:auto;}"],Tt),Bt=y.default.aside.withConfig({displayName:"indexstyle__AfterStyle",componentId:"sc-1lxpneo-5"})([""," right:0;"],St),Nt=y.default.div.withConfig({displayName:"indexstyle__AfterInnerStyle",componentId:"sc-1lxpneo-6"})(["",""],Tt),Mt=y.default.div.withConfig({displayName:"indexstyle__DraggableStyle",componentId:"sc-1lxpneo-7"})([""," "," ",""],_t,(function(e){return"undefined"!==typeof e.left&&"\n    border-left: 1px solid transparent;\n    left: ".concat(e.left,"px;\n  ")}),(function(e){return"undefined"!==typeof e.right&&"\n    border-right: 1px solid transparent;\n    right: ".concat(e.right,"px;\n  ")})),Ft=y.default.div.withConfig({displayName:"indexstyle__MainWrapper",componentId:"sc-1lxpneo-8"})(["height:100%;position:fixed;z-index:1;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).codeArea,";\n  ")})),Lt=y.default.div.withConfig({displayName:"indexstyle__MainContentStyle",componentId:"sc-1lxpneo-9"})(["position:fixed;z-index:2;",""],(function(e){return"\n    height: calc(100% - ".concat(e.headerOffset||0,"px);\n    top: ").concat(e.headerOffset||0,"px;\n  ")})),Ht=y.default.div.withConfig({displayName:"indexstyle__MainContentInnerStyle",componentId:"sc-1lxpneo-10"})([""," height:100%;overflow:auto;"],kt.w5),Ut=300,zt=y.default.div.withConfig({displayName:"indexstyle__PipelineContainerStyle",componentId:"sc-1sv9513-0"})([".pipeline-detail-enter-active{opacity:1;transition:opacity ","ms linear;}.pipeline-detail-enter-done{opacity:0;transition:opacity ","ms linear;}"],Ut,Ut),Wt=y.default.div.withConfig({displayName:"indexstyle__OverlayStyle",componentId:"sc-1sv9513-1"})(["height:100vh;opacity:1;position:fixed;width:100vw;z-index:9999;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).codeArea,";\n  ")})),Qt=y.default.div.withConfig({displayName:"indexstyle__PipelineHeaderStyle",componentId:"sc-1sv9513-2"})(["height:","px;position:sticky;top:0;width:100%;z-index:5;",""],It,(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).codeArea,";\n    border-bottom: 1px solid ").concat((e.theme.borders||k.Z.borders).light,";\n  ")})),Gt=y.default.div.withConfig({displayName:"indexstyle__FileTabStyle",componentId:"sc-1sv9513-3"})(["border-left:1px solid transparent;height:100%;padding:","px ","px;"," "," ",""],I.iI,I.cd*I.iI,(function(e){return"\n    &:hover {\n      cursor: default;\n\n      p {\n        color: ".concat((e.theme.content||k.Z.content).active," !important;\n        cursor: default;\n      }\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.interactive||k.Z.interactive).hoverBackground,";\n  ")}),(function(e){return!e.selected&&"\n    border-color: ".concat((e.theme.borders||k.Z.borders).light," !important;\n  ")})),Kt=t(33766);var Vt,Xt,Yt=function(e){var n=e.filePaths,t=e.filesTouched,r=e.isBusy,o=e.isPipelineUpdating,i=e.kernel,c=e.pipeline,l=e.pipelineContentTouched,u=e.pipelineLastSaved,a=(e.restartKernel,e.selectedFilePath),s=e.updatePipelineName,d=(0,f.useContext)(y.ThemeContext),p=i||{},h=p.alive,m=p.name,v=(0,f.useState)(!1),g=v[0],b=v[1],O=(0,f.useState)(""),w=O[0],Z=O[1];(0,f.useEffect)((function(){null!==c&&void 0!==c&&c.uuid&&Z(c.uuid)}),[null===c||void 0===c?void 0:c.uuid]);var P,E=(0,f.useMemo)((function(){return n.map((function(e){return decodeURIComponent(e)}))}),[n]);P=l?"Unsaved changes":o?"Saving changes...":u?"Last saved ".concat((0,ye.JX)(Number(u)/1e3)):"All changes saved";var S=(0,f.useMemo)((function(){return(0,C.jsx)(jt,{bold:!1,inputValue:w,notRequired:!0,onBlur:function(){return setTimeout((function(){return b(!1)}),300)},onChange:function(e){Z(e.target.value),e.preventDefault()},onClick:function(){return b(!0)},onFocus:function(){return b(!0)},stacked:!0,value:g?null:(null===c||void 0===c?void 0:c.uuid)||""})}),[g,w,c]),T=(0,f.useMemo)((function(){return(0,C.jsxs)(Q.Z,{alignItems:"center",children:[(0,C.jsx)(J,{color:r?(d||k.Z).borders.info:h?(d||k.Z).borders.success:(d||k.Z).borders.danger,size:I.iI}),(0,C.jsx)(Sn.Z,{mr:1}),(0,C.jsxs)(x.Z,{alignItems:"center",children:[(0,C.jsxs)(j.ZP,{children:["Pipeline:\xa0",a&&(null===c||void 0===c?void 0:c.uuid)]}),!a&&S]}),(0,C.jsx)(Sn.Z,{mr:3})]})}),[h,r,c,S,a,d]);return(0,C.jsx)(Qt,{children:(0,C.jsxs)(x.Z,{alignItems:"center",fullHeight:!0,justifyContent:"space-between",children:[(0,C.jsxs)(x.Z,{alignItems:"center",fullHeight:!0,justifyContent:"flex-start",children:[(0,C.jsxs)(Sn.Z,{px:I.cd,children:[a&&(0,C.jsx)(_n.Z,{noHoverUnderline:!0,noOutline:!0,onClick:a?function(){return(0,Kt.u)({file_path:null})}:null,preventDefault:!0,children:T}),!a&&(0,C.jsxs)(x.Z,{alignItems:"center",children:[(0,C.jsx)(mt,{block:!0,label:h?"".concat(m," kernel is ").concat(r?"busy":"alive"):"Kernel is dead",size:null,widthFitContent:!0,children:T}),g&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Sn.Z,{ml:1}),(0,C.jsx)(_n.Z,{onClick:function(){s(w),b(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Update name"})]})]})]}),null===E||void 0===E?void 0:E.map((function(e){var n=a===encodeURIComponent(e);return(0,C.jsx)(x.Z,{flexDirection:"column",fullHeight:!0,justifyContent:"flex-end",onClick:function(t){t.preventDefault(),n||(0,Kt.u)({file_path:encodeURIComponent(e)})},children:(0,C.jsx)(Gt,{selected:n,children:(0,C.jsxs)(x.Z,{alignItems:"center",fullHeight:!0,children:[!t[e]&&(0,C.jsx)(_.iU,{muted:!n,size:1.5*I.iI}),t[e]&&(0,C.jsx)(mt,{label:"Unsaved changes",size:null,widthFitContent:!0,children:(0,C.jsx)("div",{style:{padding:1},children:(0,C.jsx)(J,{borderColor:(d||k.Z).borders.danger,size:1.25*I.iI})})}),(0,C.jsx)(Sn.Z,{mr:1}),(0,C.jsx)(j.ZP,{muted:!n,children:e}),(0,C.jsx)(Sn.Z,{mr:2}),n&&(0,C.jsx)(mt,{label:"Close",size:null,widthFitContent:!0,children:(0,C.jsx)(_n.Z,{autoHeight:!0,block:!0,noHoverUnderline:!0,noOutline:!0,onClick:function(){var n=(0,Oe.Od)(E,(function(n){return n===e})).map((function(e){return encodeURIComponent(e)}));(0,Kt.u)({file_path:n[n.length-1]||null,"file_paths[]":n},{pushHistory:!0})},preventDefault:!0,children:(0,C.jsx)(_.x8,{size:1.25*I.iI})})}),!n&&(0,C.jsx)("div",{style:{width:1.25*I.iI}})]})})},e)}))]}),!a&&(0,C.jsx)(Sn.Z,{px:I.cd,children:(0,C.jsx)(j.ZP,{muted:!0,children:P})})]})})};!function(e){e.BUSY="busy",e.IDLE="idle",e.QUEUED="queued"}(Vt||(Vt={})),function(e){e.IMAGE_PNG="image/png",e.TABLE="table",e.TEXT="text",e.TEXT_PLAIN="text/plain"}(Xt||(Xt={}));var qt,Jt=[Xt.TEXT,Xt.TEXT_PLAIN];!function(e){e.STATUS="status",e.STREAM="stream",e.STREAM_PIPELINE="stream_pipeline"}(qt||(qt={}));var $t=t(16910),er=t(77555);var nr,tr,rr,or,ir,cr,lr=function(e){var n=e.children,t=e.compact,r=e.items,o=e.open,i=e.onClickCallback,c=e.onClickOutside,l=e.parentRef,u=e.uuid,a=(0,C.jsxs)("div",{style:{position:"relative",zIndex:c?3:2},children:[(0,C.jsx)("div",{ref:l,children:n}),(0,C.jsx)(z,{compact:t,items:r,onClickCallback:i,open:o,parentRef:l,uuid:u})]});return c?(0,C.jsx)(Kn.Z,{onClickOutside:c,open:!0,children:a}):a},ur=t(80906),ar=(ur.Q0.AVERAGE,ur.Q0.CLEAN_COLUMN_NAME,ur.Q0.COUNT,ur.Q0.COUNT_DISTINCT,ur.Q0.CUSTOM,ur.Q0.DIFF,ur.Q0.FIRST,ur.Q0.FIX_SYNTAX_ERRORS,ur.Q0.IMPUTE,ur.Q0.LAST,ur.Q0.MAX,ur.Q0.MEDIAN,ur.Q0.MIN,ur.Q0.REFORMAT,ur.Q0.REMOVE,ur.Q0.REMOVE_OUTLIERS,ur.Q0.SELECT,ur.Q0.SHIFT_DOWN,ur.Q0.SHIFT_UP,ur.Q0.SUM,[ur.Q0.CUSTOM,ur.Q0.DROP_DUPLICATE,ur.Q0.FILTER,ur.Q0.SORT,ur.Q0.REMOVE]);!function(e){e.AGGREGATE="Aggregate",e.FORMATTING="Formatting",e.COLUMN_REMOVAL="Column removal",e.SHIFT_ROWS="Shift rows in a column",e.MISC="Miscellaneous"}(cr||(cr={}));var sr,dr,fr=(tr={},(0,u.Z)(tr,ur.qs.COLUMN,(nr={},(0,u.Z)(nr,cr.AGGREGATE,[ur.Q0.AVERAGE,ur.Q0.COUNT,ur.Q0.COUNT_DISTINCT,ur.Q0.FIRST,ur.Q0.LAST,ur.Q0.MAX,ur.Q0.MEDIAN,ur.Q0.MIN,ur.Q0.SUM]),(0,u.Z)(nr,cr.FORMATTING,[ur.Q0.CLEAN_COLUMN_NAME,ur.Q0.FIX_SYNTAX_ERRORS,ur.Q0.REFORMAT]),(0,u.Z)(nr,cr.COLUMN_REMOVAL,[ur.Q0.REMOVE,ur.Q0.SELECT]),(0,u.Z)(nr,cr.SHIFT_ROWS,[ur.Q0.SHIFT_DOWN,ur.Q0.SHIFT_UP]),(0,u.Z)(nr,cr.MISC,[ur.Q0.CUSTOM,ur.Q0.DIFF,ur.Q0.IMPUTE,ur.Q0.REMOVE_OUTLIERS]),nr)),(0,u.Z)(tr,ur.qs.ROW,(0,u.Z)({},cr.MISC,[].concat(ar))),tr),pr=Object.keys(fr[ur.qs.COLUMN]),hr=[cr.MISC],mr=(ir={},(0,u.Z)(ir,ur.qs.COLUMN,(rr={},(0,u.Z)(rr,ur.Q0.ADD,"Add column"),(0,u.Z)(rr,ur.Q0.AVERAGE,"Aggregate by average value"),(0,u.Z)(rr,ur.Q0.CLEAN_COLUMN_NAME,"Clean column name"),(0,u.Z)(rr,ur.Q0.COUNT_DISTINCT,"Aggregate by distinct count"),(0,u.Z)(rr,ur.Q0.COUNT,"Aggregate by total count"),(0,u.Z)(rr,ur.Q0.CUSTOM,"Custom code column action"),(0,u.Z)(rr,ur.Q0.DIFF,"Difference"),(0,u.Z)(rr,ur.Q0.FIRST,"Aggregate by first value"),(0,u.Z)(rr,ur.Q0.FIX_SYNTAX_ERRORS,"Fix syntax errors"),(0,u.Z)(rr,ur.Q0.IMPUTE,"Fill in missing values"),(0,u.Z)(rr,ur.Q0.LAST,"Aggregate by last value"),(0,u.Z)(rr,ur.Q0.MAX,"Aggregate by maximum value"),(0,u.Z)(rr,ur.Q0.MEDIAN,"Aggregate by median value"),(0,u.Z)(rr,ur.Q0.MIN,"Aggregate by mininum value"),(0,u.Z)(rr,ur.Q0.REFORMAT,"Reformat"),(0,u.Z)(rr,ur.Q0.REMOVE_OUTLIERS,"Remove outliers"),(0,u.Z)(rr,ur.Q0.REMOVE,"Remove column(s)"),(0,u.Z)(rr,ur.Q0.SELECT,"Keep columns"),(0,u.Z)(rr,ur.Q0.SHIFT_DOWN,"Shift rows down in a column"),(0,u.Z)(rr,ur.Q0.SHIFT_UP,"Shift rows up in a column"),(0,u.Z)(rr,ur.Q0.SUM,"Aggregate by sum of values"),rr)),(0,u.Z)(ir,ur.qs.ROW,(or={},(0,u.Z)(or,ur.Q0.CUSTOM,"Custom code row action"),(0,u.Z)(or,ur.Q0.DROP_DUPLICATE,"Drop duplicates"),(0,u.Z)(or,ur.Q0.FILTER,"Filter"),(0,u.Z)(or,ur.Q0.SORT,"Sort"),(0,u.Z)(or,ur.Q0.REMOVE,"Remove rows"),or)),ir);!function(e){e.BIGQUERY="bigquery",e.FILE="file",e.GENERIC="generic",e.POSTGRES="postgres",e.REDSHIFT="redshift",e.S3="s3",e.SNOWFLAKE="snowflake"}(dr||(dr={}));var vr=(sr={},(0,u.Z)(sr,dr.BIGQUERY,"Google BigQuery"),(0,u.Z)(sr,dr.FILE,"Local file"),(0,u.Z)(sr,dr.GENERIC,"Generic (no template)"),(0,u.Z)(sr,dr.POSTGRES,"PostgreSQL"),(0,u.Z)(sr,dr.REDSHIFT,"Amazon Redshift"),(0,u.Z)(sr,dr.S3,"Amazon S3"),(0,u.Z)(sr,dr.SNOWFLAKE,"Snowflake"),sr),gr=[dr.GENERIC,dr.FILE,dr.BIGQUERY,dr.POSTGRES,dr.REDSHIFT,dr.S3,dr.SNOWFLAKE],br=I.cd*I.iI,xr=y.default.div.withConfig({displayName:"indexstyle__IconContainerStyle",componentId:"sc-oyfjzc-0"})(["align-items:center;border-radius:","px;border:1px solid transparent;display:flex;justify-content:center;"," "," "," "," "," ",""],O.BG,(function(e){return e.border&&"\n    border: 1px dotted ".concat((e.theme.content||k.Z.content).active,";\n  ")}),(function(e){return e.blue&&"\n    background-color: ".concat(pe(i.DATA_LOADER,e).accent,";\n  ")}),(function(e){return e.purple&&"\n    background-color: ".concat(pe(i.TRANSFORMER,e).accent,";\n  ")}),(function(e){return e.yellow&&"\n    background-color: ".concat(pe(i.DATA_EXPORTER,e).accent,";\n  ")}),(function(e){return!e.compact&&"\n    height: ".concat(br+I.iI/2,"px;\n    width: ").concat(br+I.iI/2,"px;\n  ")}),(function(e){return e.compact&&"\n    height: ".concat(br/2+I.iI,"px;\n    width: ").concat(br/2+I.iI,"px;\n  ")}));function yr(e,n,t){return e.map((function(e){return{indent:!0,label:function(){return mr[n][e]},onClick:function(){t({config:{action_type:e,axis:n},type:i.TRANSFORMER})},uuid:"".concat(n,"_").concat(e)}})).sort((function(e,n){return e.label().localeCompare(n.label())}))}function jr(e,n,t){var r=[];return e.forEach((function(e){if(e!==cr.MISC)r.push({indent:!0,items:yr(fr[n][e],n,t),label:function(){return e},uuid:"".concat(n,"_grouping_").concat((0,ye.RA)(e))});else{var o=yr(fr[n][e],n,t);r.push.apply(r,(0,er.Z)(o))}})),r}function kr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Or(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?kr(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Cr=function(e){var n=e.addNewBlock,t=e.compact,r=(0,f.useState)(null),o=r[0],c=r[1],l=(0,f.useRef)(null),u=(0,f.useRef)(null),a={compact:t,inline:!0},s=gr.map((function(e){return{label:function(){return vr[e]},onClick:function(){n({config:{data_source:e===dr.GENERIC?null:e},type:i.DATA_LOADER})},uuid:e}})),d=jr(pr,ur.qs.COLUMN,n),p=jr(hr,ur.qs.ROW,n),h=[{label:function(){return"Generic (no template)"},onClick:function(){n({type:i.TRANSFORMER})},uuid:"generic_transformer_action"},{isGroupingTitle:!0,label:function(){return"Column actions"},uuid:"column_actions_grouping"}].concat((0,er.Z)(d),[{isGroupingTitle:!0,label:function(){return"Row actions"},uuid:"row_actions_grouping"}],(0,er.Z)(p)),m=(0,f.useCallback)((function(){return c(null)}),[]);return(0,C.jsxs)(x.Z,{inline:!0,children:[(0,C.jsx)(Kn.Z,{onClickOutside:m,open:!0,children:(0,C.jsxs)(x.Z,{children:[(0,C.jsx)(lr,{items:h,onClickCallback:m,open:0===o,parentRef:u,uuid:"transformer_button",children:(0,C.jsx)(Ln,Or(Or({},a),{},{beforeElement:(0,C.jsx)(xr,{compact:t,purple:!0,children:(0,C.jsx)(_.mm,{size:t?br/2:br})}),onClick:function(e){e.preventDefault(),c((function(e){return 0===e?null:0}))},uuid:"AddNewBlocks/Transformer",children:"Transformer"}))}),(0,C.jsx)(Sn.Z,{ml:1}),(0,C.jsx)(lr,{items:s,onClickCallback:m,open:1===o,parentRef:l,uuid:"data_loader_button",children:(0,C.jsx)(Ln,Or(Or({},a),{},{beforeElement:(0,C.jsx)(xr,{blue:!0,compact:t,children:(0,C.jsx)(_.mm,{size:t?br/2:br})}),onClick:function(e){e.preventDefault(),c((function(e){return 1===e?null:1}))},uuid:"AddNewBlocks/Data_loader",children:"Data loader"}))})]})}),(0,C.jsx)(Sn.Z,{ml:1}),(0,C.jsx)(Ln,Or(Or({},a),{},{beforeElement:(0,C.jsx)(xr,{compact:t,yellow:!0,children:(0,C.jsx)(_.mm,{inverted:!0,size:t?br/2:br})}),onClick:function(e){e.preventDefault(),n({type:i.DATA_EXPORTER})},uuid:"AddNewBlocks/Data_exporter",children:"Data exporter"})),(0,C.jsx)(Sn.Z,{ml:1}),(0,C.jsx)(Ln,Or(Or({},a),{},{beforeElement:(0,C.jsx)(xr,{border:!0,compact:t,children:(0,C.jsx)(_.mm,{size:t?br/2:br})}),onClick:function(e){e.preventDefault(),n({type:i.SCRATCHPAD})},uuid:"AddNewBlocks/Scratchpad",children:"Scratchpad"}))]})},wr=t(89565),Zr=t.n(wr),Pr=t(62976),Er=y.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-n38rkq-0"})([""," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;overflow:hidden;"," ",""],he,(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).table,";\n  ")}),(function(e){return!e.executedAndIdle&&"\n    border-bottom-left-radius: ".concat(O.n_,"px;\n    border-bottom-right-radius: ").concat(O.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n  ")})),Ir=y.default.div.withConfig({displayName:"indexstyle__OutputRowStyle",componentId:"sc-n38rkq-1"})([""," "," ",""],(function(e){return e.first&&"\n    padding-top: ".concat(I.iI*I.cd,"px;\n  ")}),(function(e){return e.last&&"\n    padding-bottom: ".concat(I.iI*I.cd,"px;\n  ")}),(function(e){return e.contained&&"\n    padding-left: ".concat(68,"px;\n    padding-right: ").concat(I.iI*I.cd,"px;\n  ")})),Sr=y.default.div.withConfig({displayName:"indexstyle__ExtraInfoStyle",componentId:"sc-n38rkq-2"})([""," border-bottom-style:solid;border-bottom-width:2px;border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;",""],he,(function(e){return"\n    background-color: ".concat((e.theme.borders||k.Z.borders).light,";\n    border-bottom-left-radius: ").concat(O.n_,"px;\n    border-bottom-right-radius: ").concat(O.n_,"px;\n  ")})),Tr=y.default.div.withConfig({displayName:"indexstyle__ExtraInfoContentStyle",componentId:"sc-n38rkq-3"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;"],I.iI,68,I.iI*I.cd,I.iI),_r=y.default.div.withConfig({displayName:"indexstyle__ExtraInfoBorderStyle",componentId:"sc-n38rkq-4"})(["height:1px;width:100%;",""],(function(e){return"\n    border-top: 1px solid ".concat((e.theme.borders||k.Z.borders).medium,";\n  ")}));function Dr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Rr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Dr(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ar,Br,Nr,Mr=function(e){var n=e.block,t=e.collapsed,r=e.contained,o=void 0===r||r,i=e.hasError,c=e.hideExtraInfo,l=e.isInProgress,u=e.mainContainerWidth,a=e.messages,s=e.runCount,d=e.runEndTime,p=e.runStartTime,h=e.selected,v=e.setCollapsed,g=n.status,b=n.type,y=(0,f.useMemo)((function(){return(null===a||void 0===a?void 0:a.length)||0}),[a]),k=m.EXECUTED===g||!l&&0===s&&y>=1||!l&&s>=1&&d>=p,O=(0,f.useCallback)((function(e){var n=e.columns,t=e.index,r=e.rows,o=e.shape;return r.length>=1&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Pr.Z,{columns:n,disableScrolling:!h,maxHeight:49.5*I.iI,index:t,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!0,rows:r,width:u-(2+I.cd*I.iI*2+2+kt.nn)}),o&&(0,C.jsx)(Sn.Z,{ml:1,my:1,children:(0,C.jsx)(j.ZP,{children:"".concat(o[0]," rows x ").concat(o[1]," columns")})})]})}),[h,u]),w=/\[__internal_output__\]/,Z=function(e){return Array.isArray(e)?e.join("\n"):e},P=(0,f.useMemo)((function(){return a.reduce((function(e,n){var t=e.at(-1);return Jt.includes(null===t||void 0===t?void 0:t.type)&&(null===t||void 0===t?void 0:t.type)===n.type&&!Z(null===n||void 0===n?void 0:n.data).match(w)?t.data+=Z(n.data):Jt.includes(null===n||void 0===n?void 0:n.type)&&!Z(null===n||void 0===n?void 0:n.data).match(w)?e.push(Rr(Rr({},n),{},{data:Z(n.data)})):e.push(Rr({},n)),e}),[])}),[a]),E=(0,f.useMemo)((function(){var e=!1,n=null===P||void 0===P?void 0:P.map((function(n,t){var r=n.data,i=n.type;if(r&&0!==(null===r||void 0===r?void 0:r.length)){var c=[],l=(c=(c=Array.isArray(r)?r:[r]).filter((function(e){return e}))).length,u=[];return c.forEach((function(n,r){var c,a={contained:o,first:0===t&&0===r,last:t===y-1&&r===l-1};if("string"===typeof n&&n.match(w)){var s=n.replace(w,"");if((0,ye.Pb)(s)){var d=JSON.parse(s),f=d.data,p=d.type;Xt.TABLE===p&&(c=O(f),e=!0)}}else i===Xt.TABLE?(c=O((0,ye.Pb)(n)?JSON.parse(n):n),e=!0):Jt.includes(i)?c=(0,C.jsx)(Ir,Rr(Rr({},a),{},{children:(0,C.jsx)(j.ZP,{monospace:!0,preWrap:!0,children:(0,C.jsx)(Zr(),{children:n})})})):i===Xt.IMAGE_PNG&&(c=(0,C.jsx)("div",{style:{backgroundColor:"white"},children:(0,C.jsx)("img",{alt:"Image ".concat(t," from code output"),src:"data:image/png;base64, ".concat(n)})}));u.push((0,C.jsx)("div",{children:c},"code-output-".concat(t,"-").concat(r)))})),u}}));return e?n[n.length-1]:n}),[P,o]);return(0,C.jsxs)(C.Fragment,{children:[o&&(0,C.jsx)(Er,{blockType:b,executedAndIdle:k,hasError:i,selected:h,children:!t&&E}),!o&&E,k&&!c&&(0,C.jsxs)(Sr,{blockType:b,hasError:i,selected:h,children:[(0,C.jsx)(_r,{}),(0,C.jsxs)(x.Z,{justifyContent:"space-between",children:[v&&(0,C.jsx)(Q.Z,{alignItems:"center",px:1,children:(0,C.jsx)(et.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return v(!t)},transparent:!0,children:t?(0,C.jsxs)(x.Z,{alignItems:"center",children:[(0,C.jsx)(_._M,{muted:!0,size:2*I.iI}),"\xa0",(0,C.jsx)(j.ZP,{default:!0,children:"Expand output"})]}):(0,C.jsx)(_.Kh,{muted:!0,size:2*I.iI})})}),(0,C.jsx)(Tr,{children:(0,C.jsx)(x.Z,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:(0,C.jsx)(mt,{appearAbove:!0,appearBefore:!0,block:!0,label:s>=1&&p?"Last run at ".concat(new Date(p.valueOf()).toLocaleString()):i?"Block executed with errors":"Block executed successfully",size:null,widthFitContent:!0,children:(0,C.jsxs)(x.Z,{alignItems:"center",children:[s>=1&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(j.ZP,{small:!0,children:[(Number(d)-Number(p))/1e3,"s"]}),(0,C.jsx)(Sn.Z,{mr:1})]}),!i&&(0,C.jsx)(_.Jr,{size:2*I.iI,success:!0}),i&&(0,C.jsx)(J,{danger:!0,size:2*I.iI,children:(0,C.jsx)(j.ZP,{bold:!0,monospace:!0,small:!0,children:"!"})})]})})})})]})]})]})},Fr="buckets",Lr="chart_style",Hr="group_by",Ur="legend_labels",zr="limit",Wr="metrics",Qr="width_percentage",Gr="x",Kr="y",Vr=[Gr,Kr];!function(e){e.BAR_CHART="bar chart",e.HISTOGRAM="histogram",e.LINE_CHART="line chart",e.PIE_CHART="pie chart",e.TABLE="table"}(Ar||(Ar={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(Br||(Br={})),function(e){e.AVERAGE="average",e.COUNT="count",e.COUNT_DISTINCT="count_distinct",e.MAX="max",e.MEDIAN="median",e.MIN="min",e.MODE="mode",e.SUM="sum"}(Nr||(Nr={}));var Xr,Yr=[Nr.AVERAGE,Nr.COUNT,Nr.COUNT_DISTINCT,Nr.MAX,Nr.MEDIAN,Nr.MIN,Nr.MODE,Nr.SUM];!function(e){e.ASCENDING="ascending",e.DESCENDING="descending"}(Xr||(Xr={}));var qr=[Ar.BAR_CHART,Ar.HISTOGRAM,Ar.LINE_CHART,Ar.PIE_CHART,Ar.TABLE];var Jr,$r,eo,no,to,ro,oo,io=y.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-knskck-0"})(["border-radius:","px;margin-top:","px;padding:","px;position:absolute;right:-","px;z-index:1;",""],O.BG,1.5*I.iI,I.iI,I.iI/2,(function(e){return"\n    background-color: ".concat((e.theme.interactive||k.Z.interactive).defaultBackground,";\n  ")}));!function(e){e.COLUMNS="columns",e.METRICS="metrics",e.NUMBER="number"}(oo||(oo={}));var co=(Jr={},(0,u.Z)(Jr,Ar.BAR_CHART,{noCode:[{label:function(){return"group by columns"},type:oo.COLUMNS,uuid:Hr},{label:function(){return"metrics"},type:oo.METRICS,uuid:Wr},{autoRun:!0,label:function(){return"chart style"},options:[Br.HORIZONTAL,Br.VERTICAL],uuid:Lr},{autoRun:!0,label:function(){return"sort direction"},options:[null,Xr.ASCENDING,Xr.DESCENDING],uuid:"y_sort_order"}],code:[{label:function(){return"variable name of x-axis values"},monospace:!0,uuid:Gr},{label:function(){return"variable name of y-axis values"},monospace:!0,uuid:Kr}]}),(0,u.Z)(Jr,Ar.HISTOGRAM,{noCode:[{label:function(){return"number column for chart"},settings:{maxValues:1},type:oo.COLUMNS,uuid:Hr},{autoRun:!0,label:function(){return"Number of buckets"},type:oo.NUMBER,uuid:Fr}],code:[{label:function(){return"variable name of values"},monospace:!0,uuid:Gr}]}),(0,u.Z)(Jr,Ar.LINE_CHART,{noCode:[{label:function(){return"group by columns"},settings:{maxValues:1},type:oo.COLUMNS,uuid:Hr},{label:function(){return"metrics"},type:oo.METRICS,uuid:Wr}],code:[{label:function(){return"variable name of x-axis values"},monospace:!0,uuid:Gr},{label:function(){return"variable name of y-axis values"},monospace:!0,uuid:Kr},{label:function(){return"labels of lines in chart (comma separated)"},uuid:Ur}]}),(0,u.Z)(Jr,Ar.PIE_CHART,{noCode:[{label:function(){return"column for chart"},settings:{maxValues:1},type:oo.COLUMNS,uuid:Hr},{autoRun:!0,label:function(){return"Number of slices"},type:oo.NUMBER,uuid:Fr}],code:[{label:function(){return"variable name of values"},monospace:!0,uuid:Gr}]}),(0,u.Z)(Jr,Ar.TABLE,{noCode:[{label:function(){return"columns"},type:oo.COLUMNS,uuid:Hr},{label:function(){return"max number of rows"},type:oo.NUMBER,uuid:zr}],code:[{label:function(){return"variable name of columns"},monospace:!0,uuid:Gr},{label:function(){return"variable name of rows"},monospace:!0,uuid:Kr}]}),Jr),lo=($r={},(0,u.Z)($r,Ar.BAR_CHART,{configuration:function(e){var n;return n={},(0,u.Z)(n,Gr,"x"),(0,u.Z)(n,Kr,"y"),(0,u.Z)(n,Lr,Br.VERTICAL),n},content:function(e){return"columns = df_1.columns\nx = df_1.columns[:7]\ny = [len(df_1[col].unique()) for col in x]\n"}}),(0,u.Z)($r,Ar.HISTOGRAM,{configuration:function(e){var n;return n={},(0,u.Z)(n,Fr,10),(0,u.Z)(n,Gr,"x"),n},content:function(e){return"columns = df_1.columns\ncol = list(filter(lambda x: df_1[x].dtype == float or df_1[x].dtype == int, columns))[0]\nx = df_1[col]\n"}}),(0,u.Z)($r,Ar.LINE_CHART,{configuration:function(e){var n;return n={},(0,u.Z)(n,Gr,"x"),(0,u.Z)(n,Kr,"y"),n},content:function(e){return"columns = df_1.columns\ncols = list(filter(lambda x: df_1[x].dtype == float or df_1[x].dtype == int, columns))\nx = df_1[cols[0]]\ny = [df_1[cols[1]]]\n"}}),(0,u.Z)($r,Ar.PIE_CHART,{configuration:function(e){var n;return n={},(0,u.Z)(n,Fr,7),(0,u.Z)(n,Gr,"x"),n},content:function(e){return"x = df_1[df_1.columns[0]]"}}),(0,u.Z)($r,Ar.TABLE,{configuration:function(e){var n;return n={},(0,u.Z)(n,zr,10),(0,u.Z)(n,Gr,"x"),(0,u.Z)(n,Kr,"y"),n},content:function(e){return"x = df_1.columns\ny = df_1.to_numpy()"}}),$r),uo=(ro={},(0,u.Z)(ro,Ar.BAR_CHART,(eo={},(0,u.Z)(eo,Gr,(function(){return"must be a list of booleans, dates, integers, floats, or strings."})),(0,u.Z)(eo,Kr,(function(){return"must be a list of lists containing integers or floats."})),eo)),(0,u.Z)(ro,Ar.HISTOGRAM,(0,u.Z)({},Gr,(function(){return"must be a list of integers or floats."}))),(0,u.Z)(ro,Ar.LINE_CHART,(no={},(0,u.Z)(no,Gr,(function(){return"must be a list of integers or floats."})),(0,u.Z)(no,Kr,(function(){return"must be a list of lists containing integers or floats. Each list is a single line in the chart."})),no)),(0,u.Z)(ro,Ar.PIE_CHART,(0,u.Z)({},Gr,(function(){return"must be a list of booleans, dates, integers, floats, or strings."}))),(0,u.Z)(ro,Ar.TABLE,(to={},(0,u.Z)(to,Gr,(function(){return"must be a list of strings."})),(0,u.Z)(to,Kr,(function(){return"must be a list of lists containing booleans, dates, integers, floats, or strings."})),to)),ro);function ao(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function so(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ao(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ao(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var fo=function(e){var n=e.addWidget,t=e.block,r=e.deleteBlock,o=e.executionState,c=e.interruptKernel,l=e.runBlock,u=t.all_upstream_blocks_executed,a=void 0===u||u,s=t.type,d=t.uuid,p=(0,f.useRef)(null),h=(0,f.useRef)(null),v=(0,f.useRef)(null),g=(0,f.useState)(!1),b=g[0],O=g[1],w=(0,f.useState)(!1),Z=w[0],P=w[1],E=(0,f.useState)(!1),S=E[0],D=E[1],R=(0,f.useContext)(y.ThemeContext),A=Vt.IDLE!==o,B=pe(s,{theme:R}).accent,N=(0,f.useMemo)((function(){return qr.map((function(e){var r={configuration:{chart_type:e},type:i.CHART,upstream_blocks:[t.uuid]},o=lo[e],c=(null===o||void 0===o?void 0:o.configuration(r))||{},u=(null===o||void 0===o?void 0:o.content(r))||null;return{label:function(){return(0,ye.vg)(e)},onClick:function(){return n(so(so({},r),{},{configuration:so(so({},r.configuration),c),content:u}),{onCreateCallback:function(e){[m.EXECUTED,m.UPDATED].includes(t.status)?l({block:e,code:u}):l({block:t,runDownstream:!0})}})},uuid:e}}))}),[qr,t,l]);return(0,C.jsx)(io,{children:(0,C.jsxs)(x.Z,{alignItems:"center",flexDirection:"column",children:[Vt.QUEUED===o&&(0,C.jsx)(Tn.Z,{color:(R||k.Z).content.active,type:"cylon"}),Vt.BUSY===o&&(0,C.jsx)(Tn.Z,{color:(R||k.Z).content.active}),!A&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(mt,{appearAbove:!0,appearBefore:!0,default:!0,label:(0,C.jsxs)(j.ZP,{children:["Run block \xa0 \xa0",(0,C.jsx)(T,{inline:!0,keyTextGroups:[[M.RJ,M.Lz]],monospace:!0,uuidForKey:d})]}),size:3*I.iI,widthFitContent:!0,children:(0,C.jsx)(et.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){a?l({block:t}):P(!0)},children:(0,C.jsx)(J,{color:B,size:3*I.iI,children:(0,C.jsx)(_.Py,{black:!0,size:1.5*I.iI})})})}),(0,C.jsx)(Kn.Z,{disableEscape:!0,onClickOutside:function(){return P(!1)},open:Z,children:(0,C.jsx)(z,{items:[{label:function(){return"Execute block"},onClick:function(){return l({block:t})},uuid:"execute_block"},{label:function(){return"Execute with upstream blocks"},onClick:function(){return l({block:t,runUpstream:!0})},uuid:"execute_upstream"}],left:25*-I.iI,onClickCallback:function(){return P(!1)},open:Z,parentRef:h,topOffset:2*-I.iI,uuid:"execute_actions",width:25*I.iI})})]}),[i.DATA_LOADER,i.TRANSFORMER].includes(t.type)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Sn.Z,{mt:I.cd,ref:p,children:(0,C.jsx)(mt,{appearBefore:!0,default:!0,label:"Add chart",size:2.25*I.iI,widthFitContent:!0,children:(0,C.jsx)(et.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return O(!0)},children:(0,C.jsx)(_.er,{size:2.25*I.iI})})})}),(0,C.jsx)(Kn.Z,{disableEscape:!0,onClickOutside:function(){return O(!1)},open:b,children:(0,C.jsx)(z,{items:N,left:25*-I.iI,onClickCallback:function(){return O(!1)},open:b,parentRef:p,topOffset:6*I.iI,uuid:"CommandButtons/add_charts",width:25*I.iI})})]}),(0,C.jsx)(Sn.Z,{mt:I.cd,children:(0,C.jsx)(mt,{appearBefore:!0,default:!0,label:(0,C.jsxs)(j.ZP,{children:["Delete block and file \xa0 \xa0",(0,C.jsx)(T,{inline:!0,monospace:!0,keyTextGroups:[[M.jW],[M.jW]],uuidForKey:d})]}),size:2.5*I.iI,widthFitContent:!0,children:(0,C.jsx)(et.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return r(t)},children:(0,C.jsx)(_.rF,{size:2.5*I.iI})})})}),A&&(0,C.jsx)(Sn.Z,{mt:I.cd,children:(0,C.jsx)(mt,{appearAbove:!0,appearBefore:!0,default:!0,label:(0,C.jsxs)(j.ZP,{children:["Interrupt kernel \xa0 \xa0",(0,C.jsx)(T,{inline:!0,monospace:!0,keyTextGroups:[[M.kA],[M.kA]],uuidForKey:d})]}),size:2.5*I.iI,widthFitContent:!0,children:(0,C.jsx)(et.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return c()},children:(0,C.jsx)(J,{borderSize:1.5,size:2.5*I.iI,children:(0,C.jsx)(_.x8,{size:1*I.iI})})})})}),(0,C.jsx)("div",{ref:v,children:(0,C.jsx)(Sn.Z,{mt:I.cd,children:(0,C.jsx)(mt,{appearBefore:!0,default:!0,label:(0,C.jsx)(j.ZP,{children:"More actions"}),size:2.5*I.iI,widthFitContent:!0,children:(0,C.jsx)(et.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return D(!S)},children:(0,C.jsx)(J,{borderSize:1.5,size:2.5*I.iI,children:(0,C.jsx)(_.mH,{size:I.iI})})})})})}),(0,C.jsx)(Kn.Z,{disableEscape:!0,onClickOutside:function(){return D(!1)},open:S,children:(0,C.jsx)(z,{items:[{label:function(){return"Execute with upstream blocks"},onClick:function(){return l({block:t,runUpstream:!0})},uuid:"execute_upstream"}],left:25*-I.iI,onClickCallback:function(){return D(!1)},open:S,parentRef:v,topOffset:6*I.iI,uuid:"FileHeaderMenu/file_items",width:25*I.iI})})]})})};function po(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ho(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?po(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):po(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function mo(e,n){var t,r=e.addNewBlock,o=e.addWidget,c=e.block,a=e.blockRefs,s=e.blocks,d=e.defaultValue,h=void 0===d?"":d,m=e.deleteBlock,v=e.executionState,k=e.fetchFileTree,O=e.fetchPipeline,w=e.height,Z=e.interruptKernel,P=e.mainContainerRef,E=e.mainContainerWidth,S=e.messages,T=void 0===S?[]:S,D=e.noDivider,R=e.onChange,A=e.pipeline,B=e.runBlock,N=e.runningBlocks,F=e.selected,H=e.setAnyInputFocused,U=e.setEditingBlock,z=e.setSelected,W=e.setTextareaFocused,G=e.textareaFocused,K=e.widgets,V=(0,f.useContext)(y.ThemeContext),X=(0,f.useState)(!1),Y=X[0],q=X[1],$=(0,f.useState)(!1),ee=$[0],ne=$[1],te=(0,f.useState)(!1),re=te[0],oe=te[1],ie=(0,f.useState)(h),ce=ie[0],le=ie[1],ue=(0,f.useState)(null),ae=ue[0],se=ue[1],fe=(0,f.useState)(!1),he=fe[0],je=fe[1],ke=(0,f.useState)(c.uuid),Ce=ke[0],we=ke[1],Ze=(0,f.useState)(!1),Pe=Ze[0],Ee=Ze[1],Ie=(0,f.useState)(0),Se=Ie[0],Te=Ie[1],_e=(0,f.useState)(null),De=_e[0],Re=_e[1],Ae=(0,f.useState)(null),Be=Ae[0],Ne=Ae[1],Me=(0,f.useMemo)((function(){return"".concat(null===A||void 0===A?void 0:A.uuid,"/").concat(c.uuid,"/codeCollapsed")}),[null===A||void 0===A?void 0:A.uuid,c.uuid]),Le=(0,f.useMemo)((function(){return"".concat(null===A||void 0===A?void 0:A.uuid,"/").concat(c.uuid,"/outputCollapsed")}),[null===A||void 0===A?void 0:A.uuid,c.uuid]);(0,f.useEffect)((function(){oe((0,de.U2)(Me,!1)),Ee((0,de.U2)(Le,!1))}),[]);var He=(0,f.useRef)(null),Ue=(0,f.useMemo)((function(){return(0,Oe.HK)(s,(function(e){return e.uuid}))}),[s]),ze=(0,f.useMemo)((function(){return!!K.find((function(e){return e.upstream_blocks.includes(c.uuid)}))}),[c,K]),We=(0,f.useCallback)((function(e){var n=e||{},t=n.block,r=n.code,o=n.runDownstream,i=n.runUpstream;B({block:t,code:r||ce,runDownstream:o||ze,runUpstream:i||!1}),Te(1+Number(Se)),Re(null)}),[ce,ze,Se,B,Te,Re]),Qe=(0,Fe.Z)(T);(0,f.useEffect)((function(){(null===Qe||void 0===Qe||!Qe.length)&&(null===T||void 0===T?void 0:T.length)>=1&&Ne(Number(new Date))}),[T,Qe,Ne]);var Ke=!!N.find((function(e){return e.uuid===c.uuid}))||(null===T||void 0===T?void 0:T.length)>=1&&v!==Vt.IDLE,Ve=(0,Fe.Z)(v);(0,f.useEffect)((function(){v===Vt.IDLE&&v!==Ve&&Re(Number(new Date))}),[v,Ve,Re]);var Xe=(0,f.useCallback)((function(e){var n=e.editorRect,t=(n.height,n.top),r=e.position.lineNumber;if(null!==P&&void 0!==P&&P.current){var o=P.current.getBoundingClientRect().height,i=21*r;if(t+i>o){var c=P.current.scrollTop+(i-o+t);P.current.scrollTo(0,c)}else if(i+t<21){var l=P.current.scrollTop+(i+t-21);P.current.scrollTo(0,l)}}}),[P]),Ye=(0,f.useMemo)((function(){return(null===ae||void 0===ae?void 0:ae.length)>=0?ae.map((function(e){return{data:e,execution_state:Vt.IDLE,type:Xt.TEXT_PLAIN}})):T.filter((function(e){return null===e||void 0===e?void 0:e.type}))}),[ae,T]),qe=!!Ye.find((function(e){return e.error})),Je=pe(c.type,{theme:V}).accent,$e=(null===c||void 0===c||null===(t=c.upstream_blocks)||void 0===t?void 0:t.length)||0,en=(0,f.useMemo)((function(){return{blockType:c.type,hasError:qe,selected:F}}),[c.type,qe,F]),nn=Ye.length>=1,tn=(0,f.useCallback)((function(){F||(H(!1),z(!0))}),[H,z]),rn=(0,p.Db)(Hn.ZP.blocks.pipelines.useUpdate(null===A||void 0===A?void 0:A.uuid,c.uuid),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(e){var n=e.block.content;je(!1),O(),k(),le(n)},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})},onError:function(e){var n=(0,Un.qQ)(e).messages;se(n)}}),on=(0,l.Z)(rn,1)[0],cn="CodeBlock/".concat(c.uuid),ln=(0,L.y)(),un=ln.registerOnKeyDown,an=ln.unregisterOnKeyDown;(0,f.useEffect)((function(){return function(){an(cn)}}),[an,cn]),un(cn,(function(e,n,t){he&&String(t[0])===String(M.Uq)&&String(t[1])!==String(M.zX)?on({block:ho(ho({},c),{},{name:Ce})}):F&&(zn([M.zX,M.Uq],n)||zn([M.PQ,M.Uq],n)?We({block:c}):zn([M.XR,M.Uq],n)&&(e.preventDefault(),r({type:c.type}).then((function(){We({block:c})}))))}),[r,c,he,Ce,We,F,on]);var sn,dn=(0,f.useMemo)((function(){return(0,C.jsx)(Ge,{autoHeight:!0,height:w,onChange:function(e){le(e),null===R||void 0===R||R(e)},onDidChangeCursorPosition:Xe,placeholder:"Start typing here...",selected:F,setSelected:z,setTextareaFocused:W,shortcuts:[function(e,n){return function(e,n){return{contextMenuGroupId:"navigation",contextMenuOrder:1.5,id:"executeCode",keybindingContext:null,keybindings:[e.KeyMod.CtrlCmd|e.KeyCode.Enter],label:"Run selected block",precondition:null,run:function(){return n()}}}(e,(function(){We({block:c,code:n.getValue()})}))}],textareaFocused:G,value:ce,width:"100%"})}),[ce,w,F,G]),fn=(0,f.useMemo)((function(){return nn&&(0,C.jsx)(Mr,ho(ho({},en),{},{block:c,collapsed:Pe,isInProgress:Ke,mainContainerWidth:E,messages:Ye,runCount:Se,runEndTime:De,runStartTime:Be,selected:F,setCollapsed:function(e){Ee((function(){return(0,de.t8)(Le,e),e}))}}))}),[c,en,nn,Ke,E,Ye,Pe,Se,De,Be,F]),pn=(0,f.useCallback)((function(){return ne(!1)}),[]);return(0,C.jsxs)("div",{ref:n,style:{position:"relative"},children:[(0,C.jsxs)(x.Z,{alignItems:"center",justifyContent:"space-between",style:{marginBottom:I.iI/2},children:[(0,C.jsxs)(Q.Z,{alignItems:"center",flex:1,children:[(0,C.jsxs)(x.Z,{alignItems:"center",children:[(0,C.jsx)(J,{color:Je,size:1.5*I.iI,square:!0}),(0,C.jsx)(Sn.Z,{mr:1}),(0,C.jsx)(lr,{compact:!0,items:(sn=c,(0,u.Z)({},i.SCRATCHPAD,[{items:b.map((function(e){return{label:function(){return g[e]},onClick:function(){return on({block:ho(ho({},sn),{},{type:e})})},uuid:"block_menu/scratchpad/convert_to/".concat(e)}})),label:function(){return"Convert to"},uuid:"block_menu/scratchpad/convert_to"}])[sn.type]),onClickCallback:pn,onClickOutside:pn,open:ee,parentRef:He,uuid:"CodeBlock/block_menu",children:(0,C.jsxs)(j.ZP,{color:Je,monospace:!0,children:[i.DATA_EXPORTER===c.type&&(0,C.jsx)(C.Fragment,{children:"DATA EXPORTER"}),i.DATA_LOADER===c.type&&(0,C.jsx)(C.Fragment,{children:"DATA LOADER\xa0"}),i.SCRATCHPAD===c.type&&(0,C.jsx)(C.Fragment,{children:"SCRATCHPAD\xa0"}),i.TRANSFORMER===c.type&&(0,C.jsx)(C.Fragment,{children:"TRANSFORMER\xa0"})]})}),i.SCRATCHPAD===c.type&&(0,C.jsx)(et.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return ne(!0)},transparent:!0,children:(0,C.jsx)(_.K5,{muted:!0})}),(0,C.jsx)(Sn.Z,{mr:1})]}),(0,C.jsx)(Sn.Z,{mr:I.cd}),(0,C.jsx)(_.iU,{size:1.5*I.iI}),(0,C.jsx)(Sn.Z,{mr:1}),(0,C.jsxs)(x.Z,{alignItems:"center",children:[(0,C.jsx)(jt,{bold:!1,inputValue:Ce,monospace:!0,muted:!0,notRequired:!0,onBlur:function(){return setTimeout((function(){return je(!1)}),300)},onChange:function(e){we(e.target.value),e.preventDefault()},onClick:function(){H(!0),je(!0)},onFocus:function(){H(!0),je(!0)},stacked:!0,value:!he&&c.uuid}),he&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Sn.Z,{ml:1}),(0,C.jsx)(_n.Z,{onClick:function(){return on({block:ho(ho({},c),{},{name:Ce})})},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Update name"})]})]})]}),i.SCRATCHPAD!==c.type&&(0,C.jsx)(x.Z,{alignItems:"center",children:(0,C.jsx)(mt,{appearBefore:!0,block:!0,label:"\n                ".concat((0,ye._6)("parent block",$e),". ").concat(0===$e?"Click to select 1 or more blocks to depend on.":"Edit parent blocks.","\n              "),size:null,widthFitContent:!0,children:(0,C.jsx)(et.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){var e;z(!0),U({upstreamBlocks:{block:c,values:null===(e=c.upstream_blocks)||void 0===e?void 0:e.map((function(e){return{uuid:e}}))}})},children:(0,C.jsxs)(x.Z,{alignItems:"center",children:[(0,C.jsxs)(j.ZP,{monospace:$e>=1,underline:0===$e,children:[0===$e&&"Click to set parent blocks",$e>=1&&(0,ye._6)("parent block",$e)]}),(0,C.jsx)(Sn.Z,{mr:1}),(0,C.jsx)(_.Kq,{size:2*I.iI})]})})})}),(0,C.jsx)(Sn.Z,{mr:1}),(0,C.jsx)(Sn.Z,{px:1,children:(0,C.jsx)(et.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){oe((function(e){return(0,de.t8)(Me,!e),!e})),re||Ee((function(){return(0,de.t8)(Le,!0),!0}))},transparent:!0,children:re?(0,C.jsx)(_._M,{muted:!0,size:2*I.iI}):(0,C.jsx)(_.Kh,{muted:!0,size:2*I.iI})})})]}),(F||Ke)&&(0,C.jsx)(fo,{addWidget:o,block:c,deleteBlock:m,executionState:v,interruptKernel:Z,runBlock:We}),(0,C.jsxs)(me,{onClick:function(){return tn()},children:[(0,C.jsxs)(ve,ho(ho({},en),{},{className:F&&G?"selected":null,hasOutput:nn,children:[c.upstream_blocks.length>=1&&!re&&(0,C.jsxs)(xe,{children:[(0,C.jsx)(j.ZP,{small:!0,children:"Positional arguments for decorated function:"}),(0,C.jsxs)(Sn.Z,{mt:1,children:[(0,C.jsxs)(j.ZP,{monospace:!0,muted:!0,small:!0,children:[i.DATA_EXPORTER===c.type&&"@data_exporter",i.DATA_LOADER===c.type&&"@data_loader",i.TRANSFORMER===c.type&&"@transformer"]}),(0,C.jsxs)(j.ZP,{monospace:!0,muted:!0,small:!0,children:["def ",(i.DATA_EXPORTER===c.type?"export_data":i.DATA_LOADER===c.type&&"load_data")||i.TRANSFORMER===c.type&&"transform_df","(",c.upstream_blocks.map((function(e,n){return"df_".concat(n+1)})).join(", "),"):"]}),c.upstream_blocks.map((function(e,n){var t=Ue[e],r=pe(null===t||void 0===t?void 0:t.type,{theme:V}).accent;return(0,C.jsxs)("div",{children:[(0,C.jsxs)(j.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:["\xa0\xa0\xa0\xa0df_",n+1]})," ",(0,C.jsx)(j.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"\u2192"})," ",(0,C.jsx)(_n.Z,{color:r,onClick:function(){var e,n,r=null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e["".concat(null===t||void 0===t?void 0:t.type,"s/").concat(null===t||void 0===t?void 0:t.uuid,".py")];null===r||void 0===r||null===(n=r.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,C.jsx)(j.ZP,{color:r,inline:!0,monospace:!0,small:!0,children:e})})]},e)}))]})]}),re?(0,C.jsx)(Sn.Z,{px:1,children:(0,C.jsxs)(j.ZP,{monospace:!0,muted:!0,children:["(",(0,ye._6)("line",null===ce||void 0===ce?void 0:ce.split(/\r\n|\r|\n/).length)," collapsed)"]})}):dn]})),fn]}),!D&&(0,C.jsxs)(ge,{onMouseEnter:function(){return q(!0)},onMouseLeave:function(){return q(!1)},children:[Y&&(0,C.jsx)(Cr,{addNewBlock:r,compact:!0}),(0,C.jsx)(be,{className:"block-divider-inner"})]})]})}var vo=f.forwardRef(mo);function go(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function bo(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?go(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):go(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var xo=function(e){var n=e.addNewBlockAtIndex,t=e.addWidget,r=e.blockRefs,o=e.blocks,c=void 0===o?[]:o,l=e.deleteBlock,a=e.fetchFileTree,s=e.fetchPipeline,d=e.interruptKernel,p=(e.isPipelineUpdating,e.kernel,e.mainContainerRef),h=e.mainContainerWidth,m=e.messages,v=e.onChangeCodeBlock,g=e.pipeline,b=e.pipelineContentTouched,x=(e.pipelineLastSaved,e.restartKernel),y=e.runBlock,j=e.runningBlocks,k=void 0===j?[]:j,O=e.savePipelineContent,w=e.selectedBlock,Z=e.setEditingBlock,P=(e.setMessages,e.setPipelineContentTouched),E=(e.setRunningBlocks,e.setSelectedBlock),S=e.setTextareaFocused,T=e.textareaFocused,_=e.widgets,D=(0,f.useState)(!1),R=D[0],A=D[1],B=(0,f.useState)(!1),N=B[0],F=B[1],H=(0,f.useState)(!0),U=H[0],z=H[1],W=(0,f.useMemo)((function(){return k.reduce((function(e,n,t){return bo(bo({},e),{},(0,u.Z)({},n.uuid,bo(bo({},n),{},{priority:t})))}),{})}),[k]),Q=(0,Fe.Z)(w),G=(0,f.useMemo)((function(){return c.length}),[c]),K="PipelineDetail/index",V=(0,L.y)(),X=V.registerOnKeyDown,Y=V.unregisterOnKeyDown;return(0,f.useEffect)((function(){return function(){Y(K)}}),[Y,K]),X(K,(function(e,t,r){if(b&&zn([M.zX,M.hS],t)){e.preventDefault();"undefined"!==typeof location&&window.confirm("You have changes that are unsaved. Click cancel and save your changes before reloading page.")&&location.reload()}else if(zn([M.zX,M.Um],t))e.preventDefault(),O();else if(T)t[M.vP]?S(!1):b||M.Z1.find((function(e){return t[e]}))||P(!0);else{if(w){var o=c.findIndex((function(e){var n=e.uuid;return w.uuid===n}));t[M.vP]?E(null):r[0]===M.xD&&r[1]===M.xD?d():r[0]===M.l1&&r[1]===M.l1&&-1!==o?(l(w),setTimeout((function(){o===c.length-1?E(c[o-1]):c.length>=0?E(c[o+1]):E(null)}),100)):t[M.Bu]&&o>=1?E(c[o-1]):t[M.kD]&&o<=G-2?E(c[o+1]):zn([M.Uq],t)?S(!0):!R&&zn([M.zH],t)?n({type:i.SCRATCHPAD},o,E):!R&&zn([M.Fv],t)&&n({type:i.SCRATCHPAD},o+1,E)}else Q&&t[M.Uq]&&E(Q);r[0]===M.OC&&r[1]===M.OC&&x()}}),[n,R,c,d,G,b,x,O,w,Q,P,E,S,T]),(0,f.useEffect)((function(){var e=setInterval((function(){b&&O()}),5e3);return function(){clearInterval(e)}}),[b,O]),(0,f.useEffect)((function(){setTimeout((function(){return F(!0)}),600)}),[g]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(zt,{children:U&&(0,C.jsx)($t.Z,{classNames:"pipeline-detail",in:N,onEntered:function(){return setTimeout((function(){return z(!1)}),Ut)},timeout:1,children:(0,C.jsx)(Wt,{})})}),(0,C.jsxs)(Sn.Z,{mt:1,px:I.cd,children:[c.map((function(e,o){var i=e.type,u=e.uuid,b=(null===w||void 0===w?void 0:w.uuid)===u,x=W[u],j=x?0===x.priority?Vt.BUSY:Vt.QUEUED:Vt.IDLE,O="".concat(i,"s/").concat(u,".py");return r.current[O]=(0,f.createRef)(),(0,C.jsx)(vo,{addNewBlock:function(e){return S(!0),n(e,o+1,E)},addWidget:t,block:e,blockRefs:r,blocks:c,defaultValue:e.content,deleteBlock:function(e){l(e),A(!1)},executionState:j,fetchFileTree:a,fetchPipeline:s,interruptKernel:d,mainContainerRef:p,mainContainerWidth:h,messages:m[u],noDivider:o===G-1,onChange:function(e){return v(u,e)},pipeline:g,ref:r.current[O],runBlock:y,runningBlocks:k,selected:b,setAnyInputFocused:A,setEditingBlock:Z,setSelected:function(n){return E(!0===n?e:null)},setTextareaFocused:S,textareaFocused:b&&T,widgets:_},u)})),(0,C.jsx)(Sn.Z,{mt:I.cd,children:(0,C.jsx)(Cr,{addNewBlock:function(e){n(e,G,E),S(!0)}})})]})]})},yo=t(70001),jo=t(47256),ko=t(11754);var Oo=function(e){var n=e.afterWidth,t=e.features,r=e.insightsOverview,o=e.statistics,i=r.correlations,c=void 0===i?[]:i,u=n-(2*I.cd*I.iI+kt.nn),a=function(e){var n=[];return{heatmapData:null===e||void 0===e?void 0:e.map((function(e,t){var r=e.correlations,o=e.feature.uuid;n.push({label:o});var i=r[0].y.map((function(e){var n=e.value;return(0,ye.QV)(n)}));return i.splice(t,0,1),i})),xyLabels:n}}(c),s=a.heatmapData,d=a.xyLabels,f=function(e,n){return(0,Oe.YC)(null===e||void 0===e?void 0:e.map((function(e){return{feature:e,value:1-n["".concat(e.uuid,"/null_value_rate")]}})),"value")}(t,o),p=function(e,n){return(0,Oe.YC)(null===e||void 0===e?void 0:e.map((function(e){return{feature:e,value:n["".concat(e.uuid,"/count_distinct")]}})),"value")}(t,o),h=function(e,n){return(0,Oe.YC)(null===e||void 0===e?void 0:e.map((function(e){var t=Object.entries(n["".concat(e.uuid,"/value_counts")]||{})[0]||[],r=(0,l.Z)(t,2),o=r[0],i=r[1];return{feature:e,percentage:Number(i)/n.count,value:o}})),"percentage")}(t,o);return(0,C.jsxs)(x.Z,{flexDirection:"column",children:[(null===f||void 0===f?void 0:f.length)>=1&&(0,C.jsx)(ko.Z,{headerTitle:"Data completion",width:u,children:(0,C.jsx)(yo.Z,{data:f.map((function(e){var n=e.feature;return{x:e.value,y:n.uuid}})),height:Math.max(3*f.length*I.iI,50*I.iI),renderTooltipContent:function(e){var n=e.x;return"".concat((0,ye.T3)(n)," of rows have a value")},xNumTicks:2,ySerialize:function(e){return e.y}})}),(null===p||void 0===p?void 0:p.length)>=1&&(0,C.jsx)(ko.Z,{headerTitle:"Number of unique values",width:u,children:(0,C.jsx)(yo.Z,{data:p.map((function(e){var n=e.feature;return{x:e.value,y:n.uuid}})),height:Math.max(3*f.length*I.iI,50*I.iI),renderTooltipContent:function(e){var n=e.x;return"".concat(n," unique values")},xNumTicks:2,ySerialize:function(e){return e.y}})}),h.length>=1&&(0,C.jsx)(ko.Z,{headerTitle:"Distribution of values",width:u,children:(0,C.jsx)(yo.Z,{data:h.map((function(e){var n=e.feature,t=e.percentage;return{feature:n,value:e.value,x:t,y:n.uuid}})),height:Math.max(3*h.length*I.iI,50*I.iI),renderTooltipContent:function(e){var n=e.value,t=e.x;return"".concat(n," is ").concat((0,ye.T3)(t)," of all rows")},xNumTicks:2,ySerialize:function(e){return e.y}})}),c&&(null===s||void 0===s?void 0:s.length)>=1&&(0,C.jsx)(ko.Z,{headerTitle:"Correlations",children:(0,C.jsx)(Sn.Z,{p:1,children:(0,C.jsx)(jo.Z,{countMidpoint:0,data:s,height:8*I.iI*d.length,minCount:-1,xLabels:d,yLabels:d})})})]})},Co=t(26226),wo=t(84969),Zo=t(90948),Po=t(65743),Eo=t(39048),Io=t(79487),So=t(29989),To=t(59381),_o=t(9846),Do=t(65376),Ro=t(48072),Ao=t(24903),Bo=t(98677),No=t(84181),Mo=t(73899),Fo=["height","width"];function Lo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ho(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Lo(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Lo(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Uo(e,n){return Math.max.apply(Math,(0,er.Z)(e.map(n)))}var zo={bottom:5*I.iI,left:3*I.iI,right:20*I.iI,top:0},Wo=(0,To.Z)((function(e){var n=e.data,t=e.height,r=e.hideTooltip,o=e.keyForYData,i=void 0===o?"__y":o,c=e.large,u=e.margin,a=void 0===u?{}:u,s=e.renderTooltipContent,d=e.showTooltip,p=e.tooltipData,h=e.tooltipLeft,m=e.tooltipOpen,v=e.tooltipTop,g=e.width,b=e.xAxisLabel,x=e.xNumTicks,O=e.yLabelFormat,w=(0,f.useCallback)((function(e){return e[i]}),[i]),Z=O;Z||(Z=function(e){return e.length>20?"".concat(e.substring(0,20),"..."):e});var P=c?Ue.iD:Ue.J5,E=(0,f.useContext)(y.ThemeContext),I=Ho(Ho({},zo),a),S=n.slice(Math.max(0,n.length-50)),T=(0,f.useMemo)((function(){return Object.keys((null===S||void 0===S?void 0:S[0])||{}).filter((function(e){return e!==i}))}),[S]),_=(0,Ao.Z)({domain:T,range:[Mo.a$,Mo.Ej,Mo.hM,Mo.ZA,Mo.$R,Mo.X_,Mo.er,Mo.hl,Mo.nQ]}),D=(0,Bo.Z)({domain:S.map(w),padding:.35}),R=(0,Bo.Z)({domain:T,padding:.1}),A=(0,No.Z)({domain:[0,Uo(S,(function(e){return Uo(T,(function(n){return Number(e[n])}))}))]}),B={active:(null===E||void 0===E?void 0:E.content.default)||k.Z.content.default,backgroundPrimary:(null===E||void 0===E?void 0:E.chart.backgroundPrimary)||k.Z.chart.backgroundPrimary,backgroundSecondary:(null===E||void 0===E?void 0:E.chart.backgroundSecondary)||k.Z.chart.backgroundSecondary,muted:(null===E||void 0===E?void 0:E.content.muted)||k.Z.content.muted,primary:(null===E||void 0===E?void 0:E.chart.primary)||k.Z.chart.primary,tooltipBackground:(null===E||void 0===E?void 0:E.background.navigation)||k.Z.background.navigation},N=S.map(w),M=Math.min(Math.max.apply(Math,(0,er.Z)(N.map((function(e){return String(e).length})))),20);6*M>2*I.right?I.right+=5.5*M:6*M>=I.right&&(I.right+=3.75*M);var F=g-I.left-I.right,L=t-I.top-I.bottom;I.left+=7*M,D.rangeRound([L,0]),A.rangeRound([0,F]),R.rangeRound([0,D.bandwidth()]);var H=S.map((function(e){return e.x})).length,U=D(N[H-1]),z=(0,f.useCallback)((function(e){var n=(0,Ro.Z)(e)||{x:0,y:0},t=n.x,r=n.y,o=1-(r-U/2)/(L-U),i=Math.floor(o*H),c=S[i];"undefined"===typeof c&&(c=S[i-1]),r>U&&r<L-U&&d({tooltipData:c,tooltipLeft:t,tooltipTop:r+I.top})}),[S,H,I.top,d,U,L]);return g<10?null:(0,C.jsxs)("div",{children:[(0,C.jsxs)("svg",{height:t,width:g,children:[(0,C.jsx)(Po.Z,{fill:"transparent",height:t-(I.top+I.bottom),onMouseLeave:function(){return r()},onMouseMove:z,onTouchMove:z,onTouchStart:z,rx:14,width:g-I.left,x:I.left,y:0}),(0,C.jsxs)(So.Z,{left:I.left,top:I.top,children:[(0,C.jsx)(Eo.Z,{color:_,data:S,keys:T,width:F,xScale:A,y0:w,y0Scale:D,y1Scale:R,children:function(e){return e.map((function(e){return(0,C.jsx)(So.Z,{top:e.y0,children:e.bars.map((function(n){return(0,C.jsx)("g",{children:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("rect",{fill:n.color,height:n.height,pointerEvents:"none",rx:4,width:n.width,x:n.x,y:n.y})})},"".concat(e.index,"-").concat(n.index,"-").concat(n.key))}))},"bar-group-horizontal-".concat(e.index,"-").concat(e.y0))}))}}),(0,C.jsx)(wo.Z,{hideTicks:!0,scale:D,stroke:B.muted,tickFormat:function(e){return Z(e)},tickLabelProps:function(){return{fill:B.active,fontFamily:He.ry,fontSize:P,style:{width:"10px"},textAnchor:"end"}},tickStroke:B.muted,tickValues:N,top:2}),(0,C.jsx)(Zo.Z,{label:b,labelProps:{fill:B.muted,fontFamily:He.ry,fontSize:P,textAnchor:"middle"},numTicks:x,scale:A,stroke:B.muted,tickLabelProps:function(){return{fill:B.active,fontFamily:He.ry,fontSize:P,textAnchor:"middle"}},tickStroke:B.muted,top:L})]}),p&&(0,C.jsx)("g",{children:(0,C.jsx)(Io.Z,{from:{x:I.left,y:v},pointerEvents:"none",stroke:Mo.Ej,strokeDasharray:"5,2",strokeWidth:1,to:{x:F+I.left,y:v}})})]}),m&&p&&(0,C.jsxs)(_o.Z,{left:h,style:Ho(Ho({},Do.j),{},{backgroundColor:B.tooltipBackground}),top:v,children:[s&&s(p),!s&&Object.entries(p).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return i!==t&&(0,C.jsxs)(j.ZP,{inverted:!0,small:!0,children:[t,": ",r.toFixed(4)]},t)}))]})]})}));var Qo=function(e){var n=e.height,t=e.width,r=(0,W.Z)(e,Fo);return(0,C.jsx)("div",{style:{height:n,width:"undefined"===typeof t?"100%":t},children:(0,C.jsx)(Co.Z,{children:function(e){var n=e.width,t=e.height;return(0,C.jsx)(Wo,Ho(Ho({},r),{},{height:t,width:n}))}})})},Go=t(66872),Ko=t(68735),Vo=t(320),Xo=40*I.iI,Yo=y.default.div.withConfig({displayName:"indexstyle__ChartBlockStyle",componentId:"sc-1c3ufnj-0"})(["border-radius:","px;margin-left:","px;margin-right:","px;margin-top:","px;overflow:hidden;",""],O.n_,.5*I.iI,.5*I.iI,1*I.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).chartBlock,";\n  ")})),qo=y.default.div.withConfig({displayName:"indexstyle__ConfigurationOptionsStyle",componentId:"sc-1c3ufnj-1"})(["flex:4;padding-left:","px;padding-right:","px;"],1*I.iI,1*I.iI),Jo=y.default.div.withConfig({displayName:"indexstyle__CodeStyle",componentId:"sc-1c3ufnj-2"})(["padding-top:","px;",""],I.iI/2,(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).codeTextarea,";\n  ")})),$o=y.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-1c3ufnj-3"})(["margin-bottom:","px;padding-bottom:","px;padding-left:","px;",""],I.cd*I.iI,I.iI,I.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||k.Z.borders).medium,";\n  ")}));function ei(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ni(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ei(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ei(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ti=function(e){var n,t=e.block,r=e.data,o=e.width,i=t.configuration,c=void 0===i?{}:i,a=c||{},s=a.chart_style,d=a.chart_type,f=a.y_sort_order,p=(null===c||void 0===c||null===(n=c.metrics)||void 0===n?void 0:n.map((function(e){return"".concat((n=e).aggregation,"(").concat(n.column,")");var n})))||[];if(Ar.BAR_CHART===d){var h=r.x,m=r.y;if(h&&m&&Array.isArray(h)&&Array.isArray(m)){p.length||p.push(Kr);var v=p[0];if(Br.HORIZONTAL===s){var g=h.map((function(e,n){return ni({__y:e},p.reduce((function(e,t,r){var o,i=null===m||void 0===m||null===(o=m[r])||void 0===o?void 0:o[n];return"undefined"===typeof i?e:ni(ni({},e),{},(0,u.Z)({},t,i))}),{}))}));return Xr.ASCENDING===f?g=(0,Oe.YC)(g,(function(e){return e[v]}),{ascending:!1}):Xr.DESCENDING===f&&(g=(0,Oe.YC)(g,(function(e){return e[v]}),{ascending:!0})),(0,C.jsx)(Qo,{data:g,height:Xo,margin:{bottom:3*I.iI,left:1*I.iI,right:3*I.iI,top:0},width:o,xNumTicks:3})}return(0,C.jsx)(Go.Z,{data:h.map((function(e,n){return[e,m[0][n]]})),height:Xo,width:o,large:!0,margin:{left:5*I.iI,right:1*I.iI},renderTooltipContent:function(e){var n=(0,l.Z)(e,2)[1];return(0,C.jsx)(j.ZP,{inverted:!0,monospace:!0,small:!0,children:null===n||void 0===n?void 0:n.toFixed(4)})},showAxisLabels:!0,showYAxisLabels:!0,showZeroes:!0,sortData:function(e){return Xr.ASCENDING===f?(0,Oe.YC)(e,"[1]",{ascending:!0}):Xr.DESCENDING===f?(0,Oe.YC)(e,"[1]",{ascending:!1}):e}})}}else if(Ar.HISTOGRAM===d){var b=r.x,x=r.y;if(b&&x&&Array.isArray(b))return(0,C.jsx)(Go.Z,{data:b.map((function(e,n){var t,r=e.max,o=e.min;return[r,null===x||void 0===x||null===(t=x[n])||void 0===t?void 0:t.value,o]})),height:Xo,width:o,large:!0,margin:{left:5*I.iI,right:1*I.iI,top:3*I.iI},noPadding:!0,renderTooltipContent:function(e){var n=(0,l.Z)(e,3),t=n[0],r=n[1],o=n[2];return(0,C.jsxs)(j.ZP,{inverted:!0,monospace:!0,small:!0,children:["Count : ",r,(0,C.jsx)("br",{}),"Bucket: ",o,"-",t]})},showAxisLabels:!0,showYAxisLabels:!0,showZeroes:!0,sortData:function(e){return(0,Oe.YC)(e,"[0]")}})}else if(Ar.LINE_CHART===d){var y=r.x,k=r.y;if(y&&k&&Array.isArray(y)&&Array.isArray(k)&&Array.isArray(null===k||void 0===k?void 0:k[0])){var O=p;c.legend_labels&&(O=c.legend_labels.split(",").map((function(e){return e.trim()})));var w=y.map((function(e,n){return{x:e,y:(0,Oe.w6)(k.length).map((function(e,t){return k[t][n]}))}}));return(0,C.jsx)(Ko.Z,{data:w,height:Xo,lineLegendNames:O,margin:{bottom:8*I.iI,left:5*I.iI},noCurve:!0,renderXTooltipContent:function(e){e.index;var n=e.x,t=c.x;return c.group_by&&(t=c.group_by.map(String).join(", ")),(0,C.jsxs)(j.ZP,{inverted:!0,small:!0,children:[t,": ",n]})},renderYTooltipContent:function(e,n){var t=e.y;return(0,C.jsxs)(j.ZP,{inverted:!0,small:!0,children:[O&&O[n]&&"".concat(O[n],": "),t&&(0,ye.x6)((0,ye.QV)(t[n],4))]})},xAxisLabel:String(c.x),xLabelFormat:function(e){return e},yAxisLabel:String(c.y),yLabelFormat:function(e){return e},width:o?o-3*I.iI:o})}}else if(Ar.PIE_CHART===d){var Z=r[String(c.x)];if(Z)return(0,C.jsx)(Vo.Z,{data:Object.entries(Z),getX:function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return"".concat(t," (").concat((0,ye.x6)(r),")")},getY:function(e){return(0,l.Z)(e,2)[1]},height:Xo,width:o})}else if(Ar.TABLE===d){var P=r.x,E=r.y;return Array.isArray(P)&&Array.isArray(E)&&Array.isArray(E[0])&&(0,C.jsx)(Pr.Z,{columns:P,height:Xo,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!0,rows:E,width:o?o-kt.nn:o})}return(0,C.jsx)("div",{})},ri=y.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," ",""],(function(e){return"\n    background-color: ".concat((e.theme.background||k.Z.background).popup,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((I.iI+Ue.Al)/2,"px;\n    height: ").concat(1.5*I.iI+Ue.Al,"px;\n    padding: ").concat(I.iI/1.5,"px ").concat(1.25*I.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((I.iI/2+Ue.Al)/2,"px;\n    height: ").concat(Ue.Al+I.iI/2,"px;\n    padding: ").concat(I.iI/4,"px ").concat(I.iI,"px;\n  ")})),oi=function(e){var n=e.children,t=e.label,r=e.onClick,o=e.small;return(0,C.jsx)(ri,{small:o,children:(0,C.jsx)(et.Z,{basic:!0,noPadding:!0,noBackground:!0,onClick:r,transparent:!0,children:(0,C.jsxs)(x.Z,{alignItems:"center",children:[n,t&&(0,C.jsx)(j.ZP,{small:o,children:t}),(0,C.jsx)(Sn.Z,{mr:1}),(0,C.jsx)(_.x8,{muted:!0,size:o?I.iI:1.25*I.iI})]})})})},ii=t(33591),ci=["children","fullHeight","gutter","style"];function li(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ui(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?li(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):li(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ai=function(e){var n=e.children,t=e.fullHeight,r=e.gutter,o=e.style,i=void 0===o?{}:o,c=(0,W.Z)(e,ci),l=ui({},i);return r&&(l.paddingLeft=r,l.paddingRight=l.paddingLeft),t&&(l.height="100%"),(0,C.jsx)(ii.Col,ui(ui({},c),{},{style:l,children:n}))};var si=function(e){var n=e.children,t=e.onChange,r=(0,f.useState)(f.Children.map(n,(function(){return null}))),o=r[0],i=r[1],c=(0,f.useState)(0),l=c[0],u=c[1];return(0,C.jsx)(x.Z,{children:f.Children.map(n,(function(e,n){return(0,C.jsx)(Sn.Z,{ml:n>=1?1:0,style:{display:"flex",flex:1},children:f.cloneElement(e,{onChange:function(e){i((function(r){return r[n]=e.target.value,t(r,{resetValues:function(){return u((function(e){return e+1}))},setValues:i}),r}))},value:o[n]})},"multi-select-child-".concat(n,"-").concat(l))}))})},di=t(55378),fi=t(7715);function pi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function hi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?pi(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var mi=function(e){var n,t,r,o=e.block,c=e.blockRefs,a=e.blocks,s=e.deleteWidget,d=e.executionState,p=e.messages,h=void 0===p?[]:p,v=e.onChangeContent,g=e.runBlock,b=e.runningBlocks,O=e.savePipelineContent,w=e.selected,Z=e.setSelectedBlock,P=e.setTextareaFocused,E=e.textareaFocused,S=e.updateWidget,T=e.width,D=(0,f.useRef)(null),R=(0,f.useContext)(y.ThemeContext),A=o.outputs,B=void 0===A?[]:A,N=(0,f.useState)(null===(n=o.configuration)||void 0===n?void 0:n.chart_type),M=N[0],F=N[1],L=(0,f.useState)(o.configuration),H=L[0],U=L[1],z=(0,f.useState)(o.content),W=z[0],G=z[1],K=(0,f.useState)(!M||0===B.length),V=K[0],X=K[1],Y=(0,f.useState)(null),q=Y[0],J=Y[1],$=(0,f.useState)(null===o||void 0===o?void 0:o.upstream_blocks),ee=$[0],ne=$[1],te=(0,f.useState)((null===B||void 0===B?void 0:B.length)||0),re=te[0],oe=te[1],ie=co[M],ce=lo[M],le=(0,f.useMemo)((function(){return null===a||void 0===a?void 0:a.filter((function(e){var n=e.type;return[i.DATA_LOADER,i.TRANSFORMER].includes(n)}))}),[a]),ue=(0,f.useMemo)((function(){return(0,Oe.HK)(le,(function(e){return e.uuid}))}),[le]),ae=!!b.find((function(e){return e.uuid===o.uuid}))||(null===h||void 0===h?void 0:h.length)>=1&&d!==Vt.IDLE,se=(0,f.useMemo)((function(){return null===h||void 0===h?void 0:h.filter((function(e){return null===e||void 0===e?void 0:e.type}))}),[h]),de=!!se.find((function(e){return e.error})),fe=se.length>=1,he=(pe(o.type,{theme:R}).accent,(0,f.useMemo)((function(){return{blockType:o.type,hasError:de,selected:w}}),[o.type,de,w]));if(null!==se&&void 0!==se&&se.length){var me,ve,ge=se.length-1;r=null===se||void 0===se||null===(me=se[ge])||void 0===me||null===(ve=me.data)||void 0===ve?void 0:ve[0]}r?(r=(r=r.slice(1,r.length-1)).replaceAll('\\"','"').replaceAll("\\'","'"),(0,ye.Pb)(r)&&(t=JSON.parse(r))):(null===B||void 0===B?void 0:B.length)>=1&&(t={},B.forEach((function(e){var n=e||{},r=n.text_data,o=n.type,i=n.variable_uuid;Xt.TEXT===o&&(0,ye.Pb)(r)&&(t[i]=JSON.parse(r))})));var be=(0,f.useCallback)((function(e){var n=hi(hi(hi({},o),e),{},{configuration:hi(hi({},o.configuration),e.configuration)});O().then((function(){g({block:n,code:W,ignoreAlreadyRunning:!0,runUpstream:!!ee.find((function(e){var n;return![m.EXECUTED,m.UPDATED].includes(null===(n=ue[e])||void 0===n?void 0:n.status)}))})})),oe((function(e){return e+1}))}),[o,ue,W,oe,ee]),xe=(0,f.useCallback)((function(e){G(e),v(e)}),[v,G]),je=(0,f.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.autoRun;U((function(n){return hi(hi({},n),e)}));var r=hi(hi({},o),{},{configuration:hi(hi(hi({},H),e),{},{chart_type:M})});S(r);Object.keys(e);re&&t&&be(r)}),[o,M,H,re,be,U,S]),ke=(0,f.useMemo)((function(){return(0,C.jsx)(Ge,{autoHeight:!0,onChange:xe,selected:w,setSelected:function(e){return Z(!0===e?o:null)},setTextareaFocused:P,showLineNumbers:!1,textareaFocused:E,value:W,width:"100%"})}),[W,w,Z,P,E,xe]),Ce=(0,f.useMemo)((function(){return de&&fe&&(0,C.jsx)(Mr,hi(hi({},he),{},{block:o,contained:!1,hideExtraInfo:!0,isInProgress:ae,messages:se,selected:w}))}),[o,he,de,fe,ae,se,w]),we=(0,Fe.Z)(V),Ze=(0,Fe.Z)(T);(0,f.useEffect)((function(){var e,n=null===D||void 0===D||null===(e=D.current)||void 0===e?void 0:e.getBoundingClientRect();we!==V||Ze!==T?J(0):n&&J(n.width)}),[V,we,D.current,J,T,Ze]);var Pe=(0,f.useMemo)((function(){var e=[];return ee.forEach((function(n,t){var r=ue[n],o=pe(null===r||void 0===r?void 0:r.type,{theme:R}).accent;e.push((0,C.jsxs)(Sn.Z,{ml:2,children:[(0,C.jsxs)(j.ZP,{bold:!0,inline:!0,monospace:!0,small:!0,children:["df_",t+1]})," ",(0,C.jsx)(j.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"->"})," ",(0,C.jsx)(_n.Z,{color:o,inline:!0,onClick:function(){var e,n,t=null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e["".concat(null===r||void 0===r?void 0:r.type,"s/").concat(null===r||void 0===r?void 0:r.uuid,".py")];null===t||void 0===t||null===(n=t.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,C.jsx)(j.ZP,{color:o,monospace:!0,small:!0,children:n})})]},n))})),e}),[ue,ee]),Ee=(0,f.useMemo)((function(){var e,n=[],t=null===ie||void 0===ie||null===(e=ie.code)||void 0===e?void 0:e.reduce((function(e,n){var t=n.uuid;return Vr.includes(t)?e.concat(t):e}),[]);null===t||void 0===t||t.length;return null===t||void 0===t||t.forEach((function(e,t){var r=H[e];if(r){var o,i,c=null===(o=uo[M])||void 0===o||null===(i=o[e])||void 0===i?void 0:i.call(o);n.push((0,C.jsxs)(Sn.Z,{ml:2,children:[(0,C.jsx)(j.ZP,{bold:!0,inline:!0,monospace:!0,small:!0,children:r})," ",c&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"->"})," ",(0,C.jsx)(j.ZP,{default:!0,inline:!0,small:!0,children:c})]})]},r))}})),n}),[H,ie]),Ie=(0,Fe.Z)(M),Se=(0,Fe.Z)(ee);(0,f.useEffect)((function(){if((!Ie&&M&&null!==ee&&void 0!==ee&&ee.length||(null===Se||void 0===Se||!Se.length)&&(null===ee||void 0===ee?void 0:ee.length)>=1&&M)&&!W&&(0,fi.Qr)(H)&&ce){var e=hi(hi({},o),{},{upstream_blocks:ee});je(ce.configuration(e)),xe(ce.content(e))}}),[o,M,Ie,H,W,je,xe,ee,Se]);var Te=(0,f.useMemo)((function(){return H.width_percentage||1}),[H]),_e=(0,f.useMemo)((function(){return Object.entries(ie||{}).reduce((function(e,n){var t=(0,l.Z)(n,2),r=t[0],i=t[1];return hi(hi({},e),{},(0,u.Z)({},r,i.map((function(e){var n,t=e.autoRun,r=e.label,i=e.monospace,c=e.options,l=e.settings,a=void 0===l?{}:l,s=e.type,d=e.uuid,f={fullWidth:!0,key:d,label:(0,ye.kC)(r()),monospace:i,onBlur:function(){return Z(o)},onChange:function(e){return je((0,u.Z)({},d,e.target.value),{autoRun:t})},onFocus:function(){return Z(o)},value:null===H||void 0===H?void 0:H[d]},p=ee.map((function(e){return ue[e]})).reduce((function(e,n){var t,r,o=n.outputs;return e.concat(null===o||void 0===o||null===(t=o[0])||void 0===t||null===(r=t.sample_data)||void 0===r?void 0:r.columns)}),[]);if(oo.COLUMNS===s){var h=H[d]||[];n=(0,C.jsxs)(C.Fragment,{children:[(!a.maxValues||h.length<a.maxValues)&&(0,C.jsxs)(di.Z,hi(hi({},f),{},{onChange:function(e){var n=H[d]||[],r=e.target.value;n.includes(r)?n=(0,Oe.Od)(n,(function(e){return e===r})):n.push(r),je((0,u.Z)({},d,n),{autoRun:t})},value:null,children:[(0,C.jsx)("option",{value:""}),(0,Oe.YC)(p.filter((function(e){return!h.includes(e)})),(function(e){return e})).map((function(e){return(0,C.jsx)("option",{value:e,children:e},e)}))]})),h.map((function(e){return(0,C.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:2},children:(0,C.jsx)(oi,{label:e,onClick:function(){je((0,u.Z)({},d,(0,Oe.Od)(h,(function(n){return n===e}))),{autoRun:t})}})},e)}))]})}else if(oo.METRICS===s){var m=H[d]||[];n=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j.ZP,{bold:!0,children:"Metrics"}),(0,C.jsx)(j.ZP,{muted:!0,small:!0,children:"Select a column and an aggregation function."}),(0,C.jsxs)(si,{onChange:function(e,n){var r=n.resetValues,o=n.setValues;2===e.filter((function(e){return!!e})).length&&(m.find((function(n){var t=n.aggregation;return n.column===e[0]&&t===e[1]}))||(je((0,u.Z)({},d,m.concat({aggregation:e[1],column:e[0]})),{autoRun:t}),o([null,null]),r()))},children:[(0,C.jsxs)(di.Z,hi(hi({},f),{},{label:"column",children:[(0,C.jsx)("option",{value:""}),(0,Oe.YC)(p,(function(e){return e})).map((function(e){return(0,C.jsx)("option",{value:e,children:e},e)}))]})),(0,C.jsxs)(di.Z,hi(hi({},f),{},{label:"aggregation",children:[(0,C.jsx)("option",{value:""}),(0,Oe.YC)(Yr,(function(e){return e})).map((function(e){return(0,C.jsx)("option",{value:e,children:e},e)}))]}))]}),m.map((function(e){var n=e.aggregation,r=e.column;return(0,C.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:2},children:(0,C.jsx)(oi,{label:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(j.ZP,{inline:!0,monospace:!0,children:[n,"("]}),r,(0,C.jsx)(j.ZP,{inline:!0,monospace:!0,children:")"})]}),onClick:function(){je((0,u.Z)({},d,(0,Oe.Od)(m,(function(e){var t=e.aggregation,o=e.column;return n===t&&r===o}))),{autoRun:t})}})},"".concat(n,"(").concat(r,")"))}))]})}else n=c?(0,C.jsx)(di.Z,hi(hi({},f),{},{children:c.map((function(e){return(0,C.jsx)("option",{value:e,children:e},e)}))})):(0,C.jsx)($n.Z,hi(hi({},f),{},{type:s}));return(0,C.jsx)(Sn.Z,{mb:1,children:n},d)}))))}),{code:[],noCode:[]})}),[ue,H,ie,Z,je,ee]),De=(_e.code,_e.noCode);return(0,C.jsx)(ai,{sm:12,md:12*Te,children:(0,C.jsxs)(Yo,{children:[(0,C.jsx)(Sn.Z,{mt:1,px:1,children:(0,C.jsxs)(x.Z,{alignItems:"center",justifyContent:"space-between",fullWidth:!0,children:[(0,C.jsx)(di.Z,{compact:!0,onChange:function(e){var n=[e.target.value],t=hi(hi({},o),{},{upstream_blocks:n});S(t),be(t),ne(n)},placeholder:"Source block",small:!0,value:(null===ee||void 0===ee?void 0:ee[0])||"",children:null===le||void 0===le?void 0:le.map((function(e){var n=e.uuid;return(0,C.jsx)("option",{value:n,children:n},n)}))}),(0,C.jsxs)(x.Z,{alignItems:"center",children:[!ae&&(0,C.jsx)(mt,{appearBefore:!0,default:!0,label:"Run chart block",size:null,widthFitContent:!0,children:(0,C.jsx)(Ln,{blackBorder:!0,compact:!0,inline:!0,onClick:function(){return be(o)},uuid:"ChartBlock/run/".concat(o.uuid),children:(0,C.jsx)(_.Py,{size:2*I.iI})})}),Vt.QUEUED===d&&(0,C.jsx)(Tn.Z,{color:(R||k.Z).content.active,small:!0,type:"cylon"}),Vt.BUSY===d&&(0,C.jsx)(Tn.Z,{color:(R||k.Z).content.active,small:!0}),(0,C.jsx)(Sn.Z,{mr:1}),(0,C.jsx)(mt,{appearBefore:!0,default:!0,label:"Edit chart",size:null,widthFitContent:!0,children:(0,C.jsx)(Ln,{blackBorder:!0,compact:!0,inline:!0,onClick:function(){return X((function(e){return!e}))},selected:V,uuid:"ChartBlock/edit/".concat(o.uuid),children:(0,C.jsx)(_.I8,{size:2*I.iI})})}),(0,C.jsx)(Sn.Z,{mr:1}),(0,C.jsx)(mt,{appearBefore:!0,default:!0,label:"Delete chart",size:null,widthFitContent:!0,children:(0,C.jsx)(Ln,{blackBorder:!0,compact:!0,inline:!0,onClick:function(){return s(o)},uuid:"ChartBlock/delete/".concat(o.uuid),children:(0,C.jsx)(_.rF,{size:2*I.iI})})})]})]})}),(0,C.jsx)(Sn.Z,{mt:1}),(0,C.jsxs)(x.Z,{justifyContent:"space-between",fullWidth:!0,children:[(0,C.jsx)(Q.Z,{flex:6,ref:D,children:t&&!(0,fi.Qr)(t)&&(0,C.jsx)(Sn.Z,{pb:3,children:(0,C.jsx)(ti,{block:hi(hi({},o),{},{configuration:hi(hi({},o.configuration),H)}),data:t,width:q})})}),V&&(0,C.jsx)(qo,{children:(0,C.jsxs)(x.Z,{flexDirection:"column",fullWidth:!0,children:[(0,C.jsx)(Sn.Z,{mb:1,children:(0,C.jsx)(di.Z,{onChange:function(e){var n=e.target.value,t=hi(hi({},o),{},{configuration:hi(hi({},H),{},{chart_type:n})});S(t),be(t),F(n)},placeholder:"Select chart type",value:M,children:qr.map((function(e){return(0,C.jsx)("option",{value:e,children:(0,ye.kC)(e)},e)}))})}),(0,C.jsx)(Sn.Z,{mb:1,children:(0,C.jsx)(di.Z,{onChange:function(e){return je((0,u.Z)({},Qr,e.target.value))},placeholder:"Chart width",value:(null===H||void 0===H?void 0:H.width_percentage)||1,children:[["1/2 width",.5],["full width",1]].map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return(0,C.jsx)("option",{value:r,children:t},t)}))})}),De]})})]}),V&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(Sn.Z,{my:1,px:1,children:[(0,C.jsx)(j.ZP,{bold:!0,children:"Custom chart code"}),(0,C.jsx)(j.ZP,{muted:!0,small:!0,children:"Write custom logic mapping data to input values for your chart."})]}),(0,C.jsxs)(Jo,{children:[ee.length>=1&&(0,C.jsxs)($o,{children:[(0,C.jsxs)(j.ZP,{muted:!0,small:!0,children:["Variables you can use in your code: ",Pe]}),(0,C.jsxs)(j.ZP,{muted:!0,small:!0,children:["Variables that you must define: ",Ee]})]}),ke]})]}),Ce&&(0,C.jsx)(Sn.Z,{px:1,children:Ce})]})})},vi=["children","fullHeight","gutter","style"];function gi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function bi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?gi(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var xi=function(e){var n=e.children,t=e.fullHeight,r=e.gutter,o=e.style,i=void 0===o?{}:o,c=(0,W.Z)(e,vi),l=bi({},i);return r&&(l.marginLeft=-1*r,l.marginRight=l.marginLeft),t&&(l.height="100%"),(0,C.jsx)(ii.Row,bi(bi({},c),{},{style:l,children:f.Children.map(n,(function(e,n){return e&&f.cloneElement(e,{gutter:r,key:n})}))}))};function yi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ji(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?yi(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ki=function(e){var n=e.blockRefs,t=e.blocks,r=e.deleteWidget,o=(e.fetchWidgets,e.messages),i=e.onChangeChartBlock,c=e.runBlock,l=e.runningBlocks,a=e.savePipelineContent,s=e.selectedBlock,d=e.setSelectedBlock,p=e.setTextareaFocused,h=e.textareaFocused,m=e.updateWidget,v=e.widgets,g=e.width,b=(0,f.useMemo)((function(){return l.reduce((function(e,n,t){return ji(ji({},e),{},(0,u.Z)({},n.uuid,ji(ji({},n),{},{priority:t})))}),{})}),[l]);return(0,C.jsxs)(x.Z,{flexDirection:"column",fullWidth:!0,children:[(0,C.jsx)(xi,{fullHeight:!0,style:{marginLeft:.5*I.iI,marginRight:.5*I.iI},children:null===v||void 0===v?void 0:v.map((function(e){var u=e.uuid,f=b[u],v=f?0===f.priority?Vt.BUSY:Vt.QUEUED:Vt.IDLE;return(0,C.jsx)(mi,{block:e,blockRefs:n,blocks:t,deleteWidget:r,executionState:v,messages:o[u],onChangeContent:function(e){return i(u,e)},runBlock:c,runningBlocks:l,savePipelineContent:a,selected:(null===s||void 0===s?void 0:s.uuid)===u,setSelectedBlock:d,setTextareaFocused:p,textareaFocused:h,updateWidget:m,width:g},u)}))}),(0,C.jsx)("div",{style:{height:"80vh"}})]})},Oi=t(51774),Ci=t.n(Oi),wi=(I.iI,[i.DATA_EXPORTER]),Zi=y.default.div.withConfig({displayName:"indexstyle__GraphContainerStyle",componentId:"sc-bc2ei5-0"})(["div:only-child{","}",""],kt.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")})),Pi=y.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-bc2ei5-1"})(["border:2px solid transparent;border-radius:","px;min-width:fit-content;"," "," ",""],O.BG,(function(e){return e.selected&&"\n    border-color: ".concat((e.theme.content||k.Z.content).active,";\n  ")}),(function(e){return e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")}),(function(e){return e.disabled&&"\n    opacity: 0.5;\n\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}));var Ei=function(e){var n=e.block,t=e.children,r=e.disabled,o=e.hasFailed,i=e.isInProgress,c=e.isQueued,l=e.isSuccessful,u=(e.onClick,e.selected),a=(0,f.useContext)(y.ThemeContext),s=n.type,d=n.uuid,p=!(i||c||o||l),h=l&&!(i||c),m=o&&!(i||c),v="";return p?v="No status":h?v="Successful execution":m?v="Failed execution":i&&(v="Currently executiing"),(0,C.jsx)(Pi,{backgroundColor:pe(s,{theme:a}).accent,disabled:r,selected:u,children:(0,C.jsx)(Sn.Z,{p:1,children:(0,C.jsxs)(x.Z,{alignItems:"center",children:[(0,C.jsxs)(x.Z,{alignItems:"center",justifyContent:"center",style:{height:2*I.iI,width:2*I.iI},title:v,children:[i&&(0,C.jsx)(Tn.Z,{color:(a||k.Z).content.active,small:!0}),h&&(0,C.jsx)(_.Jr,{size:2*I.iI,success:!0}),m&&(0,C.jsx)(_.x8,{danger:!0,size:1.5*I.iI}),p&&(0,C.jsx)(J,{borderSize:1,size:1*I.iI})]}),(0,C.jsx)(Sn.Z,{ml:1}),(0,C.jsx)(x.Z,{alignItems:"center",fullWidth:!0,justifyContent:"center",children:(0,C.jsx)(j.ZP,{inverted:wi.includes(s),monospace:!0,small:!0,children:t})})]})})},d)};function Ii(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Si(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ii(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ii(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ti=Ci()((0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Canvas);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),_i=Ci()((0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Node);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),Di=Ci()((0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Edge);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}});Ci()((0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.MarkerArrow);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),Ci()((0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Port);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}});var Ri=function(e){var n=e.blockRefs,t=e.editingBlock,r=e.fetchPipeline,o=e.height,c=e.pipeline,u=e.runningBlocks,a=e.selectedBlock,s=e.setEditingBlock,d=e.setSelectedBlock,h=(0,f.useContext)(y.ThemeContext),v=(null===t||void 0===t?void 0:t.upstreamBlocks)||{},g=v.block,b=v.values,k=void 0===b?[]:b,O=(0,f.useMemo)((function(){return k.length}),[k]),w=(0,f.useMemo)((function(){var e;return(null===c||void 0===c||null===(e=c.blocks)||void 0===e?void 0:e.filter((function(e){var n=e.type;return i.SCRATCHPAD!==n})))||[]}),[null===c||void 0===c?void 0:c.blocks]),Z=(0,f.useMemo)((function(){return(0,Oe.HK)(w,(function(e){return e.uuid}))}),[w]),P=((0,f.useMemo)((function(){return(0,Oe.HK)(k,(function(e){return e.uuid}))}),[k]),(0,f.useMemo)((function(){return(0,Oe.HK)(u,(function(e){return e.uuid}))}),[u])),E=(0,p.Db)(Hn.ZP.blocks.pipelines.useUpdate(null===c||void 0===c?void 0:c.uuid,null===g||void 0===g?void 0:g.uuid),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(){s({upstreamBlocks:null}),r()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),S=(0,l.Z)(E,2),T=S[0],_=S[1].isLoading,D=(0,f.useCallback)((function(e){var t=e.type,r=e.uuid;if(d(e),null!==n&&void 0!==n&&n.current){var o,i=n.current["".concat(t,"s/").concat(r,".py")];null===i||void 0===i||null===(o=i.current)||void 0===o||o.scrollIntoView()}}),[n,d]),R=(0,f.useCallback)((function(e){s((function(n){var t=n.upstreamBlocks.values||[],r=t.findIndex((function(n){var t=n.uuid;return e.uuid===t}));return Si(Si({},n),{},{upstreamBlocks:Si(Si({},n.upstreamBlocks),{},{values:r>=0?(0,Oe.oM)(t,r):t.concat(e)})})}))}),[s]),A=(0,f.useMemo)((function(){var e={};return w.forEach((function(n){n.upstream_blocks.forEach((function(t){e[t]||(e[t]=[]),e[t].push(n)}))})),e}),[w]),B=(0,f.useMemo)((function(){var e=[],n=[];return w.forEach((function(t){var r=t.upstream_blocks,o=void 0===r?[]:r,i=t.uuid,c=A[i],l=[];c&&l.push.apply(l,(0,er.Z)(c.map((function(e){return{height:10,id:"".concat(i,"-").concat(e.uuid,"-from"),side:"SOUTH",width:10}})))),null===o||void 0===o||o.forEach((function(e){l.push({height:10,id:"".concat(e,"-").concat(i,"-to"),side:"NORTH",width:10}),n.push({from:e,fromPort:"".concat(e,"-").concat(i,"-from"),id:"".concat(e,"-").concat(i),to:i,toPort:"".concat(e,"-").concat(i,"-to")})})),e.push({data:{block:t},height:37,id:i,ports:l,width:t.uuid.length*I.KF+5*I.iI+((null===g||void 0===g?void 0:g.uuid)===t.uuid?19*I.KF:0)})})),{edges:n,nodes:e}}),[g,w]),N=B.edges,M=B.nodes;return(0,C.jsxs)(C.Fragment,{children:[g&&(0,C.jsxs)(Sn.Z,{my:3,px:I.cd,children:[(0,C.jsxs)(Sn.Z,{mb:I.cd,children:[(0,C.jsxs)(j.ZP,{children:["Select parent block(s) for ",(0,C.jsx)(j.ZP,{color:pe(g.type,{theme:h}).accent,inline:!0,monospace:!0,children:g.uuid}),":"]}),(0,C.jsx)(Sn.Z,{mt:1,children:k.map((function(e,n){var t,r=e.uuid;return(0,C.jsxs)(j.ZP,{color:pe(null===(t=Z[r])||void 0===t?void 0:t.type,{theme:h}).accent,inline:!0,monospace:!0,children:[r,O>=2&&n<=O-2?(0,C.jsx)(j.ZP,{inline:!0,children:",\xa0"}):null]},r)}))})]}),(0,C.jsxs)(x.Z,{alignItems:"center",children:[(0,C.jsx)(Ln,{compact:!0,inline:!0,loading:_,onClick:function(){return T({block:Si(Si({},g),{},{upstream_blocks:k.map((function(e){return e.uuid}))})})},uuid:"DependencyGraph/save_parents",children:"Save dependencies"}),(0,C.jsx)(Sn.Z,{ml:1}),(0,C.jsx)(Ln,{compact:!0,inline:!0,noBackground:!0,onClick:function(){return s({upstreamBlocks:null})},uuid:"DependencyGraph/cancel_save_parents",children:"Cancel"})]})]}),(0,C.jsx)(Zi,{height:o-10*I.iI,children:(0,C.jsx)(Ti,{arrow:null,disabled:!1,edge:function(e){var n,t=Z[e.source];return(0,C.jsx)(Di,Si(Si({},e),{},{style:{stroke:null===(n=pe(null===t||void 0===t?void 0:t.type,{theme:h}))||void 0===n?void 0:n.accent}}))},edges:N,fit:!0,node:function(e){return(0,C.jsx)(_i,Si(Si({},e),{},{linkable:!1,onClick:function(e,n){var t=n.data.block;(null===g||void 0===g?void 0:g.uuid)===t.uuid||(g?R(t):D(t))},port:null,style:{fill:"transparent",stroke:"transparent",strokeWidth:0},children:function(e){var n,t,r=e.node.data.block;return(0,C.jsx)("foreignObject",{height:e.height,style:{pointerEvents:"none"},width:e.width,x:0,y:0,children:(0,C.jsxs)(Ei,{block:r,disabled:(null===g||void 0===g?void 0:g.uuid)===r.uuid,hasFailed:m.FAILED===r.status,isInProgress:P[r.uuid]&&(null===(n=u[0])||void 0===n?void 0:n.uuid)===r.uuid,isQueued:P[r.uuid]&&(null===(t=u[0])||void 0===t?void 0:t.uuid)!==r.uuid,isSuccessful:m.EXECUTED===r.status,selected:g?(0,Oe.sE)(k,(function(e){return e.uuid===r.uuid})):(null===a||void 0===a?void 0:a.uuid)===r.uuid,children:[r.uuid,(null===g||void 0===g?void 0:g.uuid)===r.uuid&&" (currently editing)"]},r.uuid)})}}))},nodes:M,zoomable:!0})})]})},Ai=t(19537),Bi=t(73199),Ni=t.n(Bi),Mi=t(71735),Fi=t(65292);var Li,Hi=function(e){var n=e.language,t=e.maxWidth,r=e.showLineNumbers,o=e.small,i=e.source,c=e.wrapLines,l=(0,f.useContext)(y.ThemeContext);return(0,C.jsx)(Ni(),{source:i,renderers:{code:function(e){var i=e.value;return(0,C.jsx)(Mi.Z,{customStyle:{backgroundColor:(l.background||k.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:He.Vp,fontSize:o?12:14,marginBottom:0,marginTop:0,paddingBottom:2*I.iI,paddingTop:2*I.iI,maxWidth:t},lineNumberStyle:{color:(l.content||k.Z.content).muted},language:n,showLineNumbers:r,style:Fi._4,useInlineStyles:!0,wrapLines:c,children:i})}}})},Ui=t(64866),zi=t(21764);function Wi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Qi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Wi(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.LEFT="left",e.RIGHT="right"}(Li||(Li={}));var Gi=function(e){var n,t=e.children,r=e.copiedText,o=e.iconPosition,i=void 0===o?Li.LEFT:o,c=e.inverted,l=e.linkProps,u=e.linkText,a=e.muted,s=e.small,d=e.toastMessage,f=e.withCopyIcon;return t?n=(0,C.jsx)("span",{children:t}):f&&(n=(0,C.jsx)(_n.Z,Qi(Qi({href:"#",inline:!0,muted:a,preventDefault:!0,sameColorAsText:!0,small:s},l),{},{children:(0,C.jsxs)(x.Z,{alignItems:"center",children:[i===Li.LEFT&&(0,C.jsx)(Sn.Z,{mr:1,children:(0,C.jsx)(x.Z,{alignItems:"center",children:(0,C.jsx)(_.CK,{inverted:c,muted:a})})}),u&&(0,C.jsx)(j.ZP,{inverted:c,muted:a,small:s,children:u}),i===Li.RIGHT&&(0,C.jsx)(Sn.Z,{ml:1,children:(0,C.jsx)(x.Z,{alignItems:"center",children:(0,C.jsx)(_.CK,{inverted:c,muted:a})})})]})}))),(0,C.jsx)(Ui.CopyToClipboard,{onCopy:function(){return zi.Am.success(d||"Successfully copied to clipboard.",{position:zi.Am.POSITION.BOTTOM_RIGHT,toastId:r})},text:r,children:n})},Ki=function(e,n,t){return"\n    ".concat(t," = get_variable('").concat(e,"', '").concat(n,"', '").concat(t,"')\n")};var Vi=function(e){var n=e.blockRefs,t=e.blocks,r=e.globalVariables,o=e.setSelectedBlock,c=(0,f.useContext)(y.ThemeContext),l=(0,f.useMemo)((function(){return(0,Oe.HK)(t,(function(e){return e.uuid}))}),[t]);return(0,C.jsxs)(Sn.Z,{p:I.cd,children:[(0,C.jsx)(Sn.Z,{mb:I.cd,children:(0,C.jsxs)(j.ZP,{children:["The variables listed below can be used in any ",(0,C.jsx)(j.ZP,{bold:!0,inline:!0,monospace:!0,children:i.SCRATCHPAD})," block."]})}),(0,C.jsx)(Sn.Z,{mb:I.cd,children:(0,C.jsx)(j.ZP,{children:"To load the variable, use the following syntax:"})}),(0,C.jsx)(Hi,{language:"python",small:!0,source:"\n    from mage_ai.data_preparation.variable_manager import (\n        get_variable,\n    )\n\n\n    df = get_variable(\n        'pipeline_uuid',\n        'block_uuid',\n        'variable_name',\n    )\n"}),null===r||void 0===r?void 0:r.map((function(e){var t,r=e.block.uuid,u=e.pipeline,a=e.variables,s=l[r];if(s&&i.SCRATCHPAD!==s.type){var d=pe(s.type,{theme:c}).accent,f=null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t["".concat(s.type,"s/").concat(r,".py")];return(0,C.jsxs)(Sn.Z,{mt:8,children:[(0,C.jsx)(x.Z,{alignItems:"center",children:(0,C.jsxs)(j.ZP,{children:["The following variables were defined in the block ",(0,C.jsx)(_n.Z,{noHoverUnderline:!0,preventDefault:!0,onClick:function(){var e,n;o(s),null===f||void 0===f||null===(e=f.current)||void 0===e||null===(n=e.scrollIntoView)||void 0===n||n.call(e)},children:(0,C.jsx)(j.ZP,{color:d,inline:!0,monospace:!0,children:r})}),":"]})}),null===a||void 0===a?void 0:a.map((function(e){return(0,C.jsxs)(Sn.Z,{mt:2,children:[(0,C.jsx)(Hi,{language:"python",small:!0,source:Ki(u.uuid,r,e)}),(0,C.jsx)(Gi,{copiedText:(n=u.uuid,t=r,o=e,"from mage_ai.data_preparation.variable_manager import get_variable\n\n\n".concat(Ki(n,t,o).trim(),"\n")),linkText:"Copy code",muted:!0,small:!0,withCopyIcon:!0})]},"".concat(r,"-").concat(e));var n,t,o}))]},r)}}))]})},Xi=y.default.div.withConfig({displayName:"indexstyle__OutputContainerStyle",componentId:"sc-wkjnrg-0"})([""," overflow-y:scroll;"," ",""],kt.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return!e.height&&"\n    height: ".concat(300,"px;\n  ")})),Yi="ws://localhost:6789/websocket/";function qi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ji(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qi(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var $i,ec,nc=function(e){var n=e.pipeline,t=(0,f.useState)(!1),r=t[0],o=t[1],i=(0,f.useState)([]),c=i[0],l=i[1],u=(0,f.useMemo)((function(){return(null===c||void 0===c?void 0:c.length)||0}),[c]),a=(n||{}).uuid,s=(0,d.ZP)(Yi,{onOpen:function(){return console.log("socketUrlPublish opened")},shouldReconnect:function(e){return console.log("Attempting to reconnect..."),!0}}),p=s.lastMessage,h=(s.readyState,s.sendMessage),m=(0,f.useCallback)((function(){l([]),h(JSON.stringify({pipeline_uuid:a,execute_pipeline:!0})),o(!0)}),[a,h]);return(0,f.useEffect)((function(){if(p){var e=JSON.parse(p.data),n=e.execution_state,t=e.pipeline_uuid,r=e.msg_type;t===a&&r===qt.STREAM_PIPELINE&&l((function(n){return[].concat((0,er.Z)(n),[e])})),Vt.IDLE===n&&o(!1)}}),[p,l]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(et.Z,{beforeIcon:(0,C.jsx)(_.JM,{inverted:!0,size:2*I.iI}),loading:r,onClick:function(){return m()},success:!0,children:(0,C.jsx)(j.ZP,{bold:!0,inverted:!0,primary:!1,children:"Execute pipeline"})}),(0,C.jsx)(Xi,{noScrollbarTrackBackground:!0,children:(0,C.jsx)(Er,{executedAndIdle:!0,hasError:!1,selected:!0,children:c.map((function(e,n){var t=e.data,r=e.type,o=[],i=(o=(o=Array.isArray(t)?t:[t]).filter((function(e){return e}))).length;return o.map((function(e,t){var o,c={first:0===n&&0===t,last:n===u-1&&t===i-1};return Jt.includes(r)?o=(0,C.jsx)(Ir,Ji(Ji({},c),{},{children:(0,C.jsx)(j.ZP,{monospace:!0,preWrap:!0,children:(0,C.jsx)(Zr(),{children:e})})})):r===Xt.IMAGE_PNG&&(o=(0,C.jsx)("div",{style:{backgroundColor:"white"},children:(0,C.jsx)("img",{alt:"Image ".concat(n," from code output"),src:"data:image/png;base64, ".concat(e)})})),(0,C.jsx)("div",{children:o},"code-output-".concat(n,"-").concat(t))}))}))})})]})},tc=t(92506),rc="sideview";!function(e){e.CHARTS="charts",e.DATA="data",e.GRAPHS="graphs",e.REPORTS="reports",e.TREE="tree",e.VARIABLES="variables"}(ec||(ec={}));var oc=[ec.CHARTS,ec.DATA,ec.REPORTS,ec.TREE],ic=[ec.DATA,ec.REPORTS,ec.GRAPHS],cc=[{key:ec.TREE,label:"Tree"},{key:ec.CHARTS,label:"Charts"},{key:ec.VARIABLES,label:"Variables"},{key:ec.DATA,label:"Data"}],lc=($i={},(0,u.Z)($i,ec.CHARTS,_.er),(0,u.Z)($i,ec.DATA,_.t1),(0,u.Z)($i,ec.GRAPHS,_.er),(0,u.Z)($i,ec.REPORTS,_.Do),(0,u.Z)($i,ec.TREE,_.BJ),(0,u.Z)($i,ec.VARIABLES,_.KJ),$i),uc=t(32151),ac=2*I.iI,sc=(I.iI,uc.O$+3*I.iI+Ue.dN),dc=y.default.div.withConfig({displayName:"indexstyle__SidekickContainerStyle",componentId:"sc-15ofupc-0"})(["height:calc(100vh - ","px - ","px);width:fit-content;",""],It,ac,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "})),fc=y.default.div.withConfig({displayName:"indexstyle__PaddingContainerStyle",componentId:"sc-15ofupc-1"})(["padding:","px;",""],2*I.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "})),pc=t(43313),hc=t(84779);var mc=t(24141);var vc=function(e){var n=e.activeView,t=e.afterWidth,r=e.blockRefs,o=e.blocks,i=e.deleteWidget,c=e.editingBlock,l=e.fetchPipeline,u=e.fetchWidgets,a=e.globalVariables,s=e.insights,p=e.messages,h=e.metadata,m=e.onChangeChartBlock,v=e.pipeline,g=e.runBlock,b=e.runningBlocks,y=e.sampleData,k=e.savePipelineContent,O=e.selectedBlock,w=e.setEditingBlock,Z=e.setSelectedBlock,P=e.setTextareaFocused,E=e.statistics,S=e.textareaFocused,T=e.updateWidget,D=e.widgets,R=(0,mc.i)().height,A=It+kt.nn,B=null===v||void 0===v?void 0:v.uuid,N=(0,f.useState)(!1),M=(N[0],N[1],(0,f.useState)(null)),F=M[0],L=M[1],H=((null===c||void 0===c?void 0:c.upstreamBlocks)||{}).block,U=(null===y||void 0===y?void 0:y.columns)||[],z=(null===y||void 0===y?void 0:y.rows)||[],W=(null===h||void 0===h?void 0:h.column_types)||{},Q=null===U||void 0===U?void 0:U.map((function(e){return{columnType:W[e],uuid:e}})),G=(null===s||void 0===s?void 0:s[1])||{},K=(0,f.useMemo)((function(){return(0,Oe.HK)((null===s||void 0===s?void 0:s[0])||[],(function(e){return e.feature.uuid}))}),[s]),V=function(e){var n=e.statistics,t=Object.keys(n),r=Array(pc.Dy.length).fill(0);return 0===t.length?null:(t.forEach((function(e){if(pc.Dy.includes(e)){var t=pc.CC[e],o=n[e],i=o,c=!1,l=[2,3],u=pc.Ub[e],a=pc.oH[e],s=pc.OD[e];if(pc.y_.includes(e))c=!0,l=[2,1,2];else if(e in pc.Sq){o=(0,hc.Jw)(o,0);var d=pc.Sq[e];i=n[d]}var f={columnFlexNumbers:l,name:t,progress:c,rate:i,successDirection:a,warning:s};pc.y_.includes(e)||(f.value=o),r[u]=f}})),r)}({statistics:E}),X=function(e){var n=e.columnTypes,t=void 0===n?{}:n,r=e.statistics,o=Object.keys(r);if(0===o.length)return null;var i=Object.values(t),c=i.length,l=[];l.push({name:"Column count",successDirection:pc.oH.column_count,value:(0,ye.x6)(c)}),o.forEach((function(e){if(pc.Zu.includes(e)){var n=pc.CC[e],t=r[e],o=pc.OD[e];l.push({name:n,successDirection:pc.oH[e],value:(0,ye.x6)(t),warning:o})}}));var u=(0,uc.QO)(i),a=u.countCategory,s=u.countDatetime,d=u.countNumerical;return l.push({name:"Categorical Features",rate:a/c,value:(0,ye.x6)(a)},{name:"Numerical Features",rate:d/c,value:(0,ye.x6)(d)},{name:"Datetime Features",rate:s/c,value:(0,ye.x6)(s)}),l}({columnTypes:W,statistics:E}),Y=y&&s&&Object.keys(E).length>0,q=(0,f.useCallback)((0,uc.Fk)({columnTypes:W,columns:U,insightsByFeatureUUID:K,insightsOverview:G,noColumnLinks:!0,statistics:E}),[W,U,K,G,E]),J=(0,f.useMemo)((function(){return(0,C.jsx)(Vi,{blockRefs:r,blocks:o,globalVariables:a,setSelectedBlock:Z})}),[null===r||void 0===r?void 0:r.current,o,a,Z]),$=(0,d.ZP)(Yi,{onOpen:function(){return console.log("socketUrlPublish opened")},shouldReconnect:function(e){return console.log("Attempting to reconnect..."),!0}}),ee=($.lastMessage,$.readyState,$.sendMessage);return(0,f.useCallback)((function(){ee(JSON.stringify({pipeline_uuid:B,execute_pipeline:!0}))}),[B,ee]),(0,C.jsxs)(C.Fragment,{children:[n===ec.TREE&&(null===F||void 0===F?void 0:F.length)>=1&&(0,C.jsxs)(Sn.Z,{mb:3,mt:2,mx:2,children:[(0,C.jsxs)(x.Z,{justifyContent:"space-between",children:[(0,C.jsx)(j.ZP,{bold:!0,danger:!0,children:"Errors"}),(0,C.jsx)(et.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return L(null)},transparent:!0,children:(0,C.jsx)(_.x8,{muted:!0})})]}),null===F||void 0===F?void 0:F.map((function(e){return(0,C.jsx)(Sn.Z,{pb:1,children:(0,C.jsx)(j.ZP,{monospace:!0,xsmall:!0,children:e})},e)}))]}),(0,C.jsxs)(dc,{fullWidth:oc.includes(n),children:[n===ec.TREE&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ri,{blockRefs:r,editingBlock:c,fetchPipeline:l,height:R-A-300,pipeline:v,runningBlocks:b,selectedBlock:O,setEditingBlock:w,setSelectedBlock:Z}),!H&&(0,C.jsx)(Sn.Z,{p:2,children:(0,C.jsx)(nc,{pipeline:v})})]}),n===ec.DATA&&U.length>0&&(0,C.jsx)(Pr.Z,{columnHeaderHeight:sc,columns:U,height:R-A,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!0,renderColumnHeader:q,rows:z,width:t}),n===ec.REPORTS&&(0,C.jsx)(fc,{noPadding:!O||!Y,children:(0,C.jsxs)(x.Z,{flexDirection:"column",fullWidth:!0,children:[V&&(0,C.jsx)(tc.Z,{stats:V,title:"Quality metrics"}),X&&(0,C.jsx)(Sn.Z,{mt:I.cd,children:(0,C.jsx)(tc.Z,{stats:X,title:"Statistics"})}),Q.length>0&&(0,C.jsx)(Sn.Z,{mt:I.cd,children:(0,C.jsx)(Ai.Z,{features:Q,statistics:E})})]})}),n===ec.GRAPHS&&(0,C.jsx)(fc,{noPadding:!O||!Y,children:(0,C.jsx)(Oo,{afterWidth:t,features:Q,insightsOverview:G,statistics:E})}),ec.VARIABLES===n&&a&&J,O&&Y?null:ic.includes(n)&&(0,C.jsx)(x.Z,{alignItems:"center",justifyContent:"center",verticalHeight:90,verticalHeightOffset:A,width:t,children:(0,C.jsx)(j.ZP,{center:!0,default:!0,disableWordBreak:!0,large:!0,monospace:!0,children:O?!Y&&"No data or insights available":"Select a block for insights"})}),ec.CHARTS===n&&(0,C.jsx)(ki,{blockRefs:r,blocks:o,deleteWidget:i,fetchWidgets:u,messages:p,onChangeChartBlock:m,runBlock:g,runningBlocks:b,savePipelineContent:k,selectedBlock:O,setSelectedBlock:Z,setTextareaFocused:P,textareaFocused:S,updateWidget:T,widgets:D,width:t})]})]})},gc=t(1887),bc=t.n(gc),xc=t(57639);var yc=function(e){var n=e.after,t=e.afterHeader,r=e.afterHidden,o=e.afterMousedownActive,i=e.afterWidth,c=e.before,l=e.beforeHeader,u=e.beforeHidden,a=e.beforeMousedownActive,s=e.beforeWidth,d=e.children,p=e.mainContainerHeader,h=e.mainContainerRef,m=e.setAfterHidden,v=e.setAfterMousedownActive,g=e.setAfterWidth,b=e.setBeforeHidden,y=e.setBeforeMousedownActive,j=e.setBeforeWidth,k=(0,mc.i)().width,O=(0,f.useRef)(null),w=(0,f.useRef)(null),Z=(0,f.useRef)(null),P=(0,f.useRef)(null),E=(0,f.useCallback)((function(){var e=!r;m(e),(0,de.t8)(de.zg,e)}),[r,m]),S=(0,f.useCallback)((function(){var e=!u;b(e),(0,de.t8)(de.Uu,e)}),[u,b]);(0,f.useEffect)((function(){var e,n,t,r,o=function(e){var n,t;((null===Z||void 0===Z||null===(n=Z.current)||void 0===n||null===(t=n.getBoundingClientRect)||void 0===t?void 0:t.call(n))||{}).x;if(k){var r=e.x;r+Et>k-i&&(r=k-i-Et),j(Math.max(r,wt))}},c=function(e){var n,t;e.offsetX>=e.target.offsetWidth-Pt&&e.offsetX<=e.target.offsetWidth+Pt&&(y(!0),e.preventDefault(),null===(n=document)||void 0===n||null===(t=n.addEventListener)||void 0===t||t.call(n,"mousemove",o,!1))},l=function(){var e,n;y(!1),null===(e=document)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousemove",o,!1)};return null===P||void 0===P||null===(e=P.current)||void 0===e||null===(n=e.addEventListener)||void 0===n||n.call(e,"mousedown",c,!1),null===(t=document)||void 0===t||null===(r=t.addEventListener)||void 0===r||r.call(t,"mouseup",l,!1),function(){var e,n,t,r;null===P||void 0===P||null===(e=P.current)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousedown",c,!1),null===(t=document)||void 0===t||null===(r=t.removeEventListener)||void 0===r||r.call(t,"mouseup",l,!1),l()}}),[i,Z,P,y,j,k]),(0,f.useEffect)((function(){var e,n,t,r,o=function(e){var n,t;((null===O||void 0===O||null===(n=O.current)||void 0===n||null===(t=n.getBoundingClientRect)||void 0===t?void 0:t.call(n))||{}).x;if(k){var r=k-e.x;r+Et>k-s&&(r=k-s-Et),g(Math.max(r,Ct))}},i=function(e){var n,t;e.offsetX>=-1*Pt&&e.offsetX<=Pt&&(v(!0),e.preventDefault(),null===(n=document)||void 0===n||null===(t=n.addEventListener)||void 0===t||t.call(n,"mousemove",o,!1))},c=function(){var e,n;v(!1),null===(e=document)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousemove",o,!1)};return null===w||void 0===w||null===(e=w.current)||void 0===e||null===(n=e.addEventListener)||void 0===n||n.call(e,"mousedown",i,!1),null===(t=document)||void 0===t||null===(r=t.addEventListener)||void 0===r||r.call(t,"mouseup",c,!1),function(){var e,n,t,r;null===w||void 0===w||null===(e=w.current)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousedown",i,!1),null===(t=document)||void 0===t||null===(r=t.removeEventListener)||void 0===r||r.call(t,"mouseup",c,!1),c()}}),[s,O,w,v,g,k]);var T=r?4*I.iI:i,D=u?4*I.iI:s;return(0,C.jsxs)(xc.Z,{children:[(o&&!r||a&&!u)&&(0,C.jsx)(bc(),{children:(0,C.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n                body {\n                  cursor: col-resize;\n                }\n              "}})}),c&&(0,C.jsxs)(Rt,{style:{width:D},children:[(0,C.jsx)(Mt,{active:a,disabled:u,ref:P,right:0}),(0,C.jsx)(Dt,{style:{width:D},visible:u,children:(0,C.jsxs)(x.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,justifyContent:"space-between",children:[(0,C.jsxs)(Q.Z,{children:[(0,C.jsx)(Sn.Z,{pl:u?1:0}),!u&&l]}),(0,C.jsxs)(Q.Z,{children:[(0,C.jsx)(mt,{block:!0,label:u?"Show sidebar":"Hide sidebar",size:null,widthFitContent:!0,children:(0,C.jsxs)(et.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return S()},children:[u&&(0,C.jsx)(_._Q,{neutral:!0,size:2*I.iI}),!u&&(0,C.jsx)(_.s$,{neutral:!0,size:2*I.iI})]})},u?"before-is-hidden":"before-is-visible"),(0,C.jsx)(Sn.Z,{pr:u?1:2})]})]})}),(0,C.jsx)(At,{noScrollbarTrackBackground:!0,ref:Z,children:!u&&c})]}),(0,C.jsxs)(Ft,{style:{left:D,width:"calc(100% - ".concat(D+T,"px)")},children:[p,(0,C.jsx)(Lt,{headerOffset:p?It:null,style:{width:"calc(100% - ".concat(D+T,"px)")},children:(0,C.jsx)(Ht,{noScrollbarTrackBackground:!0,ref:h,children:d})})]}),n&&(0,C.jsxs)(Bt,{style:{width:T},children:[(0,C.jsx)(Mt,{active:o,disabled:r,left:0,ref:w}),(0,C.jsx)(Dt,{style:{width:T},visible:r,children:(0,C.jsxs)(x.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,children:[(0,C.jsxs)(Q.Z,{children:[(0,C.jsx)(Sn.Z,{pl:r?1:2}),(0,C.jsxs)(et.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return E()},children:[r&&(0,C.jsx)(_.s$,{neutral:!0,size:2*I.iI}),!r&&(0,C.jsx)(_._Q,{neutral:!0,size:2*I.iI})]})]}),!r&&t]})}),(0,C.jsx)(Nt,{noScrollbarTrackBackground:!0,ref:O,children:!r&&n})]})]})};function jc(e){var n={},t={};return e.forEach((function(e){var r=e.content,o=e.outputs,i=e.uuid;o.length>=1&&(n[i]=o.map((function(e){var n=e||{},t=n.sample_data,r=n.text_data,o=n.type;return t?{data:t,type:o}:r&&(0,ye.Pb)(r)?JSON.parse(r):r}))),t[i]=r})),{content:t,messages:n}}var kc=t(59e3);function Oc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Cc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Oc(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function wc(e){var n,t,r,o=e.pipeline,c=(0,h.useRouter)(),a=(0,mc.i)(),s=a.height,m=a.width,v=(0,f.useState)((0,de.U2)(de.L8,Ot)),g=v[0],b=v[1],y=(0,f.useState)(null),j=y[0],k=y[1],O=(0,f.useState)((0,de.U2)(de.J3,Zt)),w=O[0],Z=O[1],P=(0,f.useState)(!!(0,de.U2)(de.zg)),E=P[0],S=P[1],T=(0,f.useState)(!!(0,de.U2)(de.Uu)),D=T[0],R=T[1],A=(0,f.useState)(!1),B=A[0],N=A[1],M=(0,f.useState)(!1),F=M[0],L=M[1],H=(0,f.useState)(null),U=H[0],z=H[1],W=(0,f.useState)([]),G=W[0],K=W[1],V=(0,f.useState)({}),X=V[0],Y=V[1],q=(0,f.useState)(!1),J=q[0],$=q[1],ee=(0,f.useState)(null),ne=ee[0],te=ee[1],re=(0,f.useState)(!1),oe=re[0],ie=re[1],ce=(0,kc.iV)(),le=ce.sideview,ue=ce.file_path,ae=(0,f.useMemo)((function(){var e=ce["file_paths[]"]||[];return Array.isArray(e)||(e=[e]),e}),[ce]),se=(0,f.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,kc.iV)().sideview!==e&&(0,Kt.u)((0,u.Z)({},rc,e),{pushHistory:n})}),[le]);(0,f.useEffect)((function(){le||se(ec.TREE,!1)}),[le]);var fe=(0,f.useRef)({}),pe=(0,f.useRef)({}),he=(0,f.useRef)({}),me=(0,f.useRef)(null),ve=o.uuid,ge=(0,Fe.Z)(ve),be=(0,f.useCallback)((function(e){pe.current=Cc(Cc({},pe.current),e)}),[pe]),xe=(0,f.useCallback)((function(e,n){be((0,u.Z)({},e,n)),ie(!0)}),[be,ie]),je=(0,f.useCallback)((function(e){he.current=Cc(Cc({},he.current),e)}),[he]),ke=(0,f.useCallback)((function(e,n){je((0,u.Z)({},e,n)),ie(!0)}),[je,ie]),Ce=(0,f.useState)(null),we=Ce[0],Ze=Ce[1];(0,f.useEffect)((function(){null===me||void 0===me||!me.current||B||F||Ze(me.current.getBoundingClientRect().width)}),[B,F,E,g,D,w,null===me||void 0===me?void 0:me.current,Ze,m]),(0,f.useEffect)((function(){B||(k(g),(0,de.t8)(de.L8,g))}),[B,g,k]),(0,f.useEffect)((function(){F||(0,de.t8)(de.J3,w)}),[F,w]);var Pe=Hn.ZP.variables.pipelines.list(!E&&ve),Ee=Pe.data,Ie=Pe.mutate,Se=null===Ee||void 0===Ee?void 0:Ee.variables,Te=(0,f.useState)([]),Re=Te[0],Ae=Te[1],Ne=(0,f.useState)([]),Me=Ne[0],Le=Ne[1],He=(0,f.useRef)({}),Ue=(0,f.useCallback)((function(e){var n;ie(!0);var t=He.current[e.uuid]||{},r=t.upstream_blocks;(null===e||void 0===e||null===(n=e.upstream_blocks)||void 0===n?void 0:n.length)>=1&&(r=e.upstream_blocks),He.current[e.uuid]=Cc(Cc(Cc({},t),e),{},{configuration:Cc(Cc({},t.configuration),e.configuration),upstream_blocks:r})}),[ie,He.current]),ze=(0,f.useState)({upstreamBlocks:null}),We=ze[0],Qe=ze[1],Ge=(0,f.useState)([]),Ke=Ge[0],Ve=Ge[1],Xe=(0,f.useState)(null),Ye=Xe[0],qe=Xe[1],Je=(0,f.useCallback)((function(){Qe({upstreamBlocks:{block:null,values:[]}}),hn({}),ie(!1),te(null),Ve([]),qe(null)}),[]);(0,f.useEffect)((function(){ve!==ge&&(pe.current={})}),[ve,ge]);var $e=Hn.ZP.blocks.pipelines.outputs.detail(!E&&ve,(null===Ye||void 0===Ye?void 0:Ye.type)!==i.SCRATCHPAD&&(null===Ye||void 0===Ye?void 0:Ye.type)!==i.CHART&&(null===Ye||void 0===Ye?void 0:Ye.uuid)),en=$e.data,nn=$e.mutate,tn=null===en||void 0===en||null===(n=en.outputs)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.sample_data,rn=Hn.ZP.blocks.pipelines.analyses.detail(!E&&ve,(null===Ye||void 0===Ye?void 0:Ye.type)!==i.SCRATCHPAD&&(null===Ye||void 0===Ye?void 0:Ye.type)!==i.CHART&&(null===Ye||void 0===Ye?void 0:Ye.uuid)),on=rn.data,cn=rn.mutate,ln=(null===on||void 0===on||null===(r=on.analyses)||void 0===r?void 0:r[0])||{},un=ln.insights,an=ln.metadata,sn=ln.statistics,dn=void 0===sn?{}:sn;(0,f.useEffect)((function(){0===Ke.length&&(cn(),nn(),Ie())}),[cn,nn,Ie,Ke]),(0,f.useEffect)((function(){var e;null!==(e=We.upstreamBlocks)&&void 0!==e&&e.block&&(S(!1),se(ec.TREE))}),[We.upstreamBlocks]);var fn=(0,f.useState)({}),pn=fn[0],hn=fn[1],mn=Hn.ZP.pipelines.detail(ve),vn=mn.data,gn=(mn.isLoading,mn.mutate),bn=Hn.ZP.files.list(),xn=bn.data,yn=bn.mutate,jn=null===vn||void 0===vn?void 0:vn.pipeline,kn=Hn.ZP.kernels.list({},{refreshInterval:5e3,revalidateOnFocus:!0}),On=kn.data,Cn=kn.mutate,wn=null===On||void 0===On?void 0:On.kernels,Zn=null===wn||void 0===wn?void 0:wn[0],Pn=(0,f.useCallback)((function(e){var n=encodeURIComponent(e),t=(0,kc.iV)()["file_paths[]"]||[];Array.isArray(t)||(t=[t]),t.includes(n)||t.push(n),(0,Kt.u)({"file_paths[]":t,file_path:n})}),[]);(0,f.useEffect)((function(){z(ue)}),[ue]),(0,f.useEffect)((function(){(0,Oe.fS)(ae,G)||K(ae)}),[ae]);var En=(0,p.Db)(Hn.ZP.pipelines.useUpdate(ve,{update_content:!0}),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(){return ie(!1)},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),In=(0,l.Z)(En,2),Tn=In[0],_n=In[1].isLoading,Dn=(0,p.Db)((function(e){return Hn.ZP.pipelines.useUpdate(ve)({pipeline:{name:e}})}),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(e){var n=e.pipeline.uuid;yn(),function(e,n,t){e.forEach((function(e){(0,de.t8)("".concat(t,"/").concat(e.uuid,"/codeCollapsed"),(0,de.Od)("".concat(n,"/").concat(e.uuid,"/codeCollapsed"))),(0,de.t8)("".concat(t,"/").concat(e.uuid,"/outputCollapsed"),(0,de.Od)("".concat(n,"/").concat(e.uuid,"/outputCollapsed")))}))}(Re,ve,n),c.push("/pipelines/".concat(n))},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),Rn=(0,l.Z)(Dn,1)[0],An=(0,f.useCallback)((function(){return te(new Date),Tn({pipeline:Cc(Cc({},jn),{},{blocks:Re.map((function(e){var n=pe.current[e.uuid];return"undefined"===typeof n&&(n=e.content),Cc(Cc({},e),{},{content:n,outputs:i.SCRATCHPAD===e.type&&pn[e.uuid]?pn[e.uuid].map((function(n,t){return{text_data:JSON.stringify(n),variable_uuid:"".concat(e.uuid,"_").concat(t)}})):e.outputs})})),widgets:Me.map((function(e){var n=he.current[e.uuid],t=He.current[e.uuid]||{};return"undefined"===typeof n&&(n=e.content),Cc(Cc(Cc({},e),t),{},{content:n,configuration:Cc(Cc({},e.configuration),t.configuration)})}))})})}),[Re,pe.current,he.current,pn,jn,te,Tn,He.current,Me]),Bn=(0,p.Db)((function(e){var n=e.uuid;return Hn.ZP.blocks.pipelines.useDelete(ve,n)()}),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(e){var n=e.block,t=n.type,r=n.uuid;Ae((function(e){return(0,Oe.oM)(e,e.findIndex((function(e){var n=e.uuid;return r===n})))})),gn(),t===i.SCRATCHPAD&&yn()},onErrorCallback:function(e,n){var t=e.url_parameters,r=n.messages;hn((function(e){return Cc(Cc({},e),{},(0,u.Z)({},t.block_uuid,r.map((function(e){return{data:e,type:Xt.TEXT_PLAIN}}))))}))}})}}),Nn=(0,l.Z)(Bn,1)[0],Mn=(0,p.Db)((function(e){var n=e.uuid;return Hn.ZP.widgets.pipelines.useDelete(ve,n)()}),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(e){var n=e.widget,t=n.type,r=n.uuid;Le((function(e){return(0,Oe.oM)(e,e.findIndex((function(e){var n=e.uuid;return r===n})))})),gn(),t===i.SCRATCHPAD&&yn()},onErrorCallback:function(e,n){var t=e.url_parameters,r=n.messages;hn((function(e){return Cc(Cc({},e),{},(0,u.Z)({},t.block_uuid,r.map((function(e){return{data:e,type:Xt.TEXT_PLAIN}}))))}))}})}}),Fn=(0,l.Z)(Mn,1)[0],zn=(0,p.Db)((function(e){var n=e.type,t=e.uuid;return Hn.ZP.blocks.useDelete(encodeURIComponent("".concat(n,"/").concat(t)))()}),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(){gn(),yn()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r),alert("Error deleting block file. Check that there are no downstream blocks, then try again.")}})}}),Wn=(0,l.Z)(zn,1)[0],Qn=(0,p.Db)(Hn.ZP.restart.kernels.useCreate(null===Zn||void 0===Zn?void 0:Zn.id),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(){return Cn()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),Kn=(0,l.Z)(Qn,1)[0],Vn=(0,p.Db)(Hn.ZP.interrupt.kernels.useCreate(null===Zn||void 0===Zn?void 0:Zn.id),{onSuccess:function(e){return(0,Un.wD)(e,{callback:function(e){},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),Xn=(0,l.Z)(Vn,1)[0],Yn=((0,f.useCallback)((function(){window.confirm("Do you want to restart the kernel? All variables will be cleared.")&&Kn()}),[Kn]),(0,p.Db)(Hn.ZP.blocks.pipelines.useCreate(ve))),$n=(0,l.Z)(Yn,1)[0],et=(0,f.useCallback)((function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,ye.Y6)();return $n({block:Cc({name:r,priority:n},e)}).then((function(e){(0,Un.wD)(e,{callback:function(){var r=e.data.block;Ae((function(e){return(0,Oe.Hk)(r,n,e)})),null===t||void 0===t||t(r),yn(),gn()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}))}),[$n,Ae]),nt=Hn.ZP.widgets.pipelines.list(!E&&ve),tt=(nt.data,nt.mutate),rt=(0,p.Db)(Hn.ZP.widgets.pipelines.useCreate(ve)),ot=(0,l.Z)(rt,1)[0],it=(0,f.useCallback)((function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,ye.Y6)();return ot({widget:Cc({name:r,priority:n,type:i.CHART},e)}).then((function(e){return(0,Un.wD)(e,{callback:function(){var n=e.data.widget;null===t||void 0===t||t(n),yn(),gn(),se(ec.CHARTS)},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}))}),[le,ot,se]);(0,f.useEffect)((function(){ge!==ve&&(Ae([]),Le([]))}),[ve,ge]),(0,f.useEffect)((function(){"undefined"!==typeof(null===jn||void 0===jn?void 0:jn.blocks)&&Ae(jn.blocks)}),[null===jn||void 0===jn?void 0:jn.blocks]),(0,f.useEffect)((function(){"undefined"!==typeof(null===jn||void 0===jn?void 0:jn.widgets)&&Le(jn.widgets)}),[null===jn||void 0===jn?void 0:jn.widgets]),(0,f.useEffect)((function(){if(!Re.length&&"undefined"!==typeof(null===jn||void 0===jn?void 0:jn.blocks)){var e=jc(jn.blocks),n=e.content,t=e.messages;pe.current=n,hn((function(e){return Cc(Cc({},t),e)}))}}),[Re,null===jn||void 0===jn?void 0:jn.blocks,Ae,hn]),(0,f.useEffect)((function(){if(!Me.length&&"undefined"!==typeof(null===jn||void 0===jn?void 0:jn.widgets)){var e=jc(jn.widgets),n=e.content,t=e.messages;he.current=n,hn((function(e){return Cc(Cc({},t),e)}))}}),[null===jn||void 0===jn?void 0:jn.widgets,Ae,hn,Me]);var ct=(0,f.useCallback)((function(e,n,t){var r=Re.find((function(t){var r=t.type,o=t.uuid;return r===n&&o===e}));if(r){if(qe(r),null!==fe&&void 0!==fe&&fe.current){var o,i=fe.current["".concat(r.type,"s/").concat(r.uuid,".py")];null===i||void 0===i||null===(o=i.current)||void 0===o||o.scrollIntoView()}}else Pn(t)}),[Re]),lt=(0,d.ZP)(Yi,{onOpen:function(){return console.log("socketUrlPublish opened")},shouldReconnect:function(e){return console.log("Attempting to reconnect..."),!0}}),ut=lt.lastMessage,at=(lt.readyState,lt.sendMessage);(0,f.useEffect)((function(){if(ut){var e=JSON.parse(ut.data),n=e.execution_state,t=e.uuid;hn((function(n){var r=n[t]||[];return Cc(Cc({},n),{},(0,u.Z)({},t,r.concat(e)))})),Vt.IDLE===n&&Ve((function(e){return e.filter((function(e){var n=e.uuid;return t!==n}))})),ie(!0)}}),[ut,hn,ie,Ve]);var st=(0,f.useCallback)((function(e){var n=e.block,t=e.code,r=e.ignoreAlreadyRunning,o=e.runDownstream,i=void 0!==o&&o,c=e.runUpstream,l=void 0!==c&&c,u=n.uuid;Ke.find((function(e){var n=e.uuid;return u===n}))&&!r||(at(JSON.stringify({code:t,pipeline_uuid:null===jn||void 0===jn?void 0:jn.uuid,type:n.type,uuid:u,run_downstream:i,run_upstream:l})),hn((function(e){return delete e[u],e})),$(!1),Ve((function(e){return e.find((function(e){var n=e.uuid;return u===n}))?e:e.concat(n)}))),gn()}),[gn,jn,Ke,at,hn,Ve,$]),dt=(0,f.useRef)(null),ft=(0,f.useMemo)((function(){return(0,C.jsx)(Be,{areaRef:dt,deleteBlockFile:Wn,enableContextItem:!0,type:_e.FILE_BROWSER,children:(0,C.jsx)(De,{files:null===xn||void 0===xn?void 0:xn.files,onSelectBlockFile:ct,openFile:Pn,openPipeline:function(e){Je(),c.push("/pipelines/[...slug]","/pipelines/".concat(e))},ref:dt})})}),[null===xn||void 0===xn?void 0:xn.files,ct]),pt=(0,f.useMemo)((function(){return(0,C.jsx)(vc,{activeView:le,afterWidth:j,blockRefs:fe,blocks:Re,deleteWidget:Fn,editingBlock:We,fetchPipeline:gn,fetchWidgets:tt,globalVariables:Se,insights:un,messages:pn,metadata:an,onChangeChartBlock:ke,pipeline:jn,runBlock:st,runningBlocks:Ke,sampleData:tn,savePipelineContent:An,selectedBlock:Ye,setEditingBlock:Qe,setSelectedBlock:qe,setTextareaFocused:$,statistics:dn,textareaFocused:J,updateWidget:Ue,widgets:Me})}),[le,j,fe,Re,Fn,We,gn,tt,Se,un,pn,an,ke,jn,st,Ke,tn,An,Ye,Qe,$,dn,J,Ue,Me]),ht=(0,f.useMemo)((function(){return(0,C.jsx)(xo,{addNewBlockAtIndex:et,addWidget:function(e,n){var t=n.onCreateCallback;return it(e,Me.length,t)},blockRefs:fe,blocks:Re,deleteBlock:Nn,fetchFileTree:yn,fetchPipeline:gn,interruptKernel:Xn,isPipelineUpdating:_n,kernel:Zn,mainContainerRef:me,mainContainerWidth:we,messages:pn,onChangeCodeBlock:xe,pipeline:jn,pipelineContentTouched:oe,pipelineLastSaved:ne,restartKernel:Kn,runBlock:st,runningBlocks:Ke,savePipelineContent:An,selectedBlock:Ye,setEditingBlock:Qe,setMessages:hn,setPipelineContentTouched:ie,setRunningBlocks:Ve,setSelectedBlock:qe,setTextareaFocused:$,textareaFocused:J,widgets:Me})}),[et,it,fe,Re,Nn,yn,gn,Xn,_n,Zn,me,we,pn,xe,jn,oe,ne,Kn,st,Ke,An,Ye,Qe,hn,ie,Ve,qe,$,J,Me]),mt=(0,f.useMemo)((function(){return(0,C.jsx)(Yt,{filePaths:G,filesTouched:X,isBusy:Ke.length>=1,isPipelineUpdating:_n,kernel:Zn,pipeline:jn,pipelineContentTouched:oe,pipelineLastSaved:ne,restartKernel:Kn,selectedFilePath:U,updatePipelineName:Rn})}),[X,_n,Zn,jn,oe,ne,Kn,Ke,U,G,Rn]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Jn.Z,{title:null===jn||void 0===jn?void 0:jn.name}),(0,C.jsxs)(yc,{after:pt,afterHeader:(0,C.jsxs)(x.Z,{alignItems:"center",fullWidth:!0,justifyContent:"space-between",children:[(0,C.jsx)(Q.Z,{children:cc.map((function(e){var n=e.key,t=e.label,r=n===le,o=lc[n];return(0,C.jsx)(Sn.Z,{pl:1,children:(0,C.jsx)(Ln,{beforeElement:(0,C.jsx)(o,{}),blackBorder:!0,compact:!0,onClick:function(){return se(n)},selected:r,uuid:n,children:t})},n)}))}),(0,C.jsx)(Sn.Z,{px:1,children:(0,C.jsx)(Ln,{beforeElement:(0,C.jsx)(_.mm,{}),blackBorder:!0,compact:!0,onClick:function(){return it({},Me.length)},uuid:"Pipeline/afterHeader/add_chart",children:"Add chart"})})]}),afterHidden:E,afterMousedownActive:B,afterWidth:g,before:ft,beforeHeader:(0,C.jsx)(qn,{fetchFileTree:yn,interruptKernel:Xn,restartKernel:Kn,savePipelineContent:An,setMessages:hn}),beforeHidden:D,beforeMousedownActive:F,beforeWidth:w,mainContainerHeader:mt,mainContainerRef:me,setAfterHidden:S,setAfterMousedownActive:N,setAfterWidth:b,setBeforeHidden:R,setBeforeMousedownActive:L,setBeforeWidth:Z,children:[!U&&ht,null===ae||void 0===ae?void 0:ae.map((function(e){return(0,C.jsx)("div",{style:{display:U===e?null:"none"},children:(0,C.jsx)(Gn,{addNewBlock:function(e){et(e,Re.length,qe,e.uuid),c.push("/pipelines/".concat(ve))},filePath:e,pipeline:jn,setFilesTouched:Y})},e)})),(0,C.jsx)(Sn.Z,{pb:Math.max(Math.floor(s/2/I.iI),0)})]})]})}wc.getInitialProps=function(){var e=(0,c.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.slug,Array.isArray(t)&&(r=t[0]),e.abrupt("return",{pipeline:{uuid:r}});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var Zc=wc},26039:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[...slug]",function(){return t(63048)}])}},function(e){e.O(0,[3662,4259,240,1125,2084,9668,8952,79,9774,2888,179],(function(){return n=26039,e(e.s=n);var n}));var n=e.O();_N_E=n}]);