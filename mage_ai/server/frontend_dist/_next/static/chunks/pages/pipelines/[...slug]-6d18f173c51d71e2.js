(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8778],{7432:function(e,n,t){var r={"./Active4D.json":[266,266],"./All Hallows Eve.json":[4450,4450],"./Amy.json":[88849,8849],"./Birds of Paradise.json":[78097,8097],"./Blackboard.json":[88018,6115],"./Brilliance Black.json":[73835,3835],"./Brilliance Dull.json":[6507,6507],"./Chrome DevTools.json":[22508,2508],"./Clouds Midnight.json":[49566,9566],"./Clouds.json":[57951,7951],"./Cobalt.json":[80826,826],"./Cobalt2.json":[98256,8256],"./Dawn.json":[76958,6958],"./Dominion Day.json":[89307,9307],"./Dracula.json":[33453,3453],"./Dreamweaver.json":[19363,9363],"./Eiffel.json":[82481,2481],"./Espresso Libre.json":[44776,4776],"./GitHub.json":[10739,739],"./IDLE.json":[67947,7947],"./Katzenmilch.json":[81240,1240],"./Kuroir Theme.json":[4388,4388],"./LAZY.json":[25164,5164],"./MagicWB (Amiga).json":[76443,6443],"./Merbivore Soft.json":[99361,9361],"./Merbivore.json":[86042,6042],"./Monokai Bright.json":[14883,4883],"./Monokai.json":[34454,4454],"./Night Owl.json":[60261,261],"./Nord.json":[59785,9785],"./Oceanic Next.json":[58920,8920],"./Pastels on Dark.json":[38901,8901],"./Slush and Poppies.json":[26434,6434],"./Solarized-dark.json":[36116,6116],"./Solarized-light.json":[5008,5008],"./SpaceCadet.json":[20440,440],"./Sunburst.json":[68018,8018],"./Textmate (Mac Classic).json":[15824,5824],"./Tomorrow-Night-Blue.json":[81150,1150],"./Tomorrow-Night-Bright.json":[8762,8762],"./Tomorrow-Night-Eighties.json":[82545,2545],"./Tomorrow-Night.json":[99855,9855],"./Tomorrow.json":[34092,4092],"./Twilight.json":[93898,3898],"./Upstream Sunburst.json":[98807,8807],"./Vibrant Ink.json":[89927,9927],"./Xcode_default.json":[64042,4042],"./Zenburnesque.json":[33467,3467],"./iPlastic.json":[88277,8277],"./idleFingers.json":[5104,5104],"./krTheme.json":[9633,9633],"./monoindustrial.json":[15729,5729],"./themelist.json":[79437,9437]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t.t(o,19)}))}o.keys=function(){return Object.keys(r)},o.id=7432,e.exports=o},9041:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return $l}});var r,o,i,c,l=t(77837),u=t(77555),a=t(12757),s=t(82394),d=t(38860),f=t.n(d),p=t(56085),h=t(82684),m=t(83455),v=t(34376);!function(e){e.PYTHON="python",e.SQL="sql"}(i||(i={})),function(e){e.CHART="chart",e.DATA_EXPORTER="data_exporter",e.DATA_LOADER="data_loader",e.SCRATCHPAD="scratchpad",e.TRANSFORMER="transformer"}(c||(c={}));var g,b=[c.CHART,c.DATA_EXPORTER,c.DATA_LOADER,c.SCRATCHPAD,c.TRANSFORMER],x=[c.CHART,c.SCRATCHPAD];!function(e){e.EXECUTED="executed",e.FAILED="failed",e.NOT_EXECUTED="not_executed",e.UPDATED="updated"}(g||(g={}));var y=(r={},(0,s.Z)(r,c.DATA_EXPORTER,"Data exporter"),(0,s.Z)(r,c.DATA_LOADER,"Data loader"),(0,s.Z)(r,c.SCRATCHPAD,"Scratchpad"),(0,s.Z)(r,c.TRANSFORMER,"Transformer"),r),j=[c.DATA_LOADER,c.TRANSFORMER,c.DATA_EXPORTER],k=(o={},(0,s.Z)(o,c.DATA_EXPORTER,"DE"),(0,s.Z)(o,c.DATA_LOADER,"DL"),(0,s.Z)(o,c.SCRATCHPAD,"SP"),(0,s.Z)(o,c.TRANSFORMER,"TF"),t(67971)),O=t(46313),C=t(19711),w=t(23831),Z=t(73942),_=t(28598),P=(0,O.css)(["min-width:18px;padding-left:2px;padding-right:2px;"," "," "," "," "," ",""],(function(e){return!e.disabled&&"\n    background-color: ".concat((e.theme.content||w.Z.content).inverted,";\n  ")}),(function(e){return e.disabled&&"\n    // background-color: ".concat((e.theme.monotone||w.Z.monotone).grey400," !important;\n  ")}),(function(e){return e.mutedDisabled&&"\n    opacity: 0.3;\n  "}),(function(e){return!e.borderless&&"\n    box-shadow: ".concat((e.theme.shadow||w.Z.shadow).tiny,";\n    padding-bottom: 3px;\n    padding-top: 3px;\n  ")}),(function(e){return e.borderless&&"\n    border-radius: ".concat(Z.BG,"px;\n    padding-bottom: 4px;\n    padding-top: 4px;\n  ")}),(function(e){return e.spacingLeft&&"\n    margin-left: ".concat(e.spacingLeft,"px;\n  ")})),S=O.default.kbd.withConfig({displayName:"KeyboardText__KbdStyle",componentId:"sc-18540m4-0"})(["",""],P),E=O.default.div.withConfig({displayName:"KeyboardText__DivStyle",componentId:"sc-18540m4-1"})(["",""],P);var I=function(e){var n=e.borderless,t=e.disabled,r=e.inline,o=e.keyText,i=e.monospace,c=e.mutedDisabled,l=e.spacingLeft,u=r?E:S,a=(0,h.useContext)(O.ThemeContext),s={};if(!n){var d,f;if(t)s.borderColor=null===(d=(null===a||void 0===a?void 0:a.monotone)||w.Z.monotone)||void 0===d?void 0:d.grey400;else s.borderColor=null===(f=(null===a||void 0===a?void 0:a.content)||w.Z.content)||void 0===f?void 0:f.active;s.borderRadius=Z.BG,s.borderStyle="solid",s.borderWidth=1,s.overflow="hidden"}return(0,_.jsx)(C.ZP,{center:!0,inline:!0,monospace:i,muted:t||c,style:s,xsmall:!0,children:(0,_.jsx)(u,{borderless:n,disabled:t,mutedDisabled:c,spacingLeft:l,children:o})})},T=t(49125),A=O.default.div.withConfig({displayName:"KeyboardTextGroup__SpacingStyle",componentId:"sc-1bx41p7-0"})([""," "," ",""],(function(e){return e.small&&"\n    margin-left: ".concat(.25*T.iI,"px;\n  ")}),(function(e){return!e.small&&"\n    margin-left: ".concat(.25*T.iI,"px;\n  ")}),(function(e){return e.marginRight&&"\n    margin-right: ".concat(.25*T.iI,"px;\n  ")}));var R=function(e){var n=e.borderless,t=e.disabled,r=e.keyTextGroups,o=e.inline,i=e.monospace,c=e.mutedDisabled,l=e.small,u=e.uuidForKey,a=[],s=[];return r.forEach((function(e,r){var o=[];e.forEach((function(e,r){s.push(e),r>=1&&o.push((0,_.jsx)(A,{small:l},"spacing-".concat(e))),o.push((0,_.jsx)(I,{borderless:n,disabled:t,inline:!0,keyText:e,monospace:i,mutedDisabled:c},"key-".concat(s.join("-"),"-").concat(u)))})),r>=1&&a.push((0,_.jsx)(A,{marginRight:!0,children:(0,_.jsx)(C.ZP,{monospace:i,muted:!0,small:!l,xsmall:l,children:"then"})},"then-".concat(r))),a.push.apply(a,o)})),(0,_.jsx)(k.Z,{alignItems:"center",inline:o,children:a})},D=t(86673),M=t(10503),F=O.default.div.withConfig({displayName:"indexstyle__FlyoutMenuContainerStyle",componentId:"sc-1o7k6f4-0"})(["position:absolute;max-height:","px;"," ",""],58*T.iI,(function(e){return e.width&&"\n    min-width: 0px;\n    width: ".concat(e.width,"px;\n  ")}),(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||w.Z.shadow).popup,";\n\n    &:hover {\n      background-color: ").concat((e.theme.interactive||w.Z.interactive).hoverBackground,";\n    }\n  ")})),B=O.default.div.withConfig({displayName:"indexstyle__TitleContainerStyle",componentId:"sc-1o7k6f4-1"})(["padding:","px;padding-bottom:0;",""],T.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).popup,";\n  ")})),N=O.default.div.withConfig({displayName:"indexstyle__LinkStyle",componentId:"sc-1o7k6f4-2"})(["align-items:center;justify-content:space-between;padding:","px;"," "," "," "," ",""],T.iI,(function(e){return!e.disabled&&"  \n    &:hover {\n      cursor: default;\n      background-color: ".concat((e.theme.interactive||w.Z.interactive).hoverBackground,";\n    }\n  ")}),(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).popup,";\n  ")}),(function(e){return e.disabled&&"\n    color: ".concat((e.theme.content||w.Z.content).disabled,";\n    cursor: not-allowed;\n\n    &:hover {\n      color: ").concat((e.theme.content||w.Z.content).disabled,";\n    }\n  ")}),(function(e){return e.indent&&"\n    padding-left: ".concat(2*T.iI,"px;\n  ")}),(function(e){return e.highlighted&&"\n    background-color: ".concat((e.theme.interactive||w.Z.interactive).hoverBackground,";\n  ")})),H=t(16115);function L(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}var z=t(41150);function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Q,G=function(e){var n,t,r=e.items,o=e.left,i=e.onClickCallback,c=e.open,l=e.parentRef,u=e.rightOffset,a=e.topOffset,d=void 0===a?0:a,f=e.uuid,p=e.width,m=(0,h.useState)([]),v=m[0],g=m[1],b=(0,h.useState)({}),x=b[0],y=b[1],j=(0,h.useState)(0),O=j[0],w=j[1],Z=(0,h.useState)(0),P=Z[0],S=Z[1],E=((null===l||void 0===l||null===(n=l.current)||void 0===n||null===(t=n.getBoundingClientRect)||void 0===t?void 0:t.call(n))||{}).height,I=(0,h.useRef)({}),T=(0,h.useRef)(null),A=(0,z.y)(),U=A.registerOnKeyDown,Q=A.unregisterOnKeyDown;return(0,h.useEffect)((function(){return function(){Q(f)}}),[Q,f]),U(f,(function(e,n,t){if(c){var o=v[0];if(n[H.kD])L(e),"undefined"===typeof o||o===r.length-1?g([0]):g([o+1]);else if(n[H.Bu])L(e),g("undefined"===typeof o||0===o?[r.length-1]:[o-1]);else if(n[H.Uq]&&"undefined"!==typeof o){var l,u;null===(l=r[o])||void 0===l||null===(u=l.onClick)||void 0===u||u.call(l),null===i||void 0===i||i()}else null===r||void 0===r||r.forEach((function(e){var r=e.keyboardShortcutValidation;null===r||void 0===r||r({keyHistory:t,keyMapping:n})}))}}),[v,r,i,c,g]),(0,h.useEffect)((function(){c||g([])}),[c]),r?function e(n,t,r){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4?arguments[4]:void 0;return c+=1,(0,_.jsx)(F,{style:{display:r||x[t]?null:"none",left:"undefined"===typeof u&&(1===c?o||0:"100%"),right:1===c?u:null,top:1===c?(E||0)+d:(2===c?O:P)||0},width:p,children:null===n||void 0===n?void 0:n.map((function(n,t){var r=n.disabled,o=n.items,u=n.indent,a=n.isGroupingTitle,d=n.keyTextGroups,f=n.label,p=n.onClick,m=n.uuid;return l.current[m]=(0,h.createRef)(),a?(0,_.jsx)(B,{children:(0,_.jsx)(C.ZP,{bold:!0,muted:!0,noWrapping:!0,children:f()},m)}):(0,_.jsxs)(N,{disabled:r,highlighted:v[0]===t,indent:u,onClick:function(e){e.preventDefault(),p&&!r&&(null===p||void 0===p||p(),null===i||void 0===i||i())},onMouseEnter:function(){var e,n;if(y((function(e){return W(W({},e),{},(0,s.Z)({},m,!0))})),1===c)w((null===(e=l.current[m])||void 0===e||null===(n=e.current)||void 0===n?void 0:n.offsetTop)||0);else if(2===c){var t,r;S((null===(t=l.current[m])||void 0===t||null===(r=t.current)||void 0===r?void 0:r.offsetTop)||0)}},onMouseLeave:function(){y((function(e){return W(W({},e),{},(0,s.Z)({},m,!1))}))},ref:l.current[m],children:[(0,_.jsxs)(k.Z,{alignItems:"center",fullWidth:!0,justifyContent:"space-between",children:[(0,_.jsx)(C.ZP,{disabled:r,noWrapping:!0,children:f()}),o&&(0,_.jsx)(D.Z,{ml:2,children:(0,_.jsx)(M.ol,{})}),d&&(0,_.jsx)(D.Z,{ml:4,ref:T,children:(0,_.jsx)(R,{keyTextGroups:d})})]}),o&&e(o,m,!1,c,l)]},m)}))})}(r,void 0,c,0,I):null},V="buckets",K="chart_style",Y="group_by",q="height",X="index",J="legend_labels",$="limit",ee="metrics",ne="time_interval",te="width_percentage",re="x",oe="y",ie="y_sort_order",ce="data_provider",le="data_provider_profile",ue="data_provider_schema",ae=[re,oe];!function(e){e.BAR_CHART="bar chart",e.HISTOGRAM="histogram",e.LINE_CHART="line chart",e.PIE_CHART="pie chart",e.TABLE="table",e.TIME_SERIES_BAR_CHART="time series bar chart",e.TIME_SERIES_LINE_CHART="time series line chart"}(Q||(Q={}));var se,de,fe=[Q.BAR_CHART,Q.HISTOGRAM,Q.LINE_CHART,Q.PIE_CHART,Q.TABLE,Q.TIME_SERIES_BAR_CHART,Q.TIME_SERIES_LINE_CHART];!function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(se||(se={})),function(e){e.AVERAGE="average",e.COUNT="count",e.COUNT_DISTINCT="count_distinct",e.MAX="max",e.MEDIAN="median",e.MIN="min",e.MODE="mode",e.SUM="sum"}(de||(de={}));var pe,he,me,ve,ge,be,xe,ye,je,ke=[de.AVERAGE,de.COUNT,de.COUNT_DISTINCT,de.MAX,de.MEDIAN,de.MIN,de.MODE,de.SUM];!function(e){e.ASCENDING="ascending",e.DESCENDING="descending"}(pe||(pe={})),function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.MONTH="month",e.ORIGINAL="original",e.SECOND="second",e.WEEK="week",e.YEAR="year"}(he||(he={})),function(e){e.COLUMNS="columns",e.METRICS="metrics",e.NUMBER="number"}(je||(je={}));var Oe={noCode:[{label:function(){return"time column"},settings:{maxValues:1},type:je.COLUMNS,uuid:Y},{label:function(){return"time interval"},options:[he.ORIGINAL,he.SECOND,he.MINUTE,he.HOUR,he.DAY,he.WEEK,he.MONTH,he.YEAR],uuid:ne},{label:function(){return"metrics"},type:je.METRICS,uuid:ee}]},Ce=(me={},(0,s.Z)(me,Q.BAR_CHART,{noCode:[{label:function(){return"group by columns"},type:je.COLUMNS,uuid:Y},{label:function(){return"metrics"},type:je.METRICS,uuid:ee},{autoRun:!0,label:function(){return"chart style"},options:[se.HORIZONTAL,se.VERTICAL],uuid:K},{autoRun:!0,label:function(){return"sort direction"},options:[null,pe.ASCENDING,pe.DESCENDING],uuid:ie}],code:[{label:function(){return"variable name of x-axis values"},monospace:!0,uuid:re},{label:function(){return"variable name of y-axis values"},monospace:!0,uuid:oe}]}),(0,s.Z)(me,Q.HISTOGRAM,{noCode:[{label:function(){return"number column for chart"},settings:{maxValues:1},type:je.COLUMNS,uuid:Y},{autoRun:!0,label:function(){return"Number of buckets"},type:je.NUMBER,uuid:V}],code:[{label:function(){return"variable name of values"},monospace:!0,uuid:re}]}),(0,s.Z)(me,Q.LINE_CHART,{noCode:[{label:function(){return"group by columns"},settings:{maxValues:1},type:je.COLUMNS,uuid:Y},{label:function(){return"metrics"},type:je.METRICS,uuid:ee}],code:[{label:function(){return"variable name of x-axis values"},monospace:!0,uuid:re},{label:function(){return"variable name of y-axis values"},monospace:!0,uuid:oe},{label:function(){return"labels of lines in chart (comma separated)"},uuid:J}]}),(0,s.Z)(me,Q.PIE_CHART,{noCode:[{label:function(){return"column for chart"},settings:{maxValues:1},type:je.COLUMNS,uuid:Y},{autoRun:!0,label:function(){return"Number of slices"},type:je.NUMBER,uuid:V}],code:[{label:function(){return"variable name of values"},monospace:!0,uuid:re}]}),(0,s.Z)(me,Q.TABLE,{noCode:[{label:function(){return"columns"},type:je.COLUMNS,uuid:Y},{label:function(){return"max number of rows"},type:je.NUMBER,uuid:$}],code:[{label:function(){return"variable name of columns"},monospace:!0,uuid:re},{label:function(){return"variable name of rows"},monospace:!0,uuid:oe}]}),(0,s.Z)(me,Q.TIME_SERIES_BAR_CHART,Oe),(0,s.Z)(me,Q.TIME_SERIES_LINE_CHART,Oe),me),we=(ve={},(0,s.Z)(ve,Q.BAR_CHART,{configuration:function(e){var n;return n={},(0,s.Z)(n,re,"x"),(0,s.Z)(n,oe,"y"),(0,s.Z)(n,K,se.VERTICAL),n},content:function(e){return"columns = df_1.columns\nx = df_1.columns[:7]\ny = [[v] for v in [len(df_1[col].unique()) for col in x]]\n"}}),(0,s.Z)(ve,Q.HISTOGRAM,{configuration:function(e){var n;return n={},(0,s.Z)(n,V,10),(0,s.Z)(n,re,"x"),n},content:function(e){return"columns = df_1.columns\ncol = list(filter(lambda x: df_1[x].dtype == float or df_1[x].dtype == int, columns))[0]\nx = df_1[col]\n"}}),(0,s.Z)(ve,Q.LINE_CHART,{configuration:function(e){var n;return n={},(0,s.Z)(n,re,"x"),(0,s.Z)(n,oe,"y"),n},content:function(e){return"columns = df_1.columns\ncols = list(filter(lambda x: df_1[x].dtype == float or df_1[x].dtype == int, columns))\nx = df_1[cols[0]]\ny = [df_1[cols[1]]]\n"}}),(0,s.Z)(ve,Q.PIE_CHART,{configuration:function(e){var n;return n={},(0,s.Z)(n,V,7),(0,s.Z)(n,re,"x"),n},content:function(e){return"x = df_1[df_1.columns[0]]"}}),(0,s.Z)(ve,Q.TABLE,{configuration:function(e){var n;return n={},(0,s.Z)(n,$,10),(0,s.Z)(n,re,"x"),(0,s.Z)(n,oe,"y"),n},content:function(e){return"x = df_1.columns\ny = df_1.to_numpy()"}}),(0,s.Z)(ve,Q.TIME_SERIES_BAR_CHART,{configuration:function(e){return(0,s.Z)({},ne,he.ORIGINAL)}}),(0,s.Z)(ve,Q.TIME_SERIES_LINE_CHART,{configuration:function(e){return(0,s.Z)({},ne,he.ORIGINAL)}}),ve),Ze=(ye={},(0,s.Z)(ye,Q.BAR_CHART,(ge={},(0,s.Z)(ge,re,(function(){return"must be a list of booleans, dates, integers, floats, or strings."})),(0,s.Z)(ge,oe,(function(){return"must be a list of lists containing integers or floats."})),ge)),(0,s.Z)(ye,Q.HISTOGRAM,(0,s.Z)({},re,(function(){return"must be a list of integers or floats."}))),(0,s.Z)(ye,Q.LINE_CHART,(be={},(0,s.Z)(be,re,(function(){return"must be a list of integers or floats."})),(0,s.Z)(be,oe,(function(){return"must be a list of lists containing integers or floats. Each list is a single line in the chart."})),be)),(0,s.Z)(ye,Q.PIE_CHART,(0,s.Z)({},re,(function(){return"must be a list of booleans, dates, integers, floats, or strings."}))),(0,s.Z)(ye,Q.TABLE,(xe={},(0,s.Z)(xe,re,(function(){return"must be a list of strings."})),(0,s.Z)(xe,oe,(function(){return"must be a list of lists containing booleans, dates, integers, floats, or strings."})),xe)),ye),_e=[{label:function(){return"% of missing values"},widgetTemplate:function(e){var n,t=e.block;return{name:"missing values for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(n={},(0,s.Z)(n,re,"columns_with_mising_values"),(0,s.Z)(n,oe,"percentage_of_missing_values"),(0,s.Z)(n,K,se.HORIZONTAL),(0,s.Z)(n,ie,pe.DESCENDING),(0,s.Z)(n,"chart_type",Q.BAR_CHART),n),content:"number_of_rows = len(df_1.index)\ncolumns_with_mising_values = []\npercentage_of_missing_values = []\nfor col in df_1.columns:\n    missing = df_1[col].isna().sum()\n    if missing > 0:\n        columns_with_mising_values.append(col)\n        percentage_of_missing_values.append(100 * missing / number_of_rows)\n"}}},{label:function(){return"Unique values"},widgetTemplate:function(e){var n,t=e.block;return{name:"unique values for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(n={},(0,s.Z)(n,re,"columns"),(0,s.Z)(n,oe,"number_of_unique_values"),(0,s.Z)(n,K,se.HORIZONTAL),(0,s.Z)(n,ie,pe.DESCENDING),(0,s.Z)(n,"chart_type",Q.BAR_CHART),n),content:"columns = df_1.columns\nnumber_of_unique_values = [df_1[col].nunique() for col in columns]\n"}}},{label:function(){return"Most frequent values"},widgetTemplate:function(e){var n,t=e.block;return{name:"most frequent values for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(n={},(0,s.Z)(n,q,3e3),(0,s.Z)(n,X,"column_index"),(0,s.Z)(n,re,"columns"),(0,s.Z)(n,oe,"rows"),(0,s.Z)(n,"chart_type",Q.TABLE),n),content:"columns = ['mode value', 'frequency', '% of values']\n\ncolumn_index = []\nrows = []\nfor col in df_1.columns:\n    value_counts = df_1[col].value_counts()\n    if len(value_counts.index) == 0:\n        continue\n    column_value = value_counts.index[0]\n    value = value_counts[column_value]\n    number_of_rows = df_1[col].count()\n    column_index.append(col)\n    rows.append([\n        column_value,\n        f'{round(100 * value / number_of_rows, 2)}%',\n        value,\n      ])\n"}}},{label:function(){return"Summary overview"},widgetTemplate:function(e){var n,t=e.block;return{name:"summary overview for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(n={},(0,s.Z)(n,q,3e3),(0,s.Z)(n,X,"stats"),(0,s.Z)(n,re,"headers"),(0,s.Z)(n,oe,"rows"),(0,s.Z)(n,"chart_type",Q.TABLE),n),content:"from mage_ai.data_cleaner.column_types.column_type_detector import infer_column_types\n\n\nheaders = ['value']\nstats = ['Columns', 'Rows']\nrows = [[len(df_1.columns)], [len(df_1.index)]]\n\ncol_counts = {}\nfor col, col_type in infer_column_types(df_1).items():\n    col_type_name = col_type.value\n    if not col_counts.get(col_type_name):\n        col_counts[col_type_name] = 0\n    col_counts[col_type_name] += 1\n\nfor col_type, count in sorted(col_counts.items()):\n    stats.append(f'# of {col_type}')\n    rows.append([count])\n"}}},{label:function(){return"Feature profiles"},widgetTemplate:function(e){var n,t=e.block;return{name:"feature profiles for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(n={},(0,s.Z)(n,q,3e3),(0,s.Z)(n,X,"stats"),(0,s.Z)(n,re,"columns"),(0,s.Z)(n,oe,"rows"),(0,s.Z)(n,"chart_type",Q.TABLE),n),content:"from mage_ai.data_cleaner.column_types.column_type_detector import infer_column_types\nimport statistics\n\n\ncolumns_and_types = infer_column_types(df_1).items()\ncolumns = [t[0] for t in columns_and_types]\nstats = ['Type', 'Missing values', 'Unique values', 'Min', 'Max', 'Mean', 'Median', 'Mode']\nrows = [[] for _ in stats]\n\nfor col, col_type in columns_and_types:\n    series = df_1[col]\n    min_value = None\n    max_value = None\n    mean = None\n    median = None\n\n    not_null = series[series.notnull()]\n\n    if col_type.value in ['number', 'number_with_decimals']:\n        count = len(not_null.index)\n        if count >= 1:\n            mean = round(not_null.sum() / count, 2)\n            median = sorted(not_null)[int(count / 2)]\n        min_value = round(series.min(), 2)\n        max_value = round(series.max(), 2)\n    else:\n        min_value = not_null.astype(str).min()\n        max_value = not_null.astype(str).max()\n\n    _, mode = sorted(\n      [(v, k) for k, v in not_null.value_counts().items()],\n      reverse=True,\n    )[0]\n\n    for idx, value in enumerate([\n        col_type.value,\n        len(series[series.isna()].index),\n        len(series.unique()),\n        min_value,\n        max_value,\n        mean,\n        median,\n        mode,\n    ]):\n      rows[idx].append(value)\n"}}}],Pe=t(5679);function Se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ie=function(e){var n=e.addWidget,t=e.block,r=e.left,o=e.rightOffset,l=e.onClickCallback,a=e.open,s=e.parentRef,d=e.runBlock,f=e.topOffset,p=(0,h.useMemo)((function(){return fe.map((function(e){var r,o,l={configuration:{chart_type:e},language:t.language,type:c.CHART,upstream_blocks:t?[t.uuid]:null},u=we[e],a=(null===u||void 0===u||null===(r=u.configuration)||void 0===r?void 0:r.call(u,l))||{},s=i.SQL===(null===t||void 0===t?void 0:t.language)?null:(null===u||void 0===u||null===(o=u.content)||void 0===o?void 0:o.call(u,l))||null,f=e;return t&&(f="".concat(f," for ").concat(t.uuid)),{label:function(){return(0,Pe.vg)(e)},onClick:function(){return n(Ee(Ee({},l),{},{name:"".concat(f," ").concat((0,Pe.Mp)()),configuration:Ee(Ee({},l.configuration),a),content:s}),{onCreateCallback:function(e){t&&i.SQL!==t.language&&([g.EXECUTED,g.UPDATED].includes(t.status)?d({block:e,code:s,disableReset:!0}):d({block:t,runDownstream:!0}))}})},uuid:e}}))}),[fe,t,d]),m=(0,h.useMemo)((function(){return _e.map((function(e){var r=e.label,o=Ee(Ee({},(0,e.widgetTemplate)({block:t})),{},{language:t.language,type:c.CHART,upstream_blocks:t?[t.uuid]:null});return{label:r,onClick:function(){return n(o,{onCreateCallback:function(e){t&&i.SQL!==t.language&&([g.EXECUTED,g.UPDATED].includes(t.status)?d({block:e,code:e.content,disableReset:!0}):d({block:t,runDownstream:!0}))}})},uuid:r()}}))}),[_e,n,t,d]),v=[{isGroupingTitle:!0,label:function(){return"Custom charts"},uuid:"custom_charts"}].concat((0,u.Z)(p));return i.SQL!==t.language&&v.push.apply(v,[{isGroupingTitle:!0,label:function(){return"Templates"},uuid:"chart_templates"}].concat((0,u.Z)(m))),(0,_.jsx)(G,{items:v,left:r,onClickCallback:l,open:a,parentRef:s,rightOffset:o,topOffset:f,uuid:"CommandButtons/add_charts",width:25*T.iI})},Te=t(60328),Ae=t(47999),Re=t(26304),De=t(93461),Me=["children"];function Fe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Be(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Fe(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ne=O.default.div.withConfig({displayName:"Circle__CircleStyle",componentId:"sc-1o70504-0"})([""," "," "," "," "," "," ",""],(function(e){return!e.square&&"\n    border-radius: 50%;\n  "}),(function(e){return e.square&&"\n    border-radius: ".concat(Z.BG,"px;\n  ")}),(function(e){return!e.color&&!(e.borderSize||e.borderColor)&&"\n    background-color: ".concat((e.theme.content||w.Z.content).muted,";\n  ")}),(function(e){return(e.borderSize||e.borderColor)&&"\n    border: ".concat(e.borderSize||1,"px solid ").concat(e.borderColor||(e.theme.content||w.Z.content).active,";\n  ")}),(function(e){return e.color&&"\n    background-color: ".concat(e.color,";\n  ")}),(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n    width: ").concat(e.size,"px;\n  ")}),(function(e){return e.danger&&"\n    background-color: ".concat((e.theme.borders||w.Z.borders).danger,";\n  ")}));var He,Le,ze=function(e){var n=e.children,t=(0,Re.Z)(e,Me);return(0,_.jsx)(Ne,Be(Be({},t),{},{children:(0,_.jsx)(k.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,justifyContent:"center",children:n&&(0,_.jsx)(De.Z,{children:n})})}))};!function(e){e.PY="py",e.SQL="sql",e.TXT="txt",e.YAML="yaml",e.YML="yml"}(Le||(Le={}));var Ue,We,Qe=[Le.SQL,Le.TXT,Le.YAML,Le.YML],Ge=new RegExp(Qe.map((function(e){return".".concat(e,"$")})).join("|")),Ve="charts",Ke="pipelines",Ye=(He={},(0,s.Z)(He,Le.PY,i.PYTHON),(0,s.Z)(He,Le.SQL,i.SQL),(0,s.Z)(He,Le.TXT,"text"),(0,s.Z)(He,Le.YAML,"yaml"),(0,s.Z)(He,Le.YML,"yaml"),He),qe=1.5*T.iI,Xe=1*qe+T.iI/2,Je=O.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-uvd91-0"})([".row:hover{","}"],(function(e){return"\n      background-color: ".concat((e.theme.interactive||w.Z.interactive).hoverBackground,";\n    ")})),$e=function(e){return e.at(-1)},en=function(e){return e.at(-2).slice(0,-1)},nn=function(e){return $e(e).split(".")[0]};!function(e){e.DATA_LOADERS="data_loaders",e.DATA_EXPORTERS="data_exporters",e.GLOBAL_VARIABLES="global_variables",e.PIPELINES="pipelines",e.SCRATCHPADS="scratchpads",e.TRANSFORMERS="transformers"}(Ue||(Ue={})),function(e){e.INIT_PY="__init__.py"}(We||(We={}));var tn,rn,on="sideview";!function(e){e.CHARTS="charts",e.DATA="data",e.GRAPHS="graphs",e.REPORTS="reports",e.TREE="tree",e.VARIABLES="variables"}(rn||(rn={}));var cn=[rn.CHARTS,rn.DATA,rn.REPORTS,rn.TREE],ln=[rn.DATA,rn.REPORTS,rn.GRAPHS],un=[{key:rn.TREE,label:"Tree"},{key:rn.CHARTS,label:"Charts"},{key:rn.VARIABLES,label:"Variables"},{key:rn.DATA,label:"Data"}],an=(tn={},(0,s.Z)(tn,rn.CHARTS,M.er),(0,s.Z)(tn,rn.DATA,M.t1),(0,s.Z)(tn,rn.GRAPHS,M.er),(0,s.Z)(tn,rn.REPORTS,M.Do),(0,s.Z)(tn,rn.TREE,M.BJ),(0,s.Z)(tn,rn.VARIABLES,M.KJ),tn),sn=t(91427),dn=t(90880);function fn(e,n){var t=(n.theme.borders||w.Z.borders).light,r=(n.theme.monotone||w.Z.monotone).grey500,o=n||{},i=o.isSelected,l=o.theme;return i?t=(l.content||w.Z.content).active:c.TRANSFORMER===e?(t=(l.accent||w.Z.accent).purple,r=(l.accent||w.Z.accent).purpleLight):c.DATA_EXPORTER===e?(t=(l.accent||w.Z.accent).yellow,r=(l.accent||w.Z.accent).yellowLight):c.DATA_LOADER===e?(t=(l.accent||w.Z.accent).blue,r=(l.accent||w.Z.accent).blueLight):c.SCRATCHPAD===e&&(t=(l.content||w.Z.content).default,r=(l.accent||w.Z.accent).contentDefaultTransparent),{accent:t,accentLight:r}}var pn=(0,O.css)([""," "," "," ",""],(0,dn.eR)(),(function(e){return!e.selected&&!e.hasError&&"\n    border-color: ".concat(fn(e.blockType,e).accentLight,";\n  ")}),(function(e){return e.selected&&!e.hasError&&"\n    border-color: ".concat(fn(e.blockType,e).accent,";\n  ")}),(function(e){return e.selected&&e.hasError&&"\n    border-color: ".concat((e.theme.borders||w.Z.borders).danger,";\n  ")})),hn=O.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-s5rj34-0"})(["border-radius:","px;position:relative;"],Z.n_),mn=O.default.div.withConfig({displayName:"indexstyle__CodeContainerStyle",componentId:"sc-s5rj34-1"})([""," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;border-top-left-radius:","px;border-top-right-radius:","px;border-top-style:solid;border-top-width:2px;padding-bottom:","px;padding-top:","px;position:relative;"," "," .line-numbers{opacity:0;}&.selected{.line-numbers{opacity:1 !important;}}"],pn,Z.n_,Z.n_,T.iI,T.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).codeTextarea,";\n  ")}),(function(e){return!e.hasOutput&&"\n    border-bottom-left-radius: ".concat(Z.n_,"px;\n    border-bottom-right-radius: ").concat(Z.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n  ")})),vn=O.default.div.withConfig({displayName:"indexstyle__BlockDivider",componentId:"sc-s5rj34-2"})(["align-items:center;display:flex;height:","px;justify-content:center;position:relative;z-index:10;&:hover{.block-divider-inner{","}}"],2*T.iI,(function(e){return"\n        background-color: ".concat((e.theme.text||w.Z.text).fileBrowser,";\n      ")})),gn=O.default.div.withConfig({displayName:"indexstyle__BlockDividerInner",componentId:"sc-s5rj34-3"})(["height 1px;width:100%;position:absolute;z-index:-1;"]),bn=O.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-s5rj34-4"})(["margin-bottom:","px;padding-bottom:","px;padding-left:","px;",""],T.cd*T.iI,T.iI,68,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||w.Z.borders).medium,";\n  ")})),xn=O.default.div.withConfig({displayName:"indexstyle__TimeTrackerStyle",componentId:"sc-s5rj34-5"})(["bottom:","px;left:","px;position:absolute;"],1*T.iI,68);function yn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=n||(null===e||void 0===e?void 0:e.name);return null!==e&&void 0!==e&&e.parent?yn(e.parent,"".concat(e.parent.name,"/").concat(t)):t}function jn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=yn(e,n).split("/"),r=(0,Pe.C5)(t[1]),o=t[t.length-1],i=new RegExp(".".concat(Le.PY,"$"));if(b.includes(r)&&o.match(i))return{type:r,uuid:o.replace(i,"")}}var kn=t(24224);function On(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Cn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?On(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):On(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var wn,Zn=function e(n){var t,r=n.file,o=n.level,i=n.onSelectBlockFile,l=n.openFile,u=n.openPipeline,a=n.openSidekickView,s=n.setContextItem,d=n.theme,f=r.children,p=r.disabled,m=r.name,v=r.parent,g=p||"__init__.py"===m||!!m.match(/^\./),x=(null===v||void 0===v?void 0:v.name)===Ke,y=(0,h.useMemo)((function(){return x?null:f?(0,kn.YC)(f,(function(e){var n=e.children,t=e.name;return m===Ke?t:n?0:1})):f}),[f,x]),j="".concat(o,"/").concat(m),k=(0,h.useState)((0,sn.U2)(j,!1)),O=k[0],w=k[1],Z=M.iU;x&&!g||1===o&&m===Ke?Z=M.B_:m===Ve?Z=M.er:y&&(Z=M.gt),y&&b.includes((0,Pe.C5)(m))&&(0,Pe.C5)(m)!==c.CHART&&(t=fn((0,Pe.C5)(m),{theme:d}).accent);var P=(0,h.useMemo)((function(){return null===y||void 0===y?void 0:y.map((function(n){return(0,_.jsx)(e,{file:Cn(Cn({},n),{},{parent:r}),level:o+1,onSelectBlockFile:i,openFile:l,openPipeline:u,openSidekickView:a,setContextItem:s,theme:d},"".concat(j,"/").concat(n.name))}))}),[y,l,u]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"row",onClick:function(e){if(e.preventDefault(),!g){if((null===v||void 0===v?void 0:v.name)===Ve){a(rn.CHARTS);var n=jn(r);n&&i(n.uuid,n.type,yn(r).split("/").slice(1).join("/"))}if(x)u(m);else if(y)w((function(e){return(0,sn.t8)(j,!e),!e}));else if(m.match(Ge))l(yn(r).split("/").slice(1).join("/"));else{var t=jn(r);t&&i(t.uuid,t.type,yn(r).split("/").slice(1).join("/"))}}},onContextMenu:function(e){e.preventDefault(),g?s({type:wn.DISABLED}):x?s({data:{name:m},type:wn.PIPELINE}):y?s({type:wn.FOLDER}):m.match(Ge)||m===We.INIT_PY?s({type:wn.FILE}):s({data:{block:jn(r)},type:wn.BLOCK_FILE})},style:{alignItems:"center",cursor:"default",display:"flex",minWidth:o*Xe+r.name.length*T.Fo+2*T.iI,paddingBottom:T.iI/4,paddingLeft:T.iI/4+Xe*o,paddingRight:T.iI/4,paddingTop:T.iI/4},children:[y&&!O&&(0,_.jsx)(M._M,{muted:!0,size:qe}),y&&O&&(0,_.jsx)(M._Q,{muted:!0,size:qe}),!y&&(0,_.jsx)("div",{style:{width:qe}}),(0,_.jsxs)("div",{style:{marginLeft:T.iI/2,marginRight:T.iI/2},children:[!t&&(0,_.jsx)(Z,{disabled:g,size:qe}),t&&(0,_.jsx)(ze,{color:t,size:qe,square:!0})]}),(0,_.jsx)(C.ZP,{color:t,default:!t&&!g,disabled:g,monospace:!0,small:!0,children:m})]}),(0,_.jsx)("div",{style:{display:O?"none":"block"},children:P})]})},_n=["files"];function Pn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Sn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Pn(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function En(e,n){var t=e.files,r=(0,Re.Z)(e,_n),o=(0,h.useContext)(O.ThemeContext);return(0,_.jsx)(Je,{ref:n,children:null===t||void 0===t?void 0:t.map((function(e){return(0,h.createElement)(Zn,Sn(Sn({},r),{},{file:e,key:e.name,level:0,theme:o}))}))})}!function(e){e.BLOCK_FILE="block_file",e.DISABLED="disabled",e.FILE="file",e.FOLDER="folder",e.PIPELINE="pipeline"}(wn||(wn={}));var In,Tn=h.forwardRef(En),An=t(86585);!function(e){e.FILE_BROWSER="file_browser"}(In||(In={}));var Rn=O.default.div.withConfig({displayName:"ContextMenu__ContainerStyle",componentId:"sc-b9ha7f-0"})(["position:fixed;z-index:",";"," "," "," "," "," "," ",""],An.bf+100,(function(e){return"undefined"!==typeof e.left&&"\n    left: ".concat(e.left+5,"px;\n  ")}),(function(e){return"undefined"!==typeof e.right&&"\n    right: ".concat(e.right,"px;\n  ")}),(function(e){return"undefined"!==typeof e.top&&"\n    top: ".concat(e.top,"px;\n  ")}),(function(e){return"undefined"!==typeof e.bottom&&"\n    bottom: ".concat(e.bottom,"px;\n  ")}),(function(e){return"undefined"===typeof e.top&&"undefined"===typeof e.bottom&&"\n    top: ".concat(An.Mz-1*T.iI,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width,"px;\n  ")}),(function(e){return!e.width&&"\n    min-width: ".concat(33*T.iI,"px;\n  ")}));var Dn=function(e){var n,t=e.areaRef,r=e.children,o=e.createPipeline,i=e.deleteBlockFile,c=e.deletePipeline,l=e.enableContextItem,u=e.numPipelines,a=e.type,d=(0,h.useState)({x:0,y:0}),f=d[0],p=d[1],m=(0,h.useState)({}),v=m[0],g=m[1],b=(0,h.useState)(!1),x=b[0],y=b[1];(0,h.useEffect)((function(){return document.addEventListener("click",j),document.addEventListener("contextmenu",k),function(){document.addEventListener("click",j),document.removeEventListener("contextmenu",k)}}),[]);var j=(0,h.useCallback)((function(e){e.preventDefault(),y(!1)}),[y]),k=(0,h.useCallback)((function(e){t.current.contains(e.target)?(l||e.preventDefault(),p({x:e.pageX,y:e.pageY}),y(!0)):y(!1)}),[t,l,p,y]),O=(n={},(0,s.Z)(n,wn.BLOCK_FILE,[{label:function(){return"Delete"},onClick:function(){return i(v.data.block)},uuid:"delete_block_file"}]),(0,s.Z)(n,wn.PIPELINE,[{label:function(){return"Duplicate"},onClick:function(){return o({pipeline:{clone_pipeline_uuid:v.data.name,name:"".concat(v.data.name,"_copy")}})},uuid:"duplicate_pipeline"},{disabled:u<=1,label:function(){return"Delete"},onClick:function(){return c(v.data.name)},uuid:"delete_pipeline"}]),n);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Rn,{left:f.x,top:f.y,children:(0,_.jsx)(G,{items:O[l?v.type:a],open:x,parentRef:void 0,uuid:"ContextMenu"})}),h.Children.map(r,(function(e){return h.cloneElement(e,{setContextItem:g})}))]})},Mn=t(10919),Fn=O.default.div.withConfig({displayName:"indexstyle__ErrorPopupStyle",componentId:"sc-aqfw6f-0"})(["bottom:0;left:0;max-width:100vw;padding:","px;position:fixed;z-index:100;",""],T.iI*T.cd,(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).page,";\n    border-right: 1px solid ").concat((e.theme.accent||w.Z.accent).negative,";\n    border-top: 1px solid ").concat((e.theme.accent||w.Z.accent).negative,";\n  ")}));var Bn=function(e){var n=e.displayMessage,t=e.errors,r=e.onClose,o=e.response,i=(0,h.useState)(!1),c=i[0],l=i[1],u=t.messages,a=((null===o||void 0===o?void 0:o.error)||{}).errors;return(0,_.jsxs)(Fn,{children:[(0,_.jsx)(k.Z,{justifyContent:"flex-end",children:(0,_.jsx)(Te.Z,{iconOnly:!0,noBorder:!0,noPadding:!0,onClick:r,title:"Close errors",children:(0,_.jsx)(M.x8,{})})}),(0,_.jsxs)(D.Z,{mt:1,children:[(0,_.jsx)(C.ZP,{bold:!0,large:!0,children:"Error"}),n&&(0,_.jsx)(D.Z,{mt:1,children:(0,_.jsx)(C.ZP,{default:!0,children:n})}),(null===u||void 0===u?void 0:u.length)&&(0,_.jsx)(D.Z,{mt:1,children:u.map((function(e){return(0,_.jsx)(C.ZP,{default:!0,monospace:!0,dangerouslySetInnerHTML:{__html:e.replaceAll(" ","&nbsp;")}},e)}))})]}),a&&(0,_.jsxs)(D.Z,{mt:3,children:[(0,_.jsxs)(C.ZP,{bold:!0,large:!0,children:["Stack trace (",(0,_.jsxs)(Mn.Z,{muted:!0,onClick:function(){return l((function(e){return!e}))},preventDefault:!0,children:[c?"hide":"show"," stack trace"]}),")"]}),c&&(0,_.jsx)(D.Z,{mt:1,children:a.map((function(e){return(0,_.jsx)(C.ZP,{default:!0,monospace:!0,dangerouslySetInnerHTML:{__html:e.replaceAll(" ","&nbsp;")}},e)}))})]})]})},Nn=t(85202),Hn=t(38789),Ln=t(66166),zn="twilight",Un=t(2005),Wn=t(31012),Qn=O.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-w2hta3-0"})([""]),Gn=O.default.div.withConfig({displayName:"indexstyle__PlaceholderStyle",componentId:"sc-w2hta3-1"})(["padding-left:67px;position:absolute;z-index:1;"]);function Vn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Kn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Vn(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Yn(e){var n=function(e){var n="[\\w.]+",t=["import ".concat(n," as ").concat(n),"import ".concat(n),"from ".concat(n," import ").concat(n," as ").concat(n),"from ".concat(n," import ").concat(n)],r=new RegExp("(".concat(t.join("|"),")"),"g");return(0,u.Z)(e.matchAll(r)).map((function(e){return e[1]}))}(e),t="[\\w.]+",r=["from ".concat(t," import ").concat(t," as (").concat(t,")"),"from ".concat(t," import (").concat(t,")"),"import ".concat(t," as (").concat(t,")"),"import (".concat(t,")")],o=new RegExp("(".concat(r.join("|"),")"));return n.reduce((function(e,n){var t=n.match(o);if(!t)return e;var r=(0,u.Z)(t),i=r[2],c=r[3],l=r[4],a=r[5],d=i||c||l||a;return Kn(Kn({},e),{},(0,s.Z)({},d,n))}),{})}function qn(e,n){return function(e,n){return e.split("\n")[n.startLineNumber-1]}(e,n).slice(0,n.startColumn-1)}var Xn={"all-hallows-eve":"All Hallows Eve","birds-of-paradise":"Birds of Paradise","brilliance-black":"Brilliance Black","brilliance-dull":"Brilliance Dull","chrome-devtools":"Chrome DevTools","clouds-midnight":"Clouds Midnight","espresso-libre":"Espresso Libre","kuroir-theme":"Kuroir Theme","magicwb--amiga-":"MagicWB (Amiga)","merbivore-soft":"Merbivore Soft","monokai-bright":"Monokai Bright","night-owl":"Night Owl","oceanic-next":"Oceanic Next","pastels-on-dark":"Pastels on Dark","slush-and-poppies":"Slush and Poppies","solarized-dark":"Solarized-dark","solarized-light":"Solarized-light","textmate--mac-classic-":"Textmate (Mac Classic)","tomorrow-night":"Tomorrow-Night","tomorrow-night-blue":"Tomorrow-Night-Blue","tomorrow-night-bright":"Tomorrow-Night-Bright","tomorrow-night-eighties":"Tomorrow-Night-Eighties","upstream-sunburst":"Upstream Sunburst","vibrant-ink":"Vibrant Ink","xcode-default":"Xcode_default",active4d:"Active4D",amy:"Amy",blackboard:"Blackboard",clouds:"Clouds",cobalt:"Cobalt",dawn:"Dawn",dreamweaver:"Dreamweaver",eiffel:"Eiffel",github:"GitHub",idle:"IDLE",idlefingers:"idleFingers",iplastic:"iPlastic",katzenmilch:"Katzenmilch",krtheme:"krTheme",lazy:"LAZY",merbivore:"Merbivore",monoindustrial:"monoindustrial",monokai:"Monokai",spacecadet:"SpaceCadet",sunburst:"Sunburst",tomorrow:"Tomorrow",twilight:"Twilight",zenburnesque:"Zenburnesque"};var Jn=function(e){var n=e.autocompleteProviders,r=e.autoHeight,o=e.autoSave,i=e.fontSize,c=void 0===i?Wn.i3:i,l=e.height,u=e.language,s=e.onChange,d=e.onDidChangeCursorPosition,f=e.onSave,p=e.placeholder,m=e.selected,v=e.setSelected,g=e.setTextareaFocused,b=e.shortcuts,x=e.showLineNumbers,y=void 0===x||x,j=e.textareaFocused,k=e.theme,O=e.value,w=e.width,Z=void 0===w?"100%":w,P=(0,h.useRef)(null),S=(0,h.useRef)(null),E=(0,h.useRef)(null),I=(0,h.useState)([]),T=I[0],A=I[1],R=(0,h.useState)(null),D=R[0],M=R[1],F=(0,h.useState)(!1),B=F[0],N=F[1],H=(0,h.useState)(l),L=(H[0],H[1],(0,h.useState)(k||zn)),z=L[0],U=L[1],W=(0,h.useCallback)((function(e){e.languages.typescript.javascriptDefaults.setEagerModelSync(!0),M(e)}),[]),Q=(0,h.useCallback)((function(e,n){P.current=e,S.current=n;var t=[];null===b||void 0===b||b.forEach((function(r){t.push(r(n,e))})),f&&t.push(function(e,n){return{contextMenuGroupId:"navigation",contextMenuOrder:1.5,id:"saveCode",keybindingContext:null,keybindings:[e.KeyMod.CtrlCmd|e.KeyCode.KeyS],label:"Save",precondition:null,run:function(e){n()}}}(n,(function(){f(e.getValue())}))),function(e,n,t){t.forEach((function(e){n.addAction(e)}))}(0,e,t),e.getModel().updateOptions({tabSize:4}),r&&!l&&(e._domElement.style.height="".concat(function(e){return 21*(e.split("\n").length+2)}(O||""),"px")),e.onDidFocusEditorWidget((function(){null===v||void 0===v||v(!0),null===g||void 0===g||g(!0)})),e.onDidContentSizeChange((function(n){var t=n.contentHeight,o=n.contentHeightChanged;r&&o&&(e._domElement.style.height="".concat(t+42,"px"))})),m&&j&&setTimeout((function(){e.focus()}),1),d&&e.onDidChangeCursorPosition((function(n){var t=n.position.lineNumber,r=e._domElement.getBoundingClientRect(),o=r.height,i=r.top;d({editorRect:{height:Number(o),top:Number(i)},position:{lineNumber:Number(t)}})})),N(!0)}),[r,l,d,f,E.current,m,A,N,v,g,b,j,O]);(0,h.useEffect)((function(){(function(e){return new Promise((function(n){Promise.all([Hn._m.init(),t(7432)("./".concat(Xn[e],".json"))]).then((function(t){var r=(0,a.Z)(t,2),o=r[0],i=r[1];i.colors["editor.background"]="#000000",i.colors["editor.foreground"]="#FFFFFF",o.editor.defineTheme(e,i),n()}))}))})(zn).then((function(){U(zn)}))}),[]),(0,h.useEffect)((function(){var e;return o&&f&&(e=setInterval((function(){f(P.current.getValue())}),5e3)),function(){o&&e&&clearInterval(e)}}),[o,P,f]);var G=(0,Ln.Z)(m),V=(0,Ln.Z)(j);return(0,h.useEffect)((function(){null!==P&&void 0!==P&&P.current&&(m&&j?setTimeout((function(){P.current.focus()}),1):Nn.findDOMNode(P.current._domElement).getElementsByClassName("inputarea")[0].blur())}),[P,m,G,j,V]),(0,h.useEffect)((function(){return function(){T.map((function(e){return e.dispose()}))}}),[T]),(0,h.useEffect)((function(){D&&n&&(0===T.length&&j||!V&&j?A(function(e,n){return Object.entries(n).map((function(n){var t=(0,a.Z)(n,2),r=t[0],o=t[1];return e.languages.registerCompletionItemProvider(r,{provideCompletionItems:o(e)})}))}(D,n)):V&&!j&&T.map((function(e){return e.dispose()})))}),[n,T,D,j,V]),(0,_.jsxs)(Qn,{style:{display:B?null:"none"},children:[p&&!(null!==O&&void 0!==O&&O.length)&&(0,_.jsx)(Gn,{children:(0,_.jsx)(C.ZP,{monospace:!0,muted:!0,children:p})}),(0,_.jsx)(Hn.ZP,{beforeMount:W,height:l,language:u||"python",onChange:function(e){null===s||void 0===s||s(e)},onMount:Q,options:{fontFamily:Un.Vp,fontLigatures:!0,fontSize:c,hideCursorInOverviewRuler:!0,lineNumbers:y,minimap:{enabled:!1},overviewRulerBorder:!1,renderLineHighlightOnlyWhenFocus:!0,scrollBeyondLastLine:!1,scrollbar:{alwaysConsumeMouseWheel:!1,vertical:"hidden"},wordBasedSuggestions:!1},theme:z,value:O,width:Z}),(0,_.jsx)("div",{ref:E})]})},$n=t(12691),et=t.n($n),nt=t(39421),tt=t(56663),rt=t.n(tt),ot=t(66757),it=t.n(ot),ct=t(55361);var lt="current_group_id",ut="current_group",at="current_user";function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e){var n=rt()(e),t=n.current_group_id;return{id:t}}var r=it().get(ut),o=nt.Z.get(lt,ct.Hu);if(r&&o)return r}function dt(){return it().get(at)}function ft(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function pt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ft(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ft(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ht(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return pt(pt({},t),{},{groupId:null===(e=st())||void 0===e?void 0:e.id,id:null===(n=dt())||void 0===n?void 0:n.id})}var mt=t(86954);function vt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function gt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?vt(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function bt(){return[[mt.go,"initialAsPath"],[mt.iT,"initialPathname"],[mt.FT,"notificationTemplate"],[mt.Ll,"notificationUUID"],[mt.$m,"referringURL"]].reduce((function(e,n){var t=(0,a.Z)(n,2),r=t[0],o=t[1];return gt(gt({},e),{},(0,s.Z)({},o,nt.Z.get(r,mt.vZ)))}),{})}var xt=t(36283);function yt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function jt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?yt(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var kt="click",Ot="button";function Ct(e){var n,t,r=e.actionName,o=e.actionType,i=e.componentName,c=e.componentType,l=e.properties,u=e.screenName,a=(n=r||o,t=i||c,"".concat(u,".").concat(n,"_").concat(t)),s=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=bt(),o=(null!==t&&void 0!==t&&t.width,window.innerWidth);return jt(jt(jt({},t),r),{},{groupId:null===(e=st())||void 0===e?void 0:e.id,partner_id:"Mage",screenSize:(0,xt.Z3)(o),userId:null===(n=dt())||void 0===n?void 0:n.id})}(jt({actionType:o,componentType:c},l));return{eventProperties:s,eventType:a,userProperties:ht()}}function wt(e,n){null===e||void 0===e||e(n)}var Zt=function(e){var n=e.children;return e.eventProperties,e.userProperties,n((function(e){return!1}))};function _t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Pt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_t(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_t(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var St,Et,It=function(e){var n,t=e.buildChildren,r=e.disabled,o=e.eventActionName,i=void 0===o?kt:o,c=e.eventComponentName,l=void 0===c?Ot:c,u=e.eventProperties,a=void 0===u?{}:u,s=e.eventScreenName,d=void 0===s?"generic":s,f=e.keyboardShortcutValidation,p=e.linkProps,m=e.onClick,g=e.openNewTab,b=e.requireKeyUp,x=e.uuid,y=(0,v.useRouter)(),j=(0,z.y)(),k=j.registerOnKeyDown,O=j.registerOnKeyUp,C=j.unregisterOnKeyDown,w=j.unregisterOnKeyUp;(0,h.useEffect)((function(){return function(){var e=b?w:C;null===e||void 0===e||e(x)}}),[b,C,w,x]),r||!m&&!p||(n=function(e){null===m||void 0===m||m(e),p&&(g?(window.open(p.as||p.href),e.preventDefault()):y.push(p.href,p.as))});var Z=Ct({actionName:i,actionType:kt,componentName:l,componentType:Ot,properties:a,screenName:d}),P=Z.eventType,S=Z.eventProperties,E=Z.userProperties;return(0,_.jsx)(Zt,{eventProperties:S,userProperties:E,children:function(e){var r=e.logEvent;f&&n&&(b?O:k)(x,(function(e,t,o){f({keyHistory:o,keyMapping:t})&&(wt(r,P,{eventProperties:Pt(Pt({},S),{},{usedKeyboardShortcut:!0}),userProperties:E}),n(e))}),[S,P,r,n,E]);return t({eventProperties:S,eventType:P,logEvent:r,onClick:n,userProperties:E})}})},Tt={chatBubbleProps:null,graphicButtonProps:null,logoProps:null,mageImageUrl:null,mascotImageUrls:{base:null,castingSpell:null,chargingUp:null,thinking:null},sharedProps:null},At=h.createContext(Tt),Rt=At,Dt=t(54283),Mt=t(73899),Ft=["Icon","afterElement","beforeElement","bold","borderless","centerText","children","compact","disabled","fitContentWidth","inverted","keyTextGroups","keyTextsPosition","linkProps","loading","mutedDisabled","noHover","onClick","type","useModelTheme"];function Bt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Nt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Bt(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.LEFT="left",e.RIGHT="right"}(St||(St={})),function(e){e.BUTTON="button",e.SUBMIT="submit"}(Et||(Et={}));var Ht=(0,O.css)([""," align-items:center;border:none;display:flex;flex-direction:row;position:relative;text-align:left;z-index:0;"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ",""],(0,dn.eR)(),(function(e){return!e.large1&&!e.large2&&"\n    ".concat(Wn.iD,"\n  ")}),(function(e){return e.small&&"\n    ".concat(Wn.HC,"\n  ")}),(function(e){return e.large1&&"\n    ".concat(Wn.ln,"\n  ")}),(function(e){return e.large2&&"\n    ".concat(Wn.QU,"\n  ")}),(function(e){return!e.inline&&"\n    width: 100%;\n  "}),(function(e){return e.shortWidth&&"\n    min-width: ".concat(28*T.iI,"px;\n  ")}),(function(e){return!e.wrapText&&"\n    white-space: nowrap;\n  "}),(function(e){return!e.secondary&&"\n    font-family: ".concat(Un.ry,";\n    justify-content: space-between;\n  ")}),(function(e){return e.center&&"\n    justify-content: center;\n  "}),(function(e){return!e.noPadding&&!e.spacious&&!e.compact&&"\n    padding: ".concat(1.25*T.iI,"px ").concat(1.5*T.iI,"px;\n  ")}),(function(e){return e.compact&&"\n    padding: ".concat(.5*T.iI,"px ").concat(.75*T.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingTop&&"\n    padding-top: ".concat(.625*T.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingBottom&&"\n    padding-bottom: ".concat(.625*T.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingRight&&"\n    padding-right: ".concat(.75*T.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingLeft&&"\n    padding-left: ".concat(.75*T.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&!e.marketing&&"\n    padding: ".concat(2.25*T.iI,"px ").concat(3*T.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.marketing&&"\n    padding: ".concat(2.25*T.iI-2,"px ").concat(3*T.iI-2,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingTop&&"\n    padding-top: ".concat(1.125*T.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingBottom&&"\n    padding-bottom: ".concat(1.125*T.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingRight&&"\n    padding-right: ".concat(1.5*T.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingLeft&&"\n    padding-left: ".concat(1.5*T.iI,"px;\n  ")}),(function(e){return e.secondary&&"\n    flex-basis: content;\n    font-family: ".concat(Un.nF,";\n    padding: 0;\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.bold&&"\n    font-family: ".concat(Un.nF,";\n  ")}),(function(e){return!e.muted&&!e.inverted&&"\n    color: ".concat((e.theme.content||w.Z.content).active,";\n  ")}),(function(e){return!e.muted&&e.inverted&&"\n    color: ".concat((e.theme.content||w.Z.content).inverted,";\n  ")}),(function(e){return e.muted&&"\n    color: ".concat((e.theme.monotone||w.Z.monotone).grey300,";\n  ")}),(function(e){return e.warning&&"\n    color: ".concat((e.theme.brand||w.Z.brand).energy400,";\n  ")}),(function(e){return e.noHover&&"\n    &:hover {\n      cursor: default;\n    }\n  "}),(function(e){return e.blackBorder&&"\n    border: ".concat(Z.YF,"px ").concat(Z.M8," ").concat((e.theme.monotone||w.Z.monotone).black,";\n  ")}),(function(e){return!e.pill&&!e.borderless&&!e.compact&&"\n    border-radius: ".concat(Z.n_,"px;\n  ")}),(function(e){return e.compact&&"\n    border-radius: ".concat(Z.BG,"px;\n  ")}),(function(e){return!e.borderRadiusLeft&&!e.borderRadiusRight&&e.pill&&!e.spacious&&"\n    border-radius: ".concat(5*T.iI,"px;\n  ")}),(function(e){return e.borderRadiusLeft&&e.pill&&!e.spacious&&"\n    border-bottom-left-radius: ".concat(5*T.iI,"px;\n    border-top-left-radius: ").concat(5*T.iI,"px;\n  ")}),(function(e){return e.borderRadiusRight&&e.pill&&!e.spacious&&"\n    border-bottom-right-radius: ".concat(5*T.iI,"px;\n    border-top-right-radius: ").concat(5*T.iI,"px;\n  ")}),(function(e){return e.borderRadiusLeft&&e.pill&&e.spacious&&"\n    border-bottom-left-radius: ".concat(8*T.iI,"px;\n    border-top-left-radius: ").concat(8*T.iI,"px;\n  ")}),(function(e){return e.borderRadiusRight&&e.pill&&e.spacious&&"\n    border-bottom-right-radius: ".concat(8*T.iI,"px;\n    border-top-right-radius: ").concat(8*T.iI,"px;\n  ")}),(function(e){return e.inverted&&!e.noBackground&&!e.backgroundColor&&"\n    background-color: ".concat((e.theme.monotone||w.Z.monotone).black,";\n  ")}),(function(e){return!e.inverted&&!e.noBackground&&"\n    background-color: ".concat((e.theme.interactive||w.Z.interactive).defaultBackground,";\n\n    &:hover {\n      background-color: ").concat((e.theme.interactive||w.Z.interactive).hoverBackground,";\n    }\n  ")}),(function(e){return!e.noBackground&&e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")}),(function(e){return e.noBackground&&"\n    background-color: transparent !important;\n  "}),(function(e){return e.disabled&&e.inverted&&"\n    color: ".concat((e.theme.monotone||w.Z.monotone).grey400," !important;\n  ")}),(function(e){return e.disabled&&!e.inverted&&"\n    color: ".concat((e.theme.monotone||w.Z.monotone).grey300," !important;\n  ")}),(function(e){return e.disabled&&"\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.monotone||w.Z.monotone).black,";\n    color: ").concat((e.theme.monotone||w.Z.monotone).white,";\n  ")}),(function(e){return e.selected&&e.grey300&&"\n    background-color: ".concat((e.theme.monotone||w.Z.monotone).grey300,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.fire&&"\n    background-color: ".concat((e.theme.brand||w.Z.brand).fire400,";\n  ")}),(function(e){return e.useModelTheme&&"\n    color: ".concat((e.theme.monotone||w.Z.monotone).white,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.earth&&"\n    background-color: ".concat((e.theme.brand||w.Z.brand).earth400,";\n  ")}),(function(e){return e.primaryGradient&&"\n    background: ".concat(Mt.uH,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.wind&&"\n    background-color: ".concat((e.theme.brand||w.Z.brand).wind400,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.water&&"\n    background-color: ".concat((e.theme.brand||w.Z.brand).water400,";\n  ")}),(function(e){return e.withIcon&&"\n    padding: ".concat(1.25*T.iI-1,"px !important;\n  ")}),(function(e){return e.shadow&&"\n    box-shadow: ".concat((e.theme.shadow||w.Z.shadow).large,";\n  ")})),Lt=O.default.button.withConfig({displayName:"KeyboardShortcutButton__ButtonStyle",componentId:"sc-10tm4pj-0"})(["",""],Ht),zt=O.default.a.withConfig({displayName:"KeyboardShortcutButton__AnchorStyle",componentId:"sc-10tm4pj-1"})([""," ",""],Ht,Mn.R),Ut=O.default.span.withConfig({displayName:"KeyboardShortcutButton__SpanStyle",componentId:"sc-10tm4pj-2"})(["margin-right:","px;"],1*T.iI);var Wt=function(e){var n=e.Icon,t=e.afterElement,r=e.beforeElement,o=e.bold,i=e.borderless,c=e.centerText,l=e.children,u=e.compact,a=e.disabled,d=e.fitContentWidth,f=e.inverted,p=e.keyTextGroups,m=e.keyTextsPosition,v=void 0===m?St.RIGHT:m,g=e.linkProps,b=e.loading,x=e.mutedDisabled,y=e.noHover,j=e.onClick,k=e.type,O=void 0===k?Et.BUTTON:k,C=e.useModelTheme,w=(0,Re.Z)(e,Ft),Z=g||{},P=Z.as,S=Z.href,E=P||S?zt:Lt,I=(0,h.useMemo)((function(){if(!p)return null;var e=(0,s.Z)({},v===St.RIGHT?"ml":"mr",l?1:0);return(0,_.jsx)(D.Z,Nt(Nt({},e),{},{children:(0,_.jsx)(R,{borderless:f,disabled:a,keyTextGroups:p,mutedDisabled:x})}))}),[l,a,f,p,v,x]),A=((0,h.useContext)(Rt)||{}).sharedProps;return(0,_.jsx)(It,Nt(Nt({},w),{},{buildChildren:function(e){var s=e.eventProperties,p=e.eventType,h=e.logEvent,m=e.onClick,j=e.userProperties,k=(0,_.jsxs)(E,Nt(Nt(Nt({},w),C?A:{}),{},{bold:C||o,borderless:C||i,center:c,compact:u,disabled:a||x,fitContentWidth:d,inverted:f,noHover:(!m||y)&&!(P||S)&&O===Et.BUTTON,onClick:function(e){wt(h,p,{eventProperties:s,userProperties:j}),null===m||void 0===m||m(e)},type:P||S?null:O,useModelTheme:C,withIcon:!!n,children:[r&&!b&&(0,_.jsxs)(_.Fragment,{children:[r,(0,_.jsx)(D.Z,{mr:1})]}),v===St.LEFT&&I,(0,_.jsxs)(De.Z,{alignItems:"center",children:[n&&(0,_.jsx)(n,{muted:a||x,size:2.5*T.iI}),n&&l&&(0,_.jsx)(D.Z,{mr:1}),b&&(0,_.jsx)(Ut,{children:(0,_.jsx)(Dt.Z,{inverted:!f})}),!b&&l]}),v===St.RIGHT&&I&&(0,_.jsx)(D.Z,{ml:1,children:I}),t&&!b&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(D.Z,{ml:t?1:0}),t]})]}));return!P&&!S||a||x?k:(0,_.jsx)(et(),Nt(Nt({},g),{},{passHref:!0,children:k}))},disabled:a||x,linkProps:g,onClick:j}))},Qt=t(41374),Gt=t(96510);function Vt(e,n){var t=e.map((function(e){return String(e)})),r=e.includes(H.PQ),o=e.includes(H.zX),i=e.includes(H.XR),c=H.xU.map((function(e){return String(e)})),l=H.vk.map((function(e){return String(e)})),u=H.Tr.map((function(e){return String(e)})),s=Object.entries(n).find((function(e){var n=(0,a.Z)(e,2),s=n[0];return n[1]&&!t.includes(String(s))&&(!o||!l.includes(String(s)))&&(!r||!c.includes(String(s)))&&(!i||!u.includes(String(s)))}));return e.every((function(e){return n[e]}))&&!s}function Kt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Yt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Kt(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Kt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qt=function(e){var n=e.active,t=e.addNewBlock,r=e.filePath,o=(e.pipeline,e.setFilesTouched),i=(0,h.useState)(null),l=i[0],u=i[1],d=Qt.ZP.file_contents.detail(r).data;(0,h.useEffect)((function(){null!==d&&void 0!==d&&d.file_content&&u(d.file_content)}),[d]);var f=(0,h.useState)(null===l||void 0===l?void 0:l.content),p=f[0],v=f[1],g=(0,h.useState)(!1),b=g[0],x=g[1],y=(0,m.Db)(Qt.ZP.file_contents.useUpdate(null===l||void 0===l?void 0:l.path),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(){return!0},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),j=(0,a.Z)(y,1)[0],k=function(e,n){j({file_content:Yt(Yt({},n),{},{content:e})}),o((function(e){return Yt(Yt({},e),{},(0,s.Z)({},null===n||void 0===n?void 0:n.path,!1))})),x(!1)},O=(0,h.useMemo)((function(){return new RegExp(Object.keys(Ye).map((function(e){return".(".concat(e,")$")})).join("|"))}),[]),C=(0,h.useMemo)((function(){var e;return null===l||void 0===l||null===(e=l.path.match(O)[0])||void 0===e?void 0:e.split(".")[1]}),[O,l]),w=(0,h.useMemo)((function(){if(null!==l&&void 0!==l&&l.path)return(0,_.jsx)(Jn,{autoHeight:!0,language:Ye[C],onSave:function(e){k(e,l)},onChange:function(e){v(e),o((function(e){return Yt(Yt({},e),{},(0,s.Z)({},null===l||void 0===l?void 0:l.path,!0))})),x(!0)},selected:!0,textareaFocused:!0,value:null===l||void 0===l?void 0:l.content,width:"100%"})}),[l,C,k,o]),Z=(C===Le.PY||C===Le.SQL)&&en(l.path.split("/"))!==c.SCRATCHPAD&&(0,_.jsx)(D.Z,{p:2,children:(0,_.jsx)(Wt,{inline:!0,onClick:function(){return t({language:Ye[C],name:nn(l.path.split("/")),type:en(l.path.split("/"))})},uuid:"FileEditor/AddToCurrentPipeline",children:"Add to current pipeline"})}),P="FileEditor/".concat(null===l||void 0===l?void 0:l.path),S=(0,z.y)(),E=S.registerOnKeyDown,I=S.unregisterOnKeyDown;return(0,h.useEffect)((function(){return function(){I(P)}}),[I,P]),E(P,(function(e,t,r){if(n)if(Vt([H.zX,H.Um],t)||Vt([H.PQ,H.Um],t))e.preventDefault(),k(p,l);else if(b&&Vt([H.zX,H.hS],t)){e.preventDefault();var o="".concat(l.path," has changes that are unsaved. ")+"Click cancel and save your changes before reloading page.";"undefined"!==typeof location&&window.confirm(o)&&location.reload()}}),[n,p,l,k,b]),(0,_.jsxs)(_.Fragment,{children:[w,Z]})},Xt=O.default.div.withConfig({displayName:"indexstyle__LinkStyle",componentId:"sc-y3uzxv-0"})(["padding:","px;&:hover{cursor:pointer;","}",""],T.iI,(function(e){return"\n      background-color: ".concat((e.theme.interactive||w.Z.interactive).hoverBackground,";\n    ")}),(function(e){return e.highlighted&&"\n    background-color: ".concat((e.theme.interactive||w.Z.interactive).hoverBackground,";\n  ")}));function Jt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function $t(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Jt(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Jt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var er=function(e){var n=e.cancelPipeline,t=e.createPipeline,r=e.executePipeline,o=e.interruptKernel,i=e.isPipelineExecuting,c=e.restartKernel,l=e.savePipelineContent,u=e.setMessages,a=(0,h.useState)(null),d=a[0],f=a[1],p=(0,h.useRef)(null),m=(0,h.useRef)(null),v=[{label:function(){return"New pipeline"},onClick:function(){return t({pipeline:{name:(0,Pe.Y6)()}})},uuid:"new pipeline"},{label:function(){return"Save pipeline"},keyTextGroups:[[H.RJ,H.SS]],onClick:function(){return l()},uuid:"save pipeline"}],g=(0,h.useMemo)((function(){var e=[{label:function(){return"Interrupt kernel"},keyTextGroups:[[H.kA],[H.kA]],onClick:function(){return o()},uuid:"Interrupt kernel"},{label:function(){return"Restart kernel"},keyTextGroups:[[H.t_[H.OC]],[H.t_[H.OC]]],onClick:function(){return c()},uuid:"Restart kernel"},{label:function(){return"Clear all outputs"},onClick:function(){return u((function(e){return Object.keys(e).reduce((function(e,n){return $t($t({},e),{},(0,s.Z)({},n,[]))}),{})}))},uuid:"Clear all outputs"}];return i?e.push({label:function(){return"Cancel pipeline"},onClick:function(){return n()},uuid:"Cancel pipeline"}):e.push({label:function(){return"Execute pipeline"},onClick:function(){return r()},uuid:"Execute pipeline"}),e}),[i]),b="FileHeaderMenu/index",x=(0,z.y)(),y=x.registerOnKeyDown,j=x.unregisterOnKeyDown;return(0,h.useEffect)((function(){return function(){j(b)}}),[j,b]),y(b,(function(e,n,t){null!==d&&(n[H.QK]?f((function(e){return 0===e?1:e-1})):n[H.DY]&&f((function(e){return 1===e?0:e+1})))}),[d,f]),(0,_.jsx)(Ae.Z,{onClickOutside:function(){return f(null)},open:!0,style:{position:"relative"},children:(0,_.jsxs)(k.Z,{children:[(0,_.jsxs)("div",{style:{position:"relative"},children:[(0,_.jsx)(Xt,{highlighted:0===d,onClick:function(){return f((function(e){return 0===e?null:0}))},onMouseEnter:function(){return f((function(e){return null!==e?0:null}))},ref:p,children:(0,_.jsx)(C.ZP,{children:"File"})}),(0,_.jsx)(G,{items:v,onClickCallback:function(){return f(null)},open:0===d,parentRef:p,uuid:"FileHeaderMenu/file_items"})]}),(0,_.jsxs)("div",{style:{position:"relative"},children:[(0,_.jsx)(Xt,{highlighted:1===d,onClick:function(){return f((function(e){return 1===e?null:1}))},onMouseEnter:function(){return f((function(e){return null!==e?1:null}))},ref:m,children:(0,_.jsx)(C.ZP,{children:"Run"})}),(0,_.jsx)(G,{items:g,onClickCallback:function(){return f(null)},open:1===d,parentRef:m,uuid:"FileHeaderMenu/run_items"})]})]})})},nr=t(57384),tr=t(82944),rr=(0,O.css)(["position:relative;",""],(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n  ")})),or=O.default.div.withConfig({displayName:"TooltipWrapper__ContainerStyle",componentId:"sc-1dd57l8-0"})(["",""],rr),ir=O.default.span.withConfig({displayName:"TooltipWrapper__ContainerSpanStyle",componentId:"sc-1dd57l8-1"})(["",""],rr),cr=O.default.a.withConfig({displayName:"TooltipWrapper__HoverStyle",componentId:"sc-1dd57l8-2"})([""," "," border-radius:50%;"," "," &:active,&:focus{outline:none;}",""],(0,dn.eR)(),(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n    width: ").concat(e.size,"px;\n  ")}),(function(e){return!e.block&&"\n    display: inline-block;\n  "}),(function(e){return e.block&&"\n    display: block;\n  "}),(function(e){return!e.noHoverOutline&&"\n    &:hover {\n      cursor: pointer;\n\n      box-shadow:\n        0 0 0 ".concat(Z.PV,"px ").concat((0,Te.W)(e),",\n        0 0 0 ").concat(Z.PV+Z.q2,"px ").concat((e.theme.interactive||w.Z.interactive).hoverOverlay,";\n    }\n  ")})),lr=O.default.span.withConfig({displayName:"TooltipWrapper__BasicStyle",componentId:"sc-1dd57l8-3"})([""]),ur=O.default.div.withConfig({displayName:"TooltipWrapper__ContentStyle",componentId:"sc-1dd57l8-4"})(["position:absolute;z-index:3;"," "," "," "," "," "," "," "," ",""],(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||w.Z.shadow).base,";\n  ")}),(function(e){return e.appearAbove&&!e.size&&"\n    bottom: 0;\n  "}),(function(e){return e.appearAbove&&e.size&&"\n    bottom: ".concat(e.size+Z.PV+Z.q2,"px;\n  ")}),(function(e){return e.appearBefore&&"\n    right: 0;\n  "}),(function(e){return e.leftPosition&&"\n    left: ".concat(e.leftPosition,"px;\n  ")}),(function(e){return!e.leftPosition&&e.rightPosition&&"\n    right: 0px;\n  "}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n  ")}),(function(e){return e.widthFitContent&&"\n    width: max-content;\n  "}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset,"px;\n  ")}));var ar=function(e){var n=e.alignLeft,t=e.appearAbove,r=e.appearBefore,o=e.autoWidth,i=e.basic,c=e.block,l=e.center,u=e.children,a=e.content,s=e.inline,d=e.minWidth,f=e.noHoverOutline,p=e.size,m=void 0===p?2*T.iI:p,v=e.topOffset,g=e.widthFitContent,b=(0,h.useState)(!1),x=b[0],y=b[1],j=(0,h.useState)(!1),k=j[0],O=j[1],C=(d-m)/-2,w=s?ir:or,Z=i?lr:cr,P=(0,_.jsx)(Z,{block:c,href:"#",noHoverOutline:f,onClick:function(e){return e.preventDefault()},onMouseEnter:function(){return y(!0)},size:m,children:u});return(0,h.useEffect)((function(){var e=setInterval((function(){return O(!0)}),1e3);return x||clearInterval(e),function(){return clearInterval(e)}}),[O,x]),(0,_.jsxs)(w,{onMouseLeave:function(){y(!1),O(!1)},size:m,children:[P,k&&(0,_.jsx)(ur,{appearAbove:t,appearBefore:r,leftPosition:l?C:null,minWidth:o?d:null,rightPosition:n,size:m,topOffset:v,widthFitContent:g,children:a})]})},sr=["autoWidth","children","default","description","inverted","keyboardShortcuts","label","maxWidth","muted","size","warning","widthFitContent"];function dr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function fr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?dr(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var pr=42*T.iI,hr=((0,O.css)(["position:relative;",""],(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n  ")})),(0,O.css)(["border-radius:","px;"," "," ",""],Z.BG,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||w.Z.shadow).popup,";\n\n    background-color: ").concat((e.theme.background||w.Z.background).popup,";\n  ")}),(function(e){return e.width&&!(e.widthFitContent||e.autoWidth)&&"\n    width: ".concat(e.width,"px;\n  ")}),(function(e){return!e.width&&!(e.widthFitContent||e.autoWidth)&&"\n    width: ".concat(pr,"px;\n  ")}))),mr=O.default.div.withConfig({displayName:"Tooltip__LabelStyle",componentId:"sc-allmdq-0"})([""," padding:","px ","px;"],hr,.75*T.iI,1*T.iI),vr=O.default.div.withConfig({displayName:"Tooltip__DescriptionStyle",componentId:"sc-allmdq-1"})([""," padding:","px ","px;"],hr,1.5*T.iI,2*T.iI);var gr=function(e){var n=e.autoWidth,t=e.children,r=e.default,o=e.description,i=e.inverted,c=e.keyboardShortcuts,l=e.label,u=e.maxWidth,a=e.muted,s=e.size,d=void 0===s?2*T.iI:s,f=e.warning,p=e.widthFitContent,m=(0,Re.Z)(e,sr),v=o||l||"",g=o?vr:mr,b=Math.min(u||pr,v.length*T.Fo),x=[];null===c||void 0===c||c.forEach((function(e,n){n>=1&&x.push((0,_.jsx)(C.ZP,{default:!0,children:"+"})),x.push(e)}));var y=x.map((function(e,n){var t="keyboard-shortcut-".concat(n);return"string"===typeof e?(0,_.jsx)("span",{children:e},t):h.cloneElement(e,{key:t})}));return(0,_.jsx)(ar,fr(fr({},m),{},{autoWidth:n,content:(0,_.jsx)(g,{autoWidth:n,width:u,widthFitContent:p,children:(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsx)(C.ZP,{whiteSpaceNormal:!0,children:v}),y.length>=1&&(0,_.jsx)(C.ZP,{muted:!0,children:"\xa0\xa0\xa0\u2022\xa0\xa0\xa0"}),y.length>=1&&y]})}),minWidth:b,noHoverOutline:!!t,size:d,widthFitContent:p,children:t||(0,_.jsx)(M.kI,{default:r,inverted:i,muted:a,size:d,warning:f})}))},br=["bold","defaultColor","description","disableWordBreak","inputValue","inputWidth","invertedTheme","label","menuOpen","monospace","muted","onClick","notRequired","selectedTextProps","small","stacked","tooltipProps","value"];function xr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function yr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?xr(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var jr=O.default.div.withConfig({displayName:"LabelWithValueClicker__LabelStyle",componentId:"sc-1hzpn4h-0"})(["margin-bottom:","px;"],.25*T.iI),kr=O.default.div.withConfig({displayName:"LabelWithValueClicker__DescriptionStyle",componentId:"sc-1hzpn4h-1"})([""]);var Or,Cr,wr=function(e){var n=e.bold,t=void 0===n||n,r=e.defaultColor,o=e.description,i=e.disableWordBreak,c=e.inputValue,l=e.inputWidth,u=e.invertedTheme,a=e.label,s=e.menuOpen,d=void 0!==s&&s,f=e.monospace,p=e.muted,m=e.onClick,v=e.notRequired,g=e.selectedTextProps,b=e.small,x=e.stacked,y=e.tooltipProps,j=e.value,O=(0,Re.Z)(e,br),w=(0,h.useRef)(null),Z=(0,h.useState)(!1),P=Z[0],S=Z[1],E=(0,h.useState)(!1),I=E[0],T=E[1],A=a&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(C.ZP,{bold:t,inverted:u,lineHeight:20,monospace:f,muted:p,small:b,children:a}),y&&(0,_.jsx)(D.Z,{ml:1,children:(0,_.jsx)(gr,yr({muted:!0},y))})]}),R=(0,_.jsxs)(_.Fragment,{children:[j&&(0,_.jsx)(Mn.Z,{block:!0,danger:null===g||void 0===g?void 0:g.danger,fullWidth:!0,muted:p,onClick:function(){m(),w.current&&w.current.focus(),S(!0)},preventDefault:!0,sameColorAsText:p||!(null!==g&&void 0!==g&&g.primary)&&!(null!==g&&void 0!==g&&g.danger)&&!(null!==g&&void 0!==g&&g.warning),underline:null===g||void 0===g?void 0:g.underline,warning:null===g||void 0===g?void 0:g.warning,children:(0,_.jsx)(C.ZP,yr(yr({inverted:u,muted:p},g),{},{disableWordBreak:i,monospace:f,small:b,width:l,children:j}))}),(0,_.jsx)(tr.Z,yr(yr({},O),{},{basic:!0,defaultColor:r,invertedTheme:u,monospace:f,onBlur:function(e){S(!1),O.onBlur&&O.onBlur(e),I||T(!0)},onFocus:function(e){S(!0),O.onFocus&&O.onFocus(e)},ref:w,small:b,value:c,visible:!j}))]}),M=o&&(0,_.jsx)(kr,{children:(0,_.jsx)(C.ZP,{dangerouslySetInnerHTML:{__html:o},monospace:f,muted:!0,small:b})});return(0,_.jsxs)(_.Fragment,{children:[x&&(0,_.jsxs)(_.Fragment,{children:[A&&(0,_.jsxs)(jr,{children:[(0,_.jsx)(k.Z,{alignItems:"center",fullHeight:!1,fullWidth:!0,children:A}),M]}),R]}),!x&&(0,_.jsxs)(k.Z,{alignItems:"center",fullWidth:!0,children:[A&&(0,_.jsxs)(_.Fragment,{children:[A,(0,_.jsx)(D.Z,{ml:1})]}),(0,_.jsx)(De.Z,{flex:"1",children:R})]}),I&&!P&&!j&&!d&&!v&&(0,_.jsx)(C.ZP,{danger:!0,small:b,children:"This field is required."})]})};!function(e){e.PYTHON="python",e.PYSPARK="pyspark"}(Cr||(Cr={}));var Zr=(Or={},(0,s.Z)(Or,Cr.PYTHON,"python3"),(0,s.Z)(Or,Cr.PYSPARK,"pysparkkernel"),Or),_r=t(37391),Pr=64*T.iI,Sr=3*T.cd*T.iI,Er=Sr,Ir=35*T.iI,Tr=.5*T.iI,Ar=13*T.iI,Rr=3*T.cd*T.iI,Dr=6*T.iI,Mr=(O.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-1lxpneo-0"})(["position:fixed;z-index:2;"," "," ",""],(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.monotone||w.Z.monotone).grey200,";\n  ")}),(function(e){return!e.beforeVisible&&"\n    width: 100%;\n  "}),(function(e){return e.beforeVisible&&"\n    left: ".concat(Ir,"px;\n    width: calc(100% - ").concat(Ir,"px);\n  ")})),O.default.div.withConfig({displayName:"indexstyle__TabStyle",componentId:"sc-1lxpneo-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;padding:","px ","px;position:relative;top:1px;"," "," ",""],Z.n_,Z.n_,1*T.iI,2*T.iI,(function(e){return"\n    border-left: 1px solid ".concat((e.theme.monotone||w.Z.monotone).grey200,";\n    border-right: 1px solid ").concat((e.theme.monotone||w.Z.monotone).grey200,";\n    border-top: 1px solid ").concat((e.theme.monotone||w.Z.monotone).grey200,";\n  ")}),(function(e){return!e.first&&"\n    margin-left: ".concat(1*T.iI,"px;\n  ")}),(function(e){return e.selected&&"\n    border-bottom: 1px solid ".concat((e.theme.monotone||w.Z.monotone).white,";\n  ")})),(0,O.css)(["height:calc(100% - ","px);position:fixed;top:","px;z-index:2;",""],Rr,Rr,(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).panel,";\n  ")}))),Fr=(0,O.css)([""," height:100%;overflow:auto;position:relative;z-index:2;"],_r.w5),Br=(0,O.css)(["height:calc(100% + ","px);position:absolute;top:-","px;width:","px;z-index:6;&:hover{","}"," ",""],Rr,Rr,Tr,(function(e){return!e.disabled&&"\n      border-color: ".concat((e.theme.text||w.Z.text).fileBrowser," !important;\n    ")}),(function(e){return!e.disabled&&"\n    cursor: col-resize;\n  "}),(function(e){return e.active&&!e.disabled&&"\n    border-color: ".concat((e.theme.text||w.Z.text).fileBrowser," !important;\n  ")})),Nr=O.default.div.withConfig({displayName:"indexstyle__AsideHeaderStyle",componentId:"sc-1lxpneo-2"})(["border-bottom:1px solid transparent;height:","px;position:fixed;top:0;z-index:4;"," "," ",""],Rr,(0,_r.y$)(),(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).panel,";\n  ")}),(function(e){return!e.visible&&"\n    border-color: ".concat((e.theme.borders||w.Z.borders).medium," !important;\n  ")})),Hr=O.default.div.withConfig({displayName:"indexstyle__AsideSubheaderStyle",componentId:"sc-1lxpneo-3"})(["border-bottom:1px solid transparent;height:","px;overflow-x:auto;"," "," ",""],Rr,(0,_r.y$)(),(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).table,";\n  ")}),(function(e){return!e.visible&&"\n    border-color: ".concat((e.theme.borders||w.Z.borders).medium," !important;\n  ")})),Lr=O.default.aside.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-1lxpneo-4"})([""," left:0;"],Mr),zr=O.default.div.withConfig({displayName:"indexstyle__BeforeInnerStyle",componentId:"sc-1lxpneo-5"})([""," overflow:hidden;&:hover{overflow:auto;}"],Fr),Ur=O.default.aside.withConfig({displayName:"indexstyle__AfterStyle",componentId:"sc-1lxpneo-6"})([""," right:0;"],Mr),Wr=O.default.div.withConfig({displayName:"indexstyle__AfterInnerStyle",componentId:"sc-1lxpneo-7"})(["",""],Fr),Qr=O.default.div.withConfig({displayName:"indexstyle__DraggableStyle",componentId:"sc-1lxpneo-8"})([""," "," ",""],Br,(function(e){return"undefined"!==typeof e.left&&"\n    border-left: 1px solid transparent;\n    left: ".concat(e.left,"px;\n  ")}),(function(e){return"undefined"!==typeof e.right&&"\n    border-right: 1px solid transparent;\n    right: ".concat(e.right,"px;\n  ")})),Gr=O.default.div.withConfig({displayName:"indexstyle__MainWrapper",componentId:"sc-1lxpneo-9"})(["height:100%;position:fixed;z-index:1;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).codeArea,";\n  ")})),Vr=O.default.div.withConfig({displayName:"indexstyle__MainContentStyle",componentId:"sc-1lxpneo-10"})(["position:fixed;z-index:2;",""],(function(e){return"\n    height: calc(100% - ".concat(e.headerOffset||0,"px);\n    top: ").concat(e.headerOffset||0,"px;\n  ")})),Kr=O.default.div.withConfig({displayName:"indexstyle__MainContentInnerStyle",componentId:"sc-1lxpneo-11"})([""," height:100%;overflow:auto;"],_r.w5),Yr=300,qr=O.default.div.withConfig({displayName:"indexstyle__PipelineContainerStyle",componentId:"sc-1sv9513-0"})([".pipeline-detail-enter-active{opacity:1;transition:opacity ","ms linear;}.pipeline-detail-enter-done{opacity:0;transition:opacity ","ms linear;}"],Yr,Yr),Xr=O.default.div.withConfig({displayName:"indexstyle__OverlayStyle",componentId:"sc-1sv9513-1"})(["height:100vh;opacity:1;position:fixed;width:100vw;z-index:9999;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).codeArea,";\n  ")})),Jr=O.default.div.withConfig({displayName:"indexstyle__PipelineHeaderStyle",componentId:"sc-1sv9513-2"})(["height:","px;position:sticky;top:0;width:100%;z-index:5;",""],Rr,(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).codeArea,";\n    border-bottom: 1px solid ").concat((e.theme.borders||w.Z.borders).light,";\n  ")})),$r=O.default.div.withConfig({displayName:"indexstyle__FileTabStyle",componentId:"sc-1sv9513-3"})(["border-left:1px solid transparent;height:100%;padding:","px ","px;"," "," ",""],T.iI,T.cd*T.iI,(function(e){return"\n    &:hover {\n      cursor: default;\n\n      p {\n        color: ".concat((e.theme.content||w.Z.content).active," !important;\n        cursor: default;\n      }\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.interactive||w.Z.interactive).hoverBackground,";\n  ")}),(function(e){return!e.selected&&"\n    border-color: ".concat((e.theme.borders||w.Z.borders).light," !important;\n  ")})),eo=t(33766);var no,to,ro=function(e){var n=e.filePaths,t=e.filesTouched,r=e.isBusy,o=e.isPipelineUpdating,i=e.kernel,c=e.pipeline,l=e.pipelineContentTouched,a=e.pipelineLastSaved,s=(e.restartKernel,e.savePipelineContent),d=e.selectedFilePath,f=e.updatePipelineMetadata,p=(0,h.useContext)(O.ThemeContext),m=i||{},v=m.alive,g=(m.name,(0,h.useState)(!1)),b=g[0],x=g[1],y=(0,h.useState)(""),j=y[0],Z=y[1],P=(0,h.useState)(!1),S=P[0],E=P[1],I=(0,h.useRef)(null);(0,h.useEffect)((function(){null!==c&&void 0!==c&&c.uuid&&Z(c.uuid)}),[null===c||void 0===c?void 0:c.uuid]);var A,R=(0,h.useMemo)((function(){return n.map((function(e){return decodeURIComponent(e)}))}),[n]);A=l?"Unsaved changes":o?"Saving changes...":a?"Last saved ".concat((0,Pe.JX)(Number(a)/1e3)):"All changes saved";var F="KernelStatus",B=(0,z.y)(),N=B.registerOnKeyDown,L=B.unregisterOnKeyDown;(0,h.useEffect)((function(){return function(){L(F)}}),[L,F]),N(F,(function(e,n,t){b&&String(t[0])===String(H.Uq)&&String(t[1])!==String(H.zX)&&(f(j),x(!1))}),[b,j,x,f]);var U=(0,h.useMemo)((function(){return(0,_.jsx)(wr,{bold:!1,inputValue:j,notRequired:!0,onBlur:function(){return setTimeout((function(){return x(!1)}),300)},onChange:function(e){Z(e.target.value),e.preventDefault()},onClick:function(){return x(!0)},onFocus:function(){return x(!0)},stacked:!0,value:b?null:(null===c||void 0===c?void 0:c.uuid)||""})}),[b,j,c]),W=(0,h.useMemo)((function(){return(0,_.jsxs)("div",{ref:I,style:{position:"relative"},children:[(0,_.jsx)(Wt,{beforeElement:(0,_.jsx)(ze,{color:r?(p||w.Z).borders.info:v?(p||w.Z).borders.success:(p||w.Z).borders.danger,size:T.iI}),blackBorder:!0,compact:!0,inline:!0,onClick:function(){return E(!0)},uuid:"Pipeline/KernelStatus/kernel",children:(null===c||void 0===c?void 0:c.type)||Cr.PYTHON}),(0,_.jsx)(Ae.Z,{disableEscape:!0,onClickOutside:function(){return E(!1)},open:S,children:(0,_.jsx)(G,{items:[{isGroupingTitle:!0,label:function(){return"Select kernel"},uuid:"select_kernel"}].concat((0,u.Z)(Object.keys(Zr).filter((function(e){return(null===c||void 0===c?void 0:c.type)!=e})).map((function(e){return{label:function(){return e},onClick:function(){return f(null===c||void 0===c?void 0:c.name,e)},uuid:e}})))),onClickCallback:function(){return E(!1)},open:S,parentRef:I,uuid:"KernelStatus/select_kernel",width:25*T.iI})})]})}),[v,r,c,S,E,p]),Q=(0,h.useMemo)((function(){return(0,_.jsxs)(De.Z,{alignItems:"center",children:[(0,_.jsxs)(C.ZP,{children:["Pipeline:\xa0",d&&(null===c||void 0===c?void 0:c.uuid)]}),!d&&U,(0,_.jsx)(D.Z,{mr:3})]})}),[v,r,c,U,d,p]);return(0,_.jsx)(Jr,{children:(0,_.jsxs)(k.Z,{alignItems:"center",fullHeight:!0,justifyContent:"space-between",children:[(0,_.jsxs)(k.Z,{alignItems:"center",fullHeight:!0,justifyContent:"flex-start",children:[(0,_.jsxs)(D.Z,{px:T.cd,children:[d&&(0,_.jsx)(Mn.Z,{noHoverUnderline:!0,noOutline:!0,onClick:d?function(){return(0,eo.u)({file_path:null})}:null,preventDefault:!0,children:Q}),!d&&(0,_.jsxs)(k.Z,{alignItems:"center",children:[Q,b&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(D.Z,{ml:1}),(0,_.jsx)(Mn.Z,{onClick:function(){f(j),x(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Update name"})]})]})]}),null===R||void 0===R?void 0:R.map((function(e){var n=d===encodeURIComponent(e);return(0,_.jsx)(k.Z,{flexDirection:"column",fullHeight:!0,justifyContent:"flex-end",onClick:function(t){t.preventDefault(),n||(s(),(0,eo.u)({file_path:encodeURIComponent(e)}))},children:(0,_.jsx)($r,{selected:n,children:(0,_.jsxs)(k.Z,{alignItems:"center",fullHeight:!0,children:[!t[e]&&(0,_.jsx)(M.iU,{muted:!n,size:1.5*T.iI}),t[e]&&(0,_.jsx)(gr,{label:"Unsaved changes",size:null,widthFitContent:!0,children:(0,_.jsx)("div",{style:{padding:1},children:(0,_.jsx)(ze,{borderColor:(p||w.Z).borders.danger,size:1.25*T.iI})})}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsx)(C.ZP,{muted:!n,children:e}),(0,_.jsx)(D.Z,{mr:2}),n&&(0,_.jsx)(gr,{label:"Close",size:null,widthFitContent:!0,children:(0,_.jsx)(Mn.Z,{autoHeight:!0,block:!0,noHoverUnderline:!0,noOutline:!0,onClick:function(){var n=(0,kn.Od)(R,(function(n){return n===e})).map((function(e){return encodeURIComponent(e)}));(0,eo.u)({file_path:n[n.length-1]||null,"file_paths[]":n},{pushHistory:!0})},preventDefault:!0,children:(0,_.jsx)(M.x8,{size:1.25*T.iI})})}),!n&&(0,_.jsx)("div",{style:{width:1.25*T.iI}})]})})},e)}))]}),!d&&(0,_.jsx)(D.Z,{px:T.cd,children:(0,_.jsxs)(De.Z,{alignItems:"center",children:[W,(0,_.jsx)(D.Z,{ml:2}),(0,_.jsx)(C.ZP,{muted:!0,children:A})]})})]})})};!function(e){e.BUSY="busy",e.IDLE="idle",e.QUEUED="queued"}(no||(no={})),function(e){e.IMAGE_PNG="image/png",e.TABLE="table",e.TEXT="text",e.TEXT_HTML="text/html",e.TEXT_PLAIN="text/plain"}(to||(to={}));var oo,io=[to.TEXT,to.TEXT_PLAIN];!function(e){e.DISPLAY_DATA="display_data",e.STATUS="status",e.STREAM="stream",e.STREAM_PIPELINE="stream_pipeline"}(oo||(oo={}));var co=t(16910),lo=["children","items","open","onClickCallback","onClickOutside","parentRef","uuid"];function uo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ao(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?uo(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uo(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var so,fo,po,ho,mo,vo,go=function(e){var n=e.children,t=e.items,r=e.open,o=e.onClickCallback,i=e.onClickOutside,c=e.parentRef,l=e.uuid,u=(0,Re.Z)(e,lo),a=(0,_.jsxs)("div",{style:{position:"relative",zIndex:i?3:2},children:[(0,_.jsx)("div",{ref:c,children:n}),(0,_.jsx)(G,ao(ao({},u),{},{items:t,onClickCallback:o,open:r,parentRef:c,uuid:l}))]});return i?(0,_.jsx)(Ae.Z,{onClickOutside:i,open:!0,children:a}):a},bo=O.default.svg.withConfig({displayName:"Mage8Bit__SVGStyle",componentId:"sc-cj6ltf-0"})([""]),xo=function(e){var n=e.size,t=void 0===n?20:n,r=e.viewBox,o=void 0===r?"0 0 20 20":r;return(0,_.jsxs)(bo,{height:t,viewBox:o,width:t,children:[(0,_.jsxs)("g",{clipPath:"url(#clip0_297_42814)",children:[(0,_.jsx)("path",{d:"M13.334 0h1.66667v1.66667H13.334zM11.666 1.6665h1.66667v1.66667H11.666z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M10 1.6665h1.66667v1.66667H10z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M8.33398 1.6665h1.66667v1.66667H8.33398z",fill:"#AF93FF"}),(0,_.jsx)("path",{d:"M8.33398 3.3335h1.66667v1.66667H8.33398z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M6.66602 3.3335h1.66667v1.66667H6.66602z",fill:"#AF93FF"}),(0,_.jsx)("path",{d:"M3.33398 5h1.66667v1.66667H3.33398z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M5 5h1.66667v1.66667H5z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M6.66602 5h1.66667v1.66667H6.66602z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M6.66602 5h1.66667v1.66667H6.66602z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M6.66602 8.3335h1.66667v1.66667H6.66602z",fill:"#000"}),(0,_.jsx)("path",{d:"M6.66602 6.6665h1.66667v1.66667H6.66602z",fill:"#AD8FFF"}),(0,_.jsx)("path",{d:"M6.66602 10h1.66667v1.66667H6.66602z",fill:"#C9B6FF"}),(0,_.jsx)("path",{d:"M8.33398 6.6665h1.66667v1.66667H8.33398z",fill:"#AD8FFF"}),(0,_.jsx)("path",{d:"M1.66602 13.3335h1.66667v1.66667H1.66602z",fill:"#C9B6FF"}),(0,_.jsx)("path",{d:"M1.66602 11.6665h1.66667v1.66667H1.66602z",fill:"#FFCC19"}),(0,_.jsx)("path",{d:"M1.66602 10h1.66667v1.66667H1.66602z",fill:"#FFCC19"}),(0,_.jsx)("path",{d:"M1.66602 8.3335h1.66667v1.66667H1.66602zM1.66602 6.6665h1.66667v1.66667H1.66602z",fill:"#FFCC19"}),(0,_.jsx)("path",{d:"M1.66602 6.6665h1.66667v1.66667H1.66602zM0 0h1.66667v1.66667H0zM3.33398 1.6665h1.66667v1.66667H3.33398zM0 3.3335h1.66667v1.66667H0z",fill:"#2ECDF7"}),(0,_.jsx)("path",{d:"M1.66602 16.6665h1.66667v1.66667H1.66602z",fill:"#FFCC19"}),(0,_.jsx)("path",{d:"M1.66602 16.6665h1.66667v1.66667H1.66602zM1.66602 18.3335h1.66667v1.66667H1.66602z",fill:"#FFCC19"}),(0,_.jsx)("path",{d:"M1.66602 15h1.66667v1.66667H1.66602zM3.33398 15h1.66667v1.66667H3.33398z",fill:"#C9B6FF"}),(0,_.jsx)("path",{d:"M3.33398 16.6665h1.66667v1.66667H3.33398z",fill:"#C9B6FF"}),(0,_.jsx)("path",{d:"M3.33398 13.3335h1.66667v1.66667H3.33398z",fill:"#AD8FFF"}),(0,_.jsx)("path",{d:"M8.33398 8.3335h1.66667v1.66667H8.33398z",fill:"#C9B6FF"}),(0,_.jsx)("path",{d:"M10 6.6665h1.66667v1.66667H10z",fill:"#AD8FFF"}),(0,_.jsx)("path",{d:"M10 10h1.66667v1.66667H10z",fill:"#C9B6FF"}),(0,_.jsx)("path",{d:"M11.666 6.6665h1.66667v1.66667H11.666z",fill:"#AD8FFF"}),(0,_.jsx)("path",{d:"M11.666 8.3335h1.66667v1.66667H11.666z",fill:"#C9B6FF"}),(0,_.jsx)("path",{d:"M8.33398 10h1.66667v1.66667H8.33398z",fill:"#FF8DA9"}),(0,_.jsx)("path",{d:"M8.33398 11.6665h1.66667v1.66667H8.33398z",fill:"#FF8DA9"}),(0,_.jsx)("path",{d:"M6.66602 11.6665h1.66667v1.66667H6.66602z",fill:"#D9D9D9"}),(0,_.jsx)("path",{d:"M6.66602 11.6665h1.66667v1.66667H6.66602z",fill:"#D9D9D9"}),(0,_.jsx)("path",{d:"M5 10h1.66667v1.66667H5z",fill:"#D9D9D9"}),(0,_.jsx)("path",{d:"M5 8.3335h1.66667v1.66667H5z",fill:"#232429"}),(0,_.jsx)("path",{d:"M8.33398 11.6665h1.66667v1.66667H8.33398zM8.33398 13.3335h1.66667v1.66667H8.33398z",fill:"#D9D9D9"}),(0,_.jsx)("path",{d:"M10 11.6665h1.66667v1.66667H10z",fill:"#D9D9D9"}),(0,_.jsx)("path",{d:"M11.666 10h1.66667v1.66667H11.666zM13.334 6.6665h1.66667v1.66667H13.334zM13.334 8.3335h1.66667v1.66667H13.334z",fill:"#D9D9D9"}),(0,_.jsx)("path",{d:"M15 8.3335h1.66667v1.66667H15z",fill:"#757575"}),(0,_.jsx)("path",{d:"M15 10h1.66667v1.66667H15z",fill:"#D9D9D9"}),(0,_.jsx)("path",{d:"M10 8.3335h1.66667v1.66667H10z",fill:"#000"}),(0,_.jsx)("path",{d:"M8.33398 5h1.66667v1.66667H8.33398zM11.666 5h1.66667v1.66667H11.666z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M13.334 10h1.66667v1.66667H13.334zM11.666 11.6665h1.66667v1.66667H11.666zM10 13.3335h1.66667v1.66667H10z",fill:"#501FD8"}),(0,_.jsx)("path",{d:"M8.33398 15h1.66667v1.66667H8.33398zM6.66602 13.3335h1.66667v1.66667H6.66602zM15 11.6665h1.66667v1.66667H15z",fill:"#501FD8"}),(0,_.jsx)("path",{d:"M16.666 11.6665h1.66667v1.66667H16.666zM16.666 13.3335h1.66667v1.66667H16.666z",fill:"#501FD8"}),(0,_.jsx)("path",{d:"M15 13.3335h1.66667v1.66667H15z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M13.334 13.3335h1.66667v1.66667H13.334zM13.334 11.6665h1.66667v1.66667H13.334zM11.666 13.3335h1.66667v1.66667H11.666z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M11.666 15h1.66667v1.66667H11.666z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M10 15h1.66667v1.66667H10z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M8.33398 16.6665h1.66667v1.66667H8.33398z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M6.66602 15h1.66667v1.66667H6.66602z",fill:"#AF93FF"}),(0,_.jsx)("path",{d:"M6.66602 16.6665h1.66667v1.66667H6.66602z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M5 16.6665h1.66667v1.66667H5z",fill:"#AF93FF"}),(0,_.jsx)("path",{d:"M5 18.3335h1.66667v1.66667H5z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M6.66602 18.3335h1.66667v1.66667H6.66602zM8.33398 18.3335h1.66667v1.66667H8.33398z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M10 18.3335h1.66667v1.66667H10z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M11.666 18.3335h1.66667v1.66667H11.666zM13.334 18.3335h1.66667v1.66667H13.334z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M15 18.3335h1.66667v1.66667H15z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M16.666 18.3335h1.66667v1.66667H16.666z",fill:"#652EFF"}),(0,_.jsx)("path",{d:"M3.33398 18.3335h1.66667v1.66667H3.33398zM10 16.6665h1.66667v1.66667H10z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M11.666 16.6665h1.66667v1.66667H11.666zM13.334 15h1.66667v1.66667H13.334z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M13.334 16.6665h1.66667v1.66667H13.334z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M15 16.6665h1.66667v1.66667H15z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M15 15h1.66667v1.66667H15z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M16.666 15h1.66667v1.66667H16.666zM18.334 16.6665h1.66667v1.66667H18.334zM18.334 18.3335h1.66667v1.66667H18.334z",fill:"#501FD8"}),(0,_.jsx)("path",{d:"M16.666 16.6665h1.66667v1.66667H16.666z",fill:"#652EFF"}),(0,_.jsx)("path",{d:"M13.334 5h1.66667v1.66667H13.334z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M15 5h1.66667v1.66667H15zM10 5h1.66667v1.66667H10z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M10 3.3335h1.66667v1.66667H10z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M11.666 3.3335h1.66667v1.66667H11.666z",fill:"#7949FF"}),(0,_.jsx)("path",{d:"M11.666 0h1.66667v1.66667H11.666z",fill:"#AF93FF"})]}),(0,_.jsx)("defs",{children:(0,_.jsx)("clipPath",{id:"clip0_297_42814",children:(0,_.jsx)("path",{d:"M0 0h20v20H0z",fill:"#fff"})})})]})},yo=t(80906),jo=(yo.Q0.AVERAGE,yo.Q0.CLEAN_COLUMN_NAME,yo.Q0.COUNT,yo.Q0.COUNT_DISTINCT,yo.Q0.CUSTOM,yo.Q0.DIFF,yo.Q0.FIRST,yo.Q0.FIX_SYNTAX_ERRORS,yo.Q0.IMPUTE,yo.Q0.LAST,yo.Q0.MAX,yo.Q0.MEDIAN,yo.Q0.MIN,yo.Q0.REFORMAT,yo.Q0.REMOVE,yo.Q0.REMOVE_OUTLIERS,yo.Q0.SELECT,yo.Q0.SHIFT_DOWN,yo.Q0.SHIFT_UP,yo.Q0.SUM,[yo.Q0.DROP_DUPLICATE,yo.Q0.FILTER,yo.Q0.SORT,yo.Q0.REMOVE]);!function(e){e.AGGREGATE="Aggregate",e.FORMATTING="Formatting",e.COLUMN_REMOVAL="Column removal",e.SHIFT_ROWS="Shift rows in a column",e.MISC="Miscellaneous"}(vo||(vo={}));var ko,Oo,Co,wo=(fo={},(0,s.Z)(fo,yo.qs.COLUMN,(so={},(0,s.Z)(so,vo.AGGREGATE,[yo.Q0.AVERAGE,yo.Q0.COUNT,yo.Q0.COUNT_DISTINCT,yo.Q0.FIRST,yo.Q0.LAST,yo.Q0.MAX,yo.Q0.MEDIAN,yo.Q0.MIN,yo.Q0.SUM]),(0,s.Z)(so,vo.FORMATTING,[yo.Q0.CLEAN_COLUMN_NAME,yo.Q0.FIX_SYNTAX_ERRORS,yo.Q0.REFORMAT]),(0,s.Z)(so,vo.COLUMN_REMOVAL,[yo.Q0.REMOVE,yo.Q0.SELECT]),(0,s.Z)(so,vo.SHIFT_ROWS,[yo.Q0.SHIFT_DOWN,yo.Q0.SHIFT_UP]),(0,s.Z)(so,vo.MISC,[yo.Q0.DIFF,yo.Q0.IMPUTE,yo.Q0.REMOVE_OUTLIERS]),so)),(0,s.Z)(fo,yo.qs.ROW,(0,s.Z)({},vo.MISC,[].concat(jo))),fo),Zo=Object.keys(wo[yo.qs.COLUMN]),_o=[vo.MISC],Po=(mo={},(0,s.Z)(mo,yo.qs.COLUMN,(po={},(0,s.Z)(po,yo.Q0.ADD,"Add column"),(0,s.Z)(po,yo.Q0.AVERAGE,"Aggregate by average value"),(0,s.Z)(po,yo.Q0.CLEAN_COLUMN_NAME,"Clean column name"),(0,s.Z)(po,yo.Q0.COUNT_DISTINCT,"Aggregate by distinct count"),(0,s.Z)(po,yo.Q0.COUNT,"Aggregate by total count"),(0,s.Z)(po,yo.Q0.DIFF,"Difference"),(0,s.Z)(po,yo.Q0.FIRST,"Aggregate by first value"),(0,s.Z)(po,yo.Q0.FIX_SYNTAX_ERRORS,"Fix syntax errors"),(0,s.Z)(po,yo.Q0.IMPUTE,"Fill in missing values"),(0,s.Z)(po,yo.Q0.LAST,"Aggregate by last value"),(0,s.Z)(po,yo.Q0.MAX,"Aggregate by maximum value"),(0,s.Z)(po,yo.Q0.MEDIAN,"Aggregate by median value"),(0,s.Z)(po,yo.Q0.MIN,"Aggregate by mininum value"),(0,s.Z)(po,yo.Q0.REFORMAT,"Reformat"),(0,s.Z)(po,yo.Q0.REMOVE_OUTLIERS,"Remove outliers"),(0,s.Z)(po,yo.Q0.REMOVE,"Remove column(s)"),(0,s.Z)(po,yo.Q0.SELECT,"Keep columns"),(0,s.Z)(po,yo.Q0.SHIFT_DOWN,"Shift rows down in a column"),(0,s.Z)(po,yo.Q0.SHIFT_UP,"Shift rows up in a column"),(0,s.Z)(po,yo.Q0.SUM,"Aggregate by sum of values"),po)),(0,s.Z)(mo,yo.qs.ROW,(ho={},(0,s.Z)(ho,yo.Q0.DROP_DUPLICATE,"Drop duplicates"),(0,s.Z)(ho,yo.Q0.FILTER,"Filter"),(0,s.Z)(ho,yo.Q0.SORT,"Sort"),(0,s.Z)(ho,yo.Q0.REMOVE,"Remove rows"),ho)),mo),So=T.cd*T.iI,Eo=O.default.div.withConfig({displayName:"indexstyle__IconContainerStyle",componentId:"sc-oyfjzc-0"})(["align-items:center;border-radius:","px;border:1px solid transparent;display:flex;justify-content:center;"," "," "," "," "," ",""],Z.BG,(function(e){return e.border&&"\n    border: 1px dotted ".concat((e.theme.content||w.Z.content).active,";\n  ")}),(function(e){return e.blue&&"\n    background-color: ".concat(fn(c.DATA_LOADER,e).accent,";\n  ")}),(function(e){return e.purple&&"\n    background-color: ".concat(fn(c.TRANSFORMER,e).accent,";\n  ")}),(function(e){return e.yellow&&"\n    background-color: ".concat(fn(c.DATA_EXPORTER,e).accent,";\n  ")}),(function(e){return!e.compact&&"\n    height: ".concat(So+T.iI/2,"px;\n    width: ").concat(So+T.iI/2,"px;\n  ")}),(function(e){return e.compact&&"\n    height: ".concat(So/2+T.iI,"px;\n    width: ").concat(So/2+T.iI,"px;\n  ")}));!function(e){e.API="api",e.BIGQUERY="bigquery",e.FILE="file",e.GENERIC="generic",e.POSTGRES="postgres",e.REDSHIFT="redshift",e.S3="s3",e.SNOWFLAKE="snowflake"}(Co||(Co={}));var Io=(ko={},(0,s.Z)(ko,Co.API,"API"),(0,s.Z)(ko,Co.BIGQUERY,"Google BigQuery"),(0,s.Z)(ko,Co.FILE,"Local file"),(0,s.Z)(ko,Co.GENERIC,"Generic (no template)"),(0,s.Z)(ko,Co.POSTGRES,"PostgreSQL"),(0,s.Z)(ko,Co.REDSHIFT,"Amazon Redshift"),(0,s.Z)(ko,Co.S3,"Amazon S3"),(0,s.Z)(ko,Co.SNOWFLAKE,"Snowflake"),ko),To=(Oo={},(0,s.Z)(Oo,c.DATA_LOADER,[Co.GENERIC,Co.FILE,Co.API,Co.BIGQUERY,Co.POSTGRES,Co.REDSHIFT,Co.S3,Co.SNOWFLAKE]),(0,s.Z)(Oo,c.DATA_EXPORTER,[Co.GENERIC,Co.FILE,Co.BIGQUERY,Co.POSTGRES,Co.REDSHIFT,Co.S3,Co.SNOWFLAKE]),(0,s.Z)(Oo,c.TRANSFORMER,[Co.BIGQUERY,Co.POSTGRES,Co.REDSHIFT,Co.SNOWFLAKE]),Oo),Ao=Co,Ro=function(e,n){return To[e].map((function(t){return{indent:e===c.TRANSFORMER,label:function(){return Io[t]},onClick:function(){n({config:{data_source:t===Ao.GENERIC?null:t},language:i.PYTHON,type:e})},uuid:"".concat(e,"/").concat(t)}}))};function Do(e,n,t){return e.map((function(e){return{indent:!0,label:function(){return Po[n][e]},onClick:function(){t({config:{action_type:e,axis:n},language:i.PYTHON,type:c.TRANSFORMER})},uuid:"".concat(n,"_").concat(e)}})).sort((function(e,n){return e.label().localeCompare(n.label())}))}function Mo(e,n,t){var r=[];return e.forEach((function(e){if(e!==vo.MISC)r.push({indent:!0,items:Do(wo[n][e],n,t),label:function(){return e},uuid:"".concat(n,"_grouping_").concat((0,Pe.RA)(e))});else{var o=Do(wo[n][e],n,t);r.push.apply(r,(0,u.Z)(o))}})),r}function Fo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Bo(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Fo(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fo(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var No=function(e){var n=e.addNewBlock,t=e.compact,r=e.blockIdx,o=e.pipeline,l=e.setAddNewBlockMenuOpenIdx,a=e.setRecsWindowOpenBlockIdx,s=(0,h.useState)(null),d=s[0],f=s[1],p=(0,h.useRef)(null),m=(0,h.useRef)(null),v=(0,h.useRef)(null),g={compact:t,inline:!0},b=(0,h.useMemo)((function(){return Object.fromEntries(j.map((function(e){return[e,Ro(e,n)]})))}),[n]),x=Mo(Zo,yo.qs.COLUMN,n),y=Mo(_o,yo.qs.ROW,n),O=[{label:function(){return"Generic (no template)"},onClick:function(){n({language:i.PYTHON,type:c.TRANSFORMER})},uuid:"generic_transformer_action"},{isGroupingTitle:!0,label:function(){return"Data sources"},uuid:"data_sources_grouping"}].concat((0,u.Z)(b[c.TRANSFORMER]),[{isGroupingTitle:!0,label:function(){return"Column actions"},uuid:"column_actions_grouping"}],(0,u.Z)(x),[{isGroupingTitle:!0,label:function(){return"Row actions"},uuid:"row_actions_grouping"}],(0,u.Z)(y)),C=(0,h.useCallback)((function(){return f(null)}),[]),w=(0,h.useCallback)((function(){return null===l||void 0===l?void 0:l((function(e){return null===e?r:null}))}),[r,l]),Z=Cr.PYSPARK===(null===o||void 0===o?void 0:o.type);return(0,_.jsxs)(k.Z,{inline:!0,children:[(0,_.jsx)(Ae.Z,{onClickOutside:C,open:!0,children:(0,_.jsxs)(k.Z,{children:[(0,_.jsx)(go,{items:Z?b[c.DATA_LOADER]:[{label:function(){return"SQL"},onClick:function(){return n({language:i.SQL,type:c.DATA_LOADER})},uuid:"data_loaders/sql"},{label:function(){return"Python"},items:b[c.DATA_LOADER],uuid:"data_loaders/python"}],onClickCallback:C,open:0===d,parentRef:p,uuid:"data_loader_button",children:(0,_.jsx)(Wt,Bo(Bo({},g),{},{beforeElement:(0,_.jsx)(Eo,{blue:!0,compact:t,children:(0,_.jsx)(M.mm,{size:t?So/2:So})}),onClick:function(e){e.preventDefault(),f((function(e){return 0===e?null:0})),w()},uuid:"AddNewBlocks/Data_loader",children:"Data loader"}))}),(0,_.jsx)(D.Z,{ml:1}),(0,_.jsx)(go,{items:Z?O:[{label:function(){return"SQL"},onClick:function(){return n({language:i.SQL,type:c.TRANSFORMER})},uuid:"transformers/sql"},{label:function(){return"Python"},items:O,uuid:"transformers/python"}],onClickCallback:C,open:1===d,parentRef:m,uuid:"transformer_button",children:(0,_.jsx)(Wt,Bo(Bo({},g),{},{beforeElement:(0,_.jsx)(Eo,{compact:t,purple:!0,children:(0,_.jsx)(M.mm,{size:t?So/2:So})}),onClick:function(e){e.preventDefault(),f((function(e){return 1===e?null:1})),w()},uuid:"AddNewBlocks/Transformer",children:"Transformer"}))}),(0,_.jsx)(D.Z,{ml:1}),(0,_.jsx)(go,{items:Z?b[c.DATA_EXPORTER]:[{label:function(){return"SQL"},onClick:function(){return n({language:i.SQL,type:c.DATA_EXPORTER})},uuid:"data_exporters/sql"},{label:function(){return"Python"},items:b[c.DATA_EXPORTER],uuid:"data_exporters/python"}],onClickCallback:C,open:2===d,parentRef:v,uuid:"data_exporter_button",children:(0,_.jsx)(Wt,Bo(Bo({},g),{},{beforeElement:(0,_.jsx)(Eo,{compact:t,yellow:!0,children:(0,_.jsx)(M.mm,{inverted:!0,size:t?So/2:So})}),onClick:function(e){e.preventDefault(),f((function(e){return 2===e?null:2})),w()},uuid:"AddNewBlocks/Data_exporter",children:"Data exporter"}))})]})}),(0,_.jsx)(D.Z,{ml:1}),(0,_.jsx)(Wt,Bo(Bo({},g),{},{beforeElement:(0,_.jsx)(Eo,{border:!0,compact:t,children:(0,_.jsx)(M.mm,{size:t?So/2:So})}),onClick:function(e){e.preventDefault(),n({type:c.SCRATCHPAD})},uuid:"AddNewBlocks/Scratchpad",children:"Scratchpad"})),(0,_.jsx)(D.Z,{ml:1}),(0,_.jsx)(Wt,Bo(Bo({},g),{},{beforeElement:(0,_.jsx)(Eo,{compact:t,children:(0,_.jsx)(xo,{size:So*(t?.75:1.25)})}),onClick:function(e){e.preventDefault(),a(r)},uuid:"AddNewBlocks/Recommendations",children:"Recs"}))]})},Ho=t(89565),Lo=t.n(Ho),zo=t(62976),Uo=O.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-n38rkq-0"})([""," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;overflow:hidden;"," ",""],pn,(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).table,";\n  ")}),(function(e){return!e.executedAndIdle&&"\n    border-bottom-left-radius: ".concat(Z.n_,"px;\n    border-bottom-right-radius: ").concat(Z.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n  ")})),Wo=O.default.div.withConfig({displayName:"indexstyle__OutputRowStyle",componentId:"sc-n38rkq-1"})([""," "," ",""],(function(e){return e.first&&"\n    padding-top: ".concat(T.iI*T.cd,"px;\n  ")}),(function(e){return e.last&&"\n    padding-bottom: ".concat(T.iI*T.cd,"px;\n  ")}),(function(e){return e.contained&&"\n    padding-left: ".concat(68,"px;\n    padding-right: ").concat(T.iI*T.cd,"px;\n  ")})),Qo=O.default.div.withConfig({displayName:"indexstyle__HTMLOutputStyle",componentId:"sc-n38rkq-2"})(["table{border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;","}td,th{padding:0 8px;}a{","}"],pn,(function(e){return"\n      color: ".concat((e.theme.interactive||w.Z.interactive).linkPrimary,";\n    ")})),Go=O.default.div.withConfig({displayName:"indexstyle__ExtraInfoStyle",componentId:"sc-n38rkq-3"})([""," border-bottom-style:solid;border-bottom-width:2px;border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;",""],pn,(function(e){return"\n    background-color: ".concat((e.theme.borders||w.Z.borders).light,";\n    border-bottom-left-radius: ").concat(Z.n_,"px;\n    border-bottom-right-radius: ").concat(Z.n_,"px;\n  ")})),Vo=O.default.div.withConfig({displayName:"indexstyle__ExtraInfoContentStyle",componentId:"sc-n38rkq-4"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;"],T.iI,68,T.iI*T.cd,T.iI),Ko=O.default.div.withConfig({displayName:"indexstyle__ExtraInfoBorderStyle",componentId:"sc-n38rkq-5"})(["height:1px;width:100%;",""],(function(e){return"\n    border-top: 1px solid ".concat((e.theme.borders||w.Z.borders).medium,";\n  ")}));function Yo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function qo(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Yo(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yo(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Xo(e){var n={},t={};return null===e||void 0===e||e.forEach((function(e){var r=e.content,o=e.outputs,i=e.uuid;(null===o||void 0===o?void 0:o.length)>=1&&(n[i]=o.map((function(e){var n=e||{},t=n.sample_data,r=n.shape,o=n.text_data,i=n.type;return t?{data:qo({shape:r},t),type:i}:o&&(0,Pe.Pb)(o)?JSON.parse(o):o}))),t[i]=r})),{content:t,messages:n}}function Jo(e,n,t){e.forEach((function(e){(0,sn.t8)("".concat(t,"/").concat(e.uuid,"/codeCollapsed"),(0,sn.Od)("".concat(n,"/").concat(e.uuid,"/codeCollapsed"))),(0,sn.t8)("".concat(t,"/").concat(e.uuid,"/outputCollapsed"),(0,sn.Od)("".concat(n,"/").concat(e.uuid,"/outputCollapsed")))}))}function $o(e){return"".concat(e,"/").concat(sn.kP)}function ei(e){return(0,sn.U2)($o(e),[])}function ni(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ti(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ni(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ni(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ri=function(e){var n=e.block,t=e.collapsed,r=e.contained,o=void 0===r||r,i=e.hasError,c=e.hideExtraInfo,l=e.isInProgress,a=e.mainContainerWidth,s=e.messages,d=e.openSidekickView,f=e.pipeline,p=e.runCount,m=e.runEndTime,v=e.runStartTime,b=e.selected,y=e.setCollapsed,j=e.setOutputBlocks,O=e.setSelectedOutputBlock,w=n.status,Z=n.type,P=(0,h.useMemo)((function(){return(null===s||void 0===s?void 0:s.length)||0}),[s]),S=g.EXECUTED===w||!l&&0===p&&P>=1||!l&&p>=1&&m>=v,E=(0,h.useState)(),I=E[0],A=E[1],R=/\[__internal_output__\]/,F=function(e){return Array.isArray(e)?e.join("\n"):e},B=(0,h.useMemo)((function(){return s.reduce((function(e,n){var t=e.at(-1);return io.includes(null===t||void 0===t?void 0:t.type)&&(null===t||void 0===t?void 0:t.type)===n.type&&!F(null===n||void 0===n?void 0:n.data).match(R)?t.data+=F(n.data):io.includes(null===n||void 0===n?void 0:n.type)&&!F(null===n||void 0===n?void 0:n.data).match(R)?e.push(ti(ti({},n),{},{data:F(n.data)})):e.push(ti({},n)),e}),[])}),[s]),N=(0,h.useMemo)((function(){var e=function(e,n){var t=e.columns,r=e.index,o=e.rows,i=e.shape,c=n.borderTop,l=n.selected;return i&&A(i),o.length>=1&&(0,_.jsx)(zo.Z,{columns:t,disableScrolling:!l,index:r,maxHeight:60*T.iI,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!c,rows:o,width:a-(2+T.cd*T.iI*2+2+_r.nn)})};return null===B||void 0===B?void 0:B.map((function(n,t){var r=n.data,i=n.type;if(r&&0!==(null===r||void 0===r?void 0:r.length)){var c=[],l=(c=(c=Array.isArray(r)?r:[r]).filter((function(e){return e}))).length,u=[];return c.forEach((function(n,r){var c,a={contained:o,first:0===t&&0===r,last:t===B.length-1&&r===l-1},s=t>=1;if("string"===typeof n&&n.match(R)){var d=n.replace(R,"");if((0,Pe.Pb)(d)){var f=JSON.parse(d),p=f.data,h=f.type;to.TABLE===h&&(c=e(p,{borderTop:s,selected:b}),!0)}}else i===to.TABLE?(c=e((0,Pe.Pb)(n)?JSON.parse(n):n,{borderTop:s,selected:b}),!0):io.includes(i)?c=(0,_.jsx)(Wo,ti(ti({},a),{},{children:(0,_.jsx)(C.ZP,{monospace:!0,preWrap:!0,children:(0,_.jsx)(Lo(),{children:n})})})):i===to.TEXT_HTML?c=(0,_.jsx)(Wo,ti(ti({},a),{},{children:(0,_.jsx)(Qo,{children:(0,_.jsx)(C.ZP,{dangerouslySetInnerHTML:{__html:n},monospace:!0})})})):i===to.IMAGE_PNG&&(c=(0,_.jsx)("div",{style:{backgroundColor:"white"},children:(0,_.jsx)("img",{alt:"Image ".concat(t," from code output"),src:"data:image/png;base64, ".concat(n)})}));u.push((0,_.jsx)("div",{children:c},"code-output-".concat(t,"-").concat(r)))})),u}}))}),[B,o,a,b]);return(0,_.jsxs)(_.Fragment,{children:[o&&(0,_.jsx)(Uo,{blockType:Z,executedAndIdle:S,hasError:i,selected:b,children:!t&&N}),!o&&N,S&&!c&&(0,_.jsxs)(Go,{blockType:Z,hasError:i,selected:b,children:[(0,_.jsx)(Ko,{}),(0,_.jsxs)(k.Z,{justifyContent:"space-between",children:[y&&(0,_.jsx)(De.Z,{alignItems:"center",px:1,children:(0,_.jsx)(Te.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return y(!t)},transparent:!0,children:t?(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsx)(M._M,{muted:!0,size:2*T.iI}),"\xa0",(0,_.jsx)(C.ZP,{default:!0,children:"Expand output"})]}):(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsx)(M.Kh,{muted:!0,size:2*T.iI}),I&&(0,_.jsx)(D.Z,{ml:2,children:(0,_.jsx)(C.ZP,{children:"".concat(I[0]," rows x ").concat(I[1]," columns")})})]})})}),(0,_.jsx)(Vo,{children:(0,_.jsxs)(k.Z,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:[(0,_.jsx)(gr,{appearAbove:!0,appearBefore:!0,block:!0,label:p>=1&&v?"Last run at ".concat(new Date(v.valueOf()).toLocaleString()):i?"Block executed with errors":"Block executed successfully",size:null,widthFitContent:!0,children:(0,_.jsxs)(k.Z,{alignItems:"center",children:[p>=1&&Number(m)>Number(v)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(C.ZP,{small:!0,children:[(Number(m)-Number(v))/1e3,"s"]}),(0,_.jsx)(D.Z,{mr:1})]}),!i&&(0,_.jsx)(M.Jr,{size:2*T.iI,success:!0}),i&&(0,_.jsx)(ze,{danger:!0,size:2*T.iI,children:(0,_.jsx)(C.ZP,{bold:!0,monospace:!0,small:!0,children:"!"})})]})}),!i&&!x.includes(Z)&&(0,_.jsx)(D.Z,{pl:1,children:(0,_.jsx)(Te.Z,{afterIcon:(0,_.jsx)(M.M0,{muted:!0,size:1.75*T.iI}),basic:!0,noPadding:!0,onClick:function(){!function(e,n){var t=ei(e);t.includes(n)||(0,sn.t8)($o(e),[].concat((0,u.Z)(t),[n]))}(null===f||void 0===f?void 0:f.uuid,n.uuid),d(rn.DATA),j((function(e){return e.find((function(e){return e.uuid===n.uuid}))?e:(O(n),e.concat(n))}))},transparent:!0,children:(0,_.jsx)(C.ZP,{default:!0,children:"Expand table"})})})]})})]})]})]})},oi=t(40656),ii=O.default.svg.withConfig({displayName:"Convert__SVGStyle",componentId:"sc-fmw0vr-0"})([""]),ci=function(e){var n=e.fill,t=e.opacity,r=e.size,o=void 0===r?oi.C:r,i=e.style,c=e.viewBox,l=void 0===c?"0 0 12 12":c;return(0,_.jsxs)(ii,{fill:n,height:o,opacity:t,style:i,viewBox:l,width:o,children:[(0,_.jsx)("path",{clipRule:"evenodd",d:"M2.5 1C1.67157 1 1 1.67157 1 2.5v.0625c0 .27614-.223858.5-.5.5s-.5-.22386-.5-.5V2.5C0 1.11929 1.11929 0 2.5 0h7C10.8807 0 12 1.11929 12 2.5v7c0 1.3807-1.1193 2.5-2.5 2.5h-7C1.11929 12 0 10.8807 0 9.5v-.0625c0-.27614.223858-.5.5-.5s.5.22386.5.5V9.5c0 .8284.67157 1.5 1.5 1.5h7c.8284 0 1.5-.6716 1.5-1.5v-7c0-.82843-.6716-1.5-1.5-1.5h-7z",fill:"url(#paint0_linear_1332_60037)",fillRule:"evenodd"}),(0,_.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.05806 3.55806c.24408-.24408.6398-.24408.88388 0l2 2c.24408.24408.24408.6398 0 .88388l-2 2c-.24408.24408-.6398.24408-.88388 0-.24408-.24408-.24408-.6398 0-.88388l.93306-.93306H1C.654822 6.625.375 6.34518.375 6s.279822-.625.625-.625h5.99112l-.93306-.93306c-.24408-.24408-.24408-.6398 0-.88388z",fill:"#fff"}),(0,_.jsx)("defs",{children:(0,_.jsxs)("linearGradient",{id:"paint0_linear_1332_60037",x1:"-.618557",y1:"-.000001",x2:"10.5709",y2:".83113",gradientUnits:"userSpaceOnUse",children:[(0,_.jsx)("stop",{stopColor:"#FFCC19"}),(0,_.jsx)("stop",{offset:".585938",stopColor:"#2ECDF7"}),(0,_.jsx)("stop",{offset:"1",stopColor:"#9E7BFF"})]})})]})},li=O.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-knskck-0"})(["border-radius:","px;margin-top:","px;padding:","px;position:absolute;right:-","px;z-index:11;",""],Z.BG,1.5*T.iI,T.iI,T.iI/2,(function(e){return"\n    background-color: ".concat((e.theme.interactive||w.Z.interactive).defaultBackground,";\n  ")})),ui=function(e,n){var t=(null===n||void 0===n?void 0:n.upstream_blocks)||[];return c.CHART!==e.type&&c.SCRATCHPAD!==e.type&&c.DATA_LOADER!==(null===n||void 0===n?void 0:n.type)&&c.CHART!==(null===n||void 0===n?void 0:n.type)&&c.SCRATCHPAD!==(null===n||void 0===n?void 0:n.type)&&t.push(e.uuid),t},ai=function(e,n,t,r){for(var o,i=[],l=n.findIndex((function(n){return n.uuid===e.uuid}));!o&&l>=0;){var u;o=n[l-1],c.SCRATCHPAD===(null===(u=o)||void 0===u?void 0:u.type)&&(o=null),l-=1}return o&&i.push(o.uuid),j.map((function(n){return{label:function(){return"Convert to ".concat((0,Pe.wX)(y[n]))},onClick:function(){return r({converted_from:e.uuid,type:n,upstream_blocks:i})},uuid:"".concat(t,"/convert_to/").concat(n)}}))};function si(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function di(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?si(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):si(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var fi,pi=function(e){var n=e.addNewBlock,t=e.addWidget,r=e.block,o=e.blocks,i=e.deleteBlock,l=e.executionState,u=e.interruptKernel,a=e.runBlock,s=e.savePipelineContent,d=e.setOutputCollapsed,f=(e.updateBlock,r.all_upstream_blocks_executed),p=void 0===f||f,m=r.type,v=r.uuid,g=(0,h.useRef)(null),b=(0,h.useRef)(null),x=(0,h.useRef)(null),y=(0,h.useRef)(null),j=(0,h.useState)(!1),Z=j[0],P=j[1],S=(0,h.useState)(!1),E=S[0],I=S[1],A=(0,h.useState)(!1),F=A[0],B=A[1],N=(0,h.useState)(!1),L=N[0],z=N[1],U=(0,h.useContext)(O.ThemeContext),W=no.IDLE!==l,Q=fn(m,{theme:U}).accent,V=(0,h.useMemo)((function(){return ai(r,o,"CommandButtons",n).map((function(e){return di(di({},e),{},{onClick:function(){return s().then((function(){return e.onClick()}))}})}))}),[n,r,o,s]);return(0,_.jsx)(li,{children:(0,_.jsxs)(k.Z,{alignItems:"center",flexDirection:"column",children:[no.QUEUED===l&&(0,_.jsx)(Dt.Z,{color:(U||w.Z).content.active,type:"cylon"}),no.BUSY===l&&(0,_.jsx)(Dt.Z,{color:(U||w.Z).content.active}),!W&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(gr,{appearAbove:!0,appearBefore:!0,default:!0,label:(0,_.jsxs)(C.ZP,{children:["Run block \xa0 \xa0",(0,_.jsx)(R,{inline:!0,keyTextGroups:[[H.RJ,H.Lz]],monospace:!0,uuidForKey:v})]}),size:3*T.iI,widthFitContent:!0,children:(0,_.jsx)(Te.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){p?a({block:r}):B(!0)},children:(0,_.jsx)(ze,{color:Q,size:3*T.iI,children:(0,_.jsx)(M.Py,{black:!0,size:1.5*T.iI})})})}),(0,_.jsx)(Ae.Z,{disableEscape:!0,onClickOutside:function(){return B(!1)},open:F,children:(0,_.jsx)(G,{items:[{label:function(){return"Execute block"},onClick:function(){return a({block:r})},uuid:"execute_block"},{label:function(){return"Execute with upstream blocks"},onClick:function(){return a({block:r,runUpstream:!0})},uuid:"execute_upstream"}],left:25*-T.iI,onClickCallback:function(){return B(!1)},open:F,parentRef:x,topOffset:2*-T.iI,uuid:"execute_actions",width:25*T.iI})})]}),c.SCRATCHPAD===r.type&&(0,_.jsx)(D.Z,{mt:T.cd,children:(0,_.jsx)(go,{items:V,left:22*-T.iI,onClickCallback:function(){return I(!1)},onClickOutside:function(){return I(!1)},open:E,parentRef:b,topOffset:3*-T.iI,uuid:"CommandButtons/convert_block",children:(0,_.jsx)(gr,{appearBefore:!0,default:!0,label:(0,_.jsx)(C.ZP,{children:"Convert block"}),size:2.5*T.iI,widthFitContent:!0,children:(0,_.jsx)(Te.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return I(!E)},ref:b,children:(0,_.jsx)(ci,{size:2.5*T.iI})})})})}),[c.DATA_LOADER,c.TRANSFORMER].includes(r.type)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(D.Z,{mt:T.cd,ref:g,children:(0,_.jsx)(gr,{appearBefore:!0,default:!0,label:"Add chart",size:2.25*T.iI,widthFitContent:!0,children:(0,_.jsx)(Te.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return P(!0)},children:(0,_.jsx)(M.er,{size:2.25*T.iI})})})}),(0,_.jsx)(Ae.Z,{disableEscape:!0,onClickOutside:function(){return P(!1)},open:Z,children:(0,_.jsx)(Ie,{addWidget:t,block:r,left:25*-T.iI,onClickCallback:function(){return P(!1)},open:Z,parentRef:g,runBlock:a,topOffset:6*T.iI})})]}),(0,_.jsx)(D.Z,{mt:T.cd,children:(0,_.jsx)(gr,{appearBefore:!0,default:!0,label:(0,_.jsxs)(C.ZP,{children:["Delete block and file \xa0 \xa0",(0,_.jsx)(R,{inline:!0,keyTextGroups:[[H.jW],[H.jW]],monospace:!0,uuidForKey:v})]}),size:2.5*T.iI,widthFitContent:!0,children:(0,_.jsx)(Te.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){i(r),d(!1)},children:(0,_.jsx)(M.rF,{size:2.5*T.iI})})})}),W&&(0,_.jsx)(D.Z,{mt:T.cd,children:(0,_.jsx)(gr,{appearAbove:!0,appearBefore:!0,default:!0,label:(0,_.jsxs)(C.ZP,{children:["Interrupt kernel \xa0 \xa0",(0,_.jsx)(R,{inline:!0,monospace:!0,keyTextGroups:[[H.kA],[H.kA]],uuidForKey:v})]}),size:2.5*T.iI,widthFitContent:!0,children:(0,_.jsx)(Te.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return u()},children:(0,_.jsx)(ze,{borderSize:1.5,size:2.5*T.iI,children:(0,_.jsx)(M.x8,{size:1*T.iI})})})})}),(0,_.jsx)("div",{ref:y,children:(0,_.jsx)(D.Z,{mt:T.cd,children:(0,_.jsx)(gr,{appearBefore:!0,default:!0,label:(0,_.jsx)(C.ZP,{children:"More actions"}),size:2.5*T.iI,widthFitContent:!0,children:(0,_.jsx)(Te.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return z(!L)},children:(0,_.jsx)(ze,{borderSize:1.5,size:2.5*T.iI,children:(0,_.jsx)(M.mH,{size:T.iI})})})})})}),(0,_.jsx)(Ae.Z,{disableEscape:!0,onClickOutside:function(){return z(!1)},open:L,children:(0,_.jsx)(G,{items:[{label:function(){return"Execute with upstream blocks"},onClick:function(){return a({block:r,runUpstream:!0})},uuid:"execute_upstream"},{label:function(){return"Execute block and run tests"},onClick:function(){return a({block:r,runTests:!0})},uuid:"run_tests"}],left:25*-T.iI,onClickCallback:function(){return z(!1)},open:L,parentRef:y,topOffset:6*T.iI,uuid:"FileHeaderMenu/file_items",width:25*T.iI})})]})})},hi=t(55378);function mi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function vi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?mi(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function gi(e,n){var t=e;t.includes("__init__")||t.push("__init__");var r,o=t.length;return(0,kn.w6)(o).forEach((function(e,i){if(r)return r;var c=t.slice(0,o-i).join("/");r=n["".concat(c,".py")]})),r}function bi(e,n,t){var r=function(e){var n=new RegExp("([\\w_]+)[ ]*=[ ]*([\\w_]+)","g");return(0,u.Z)(e.matchAll(n)).map((function(e){return{assignmentValue:e[2],variableName:e[1]}}))}(e),o=qn(e,n),i=r.find((function(e){var n=e.variableName;return o.match(new RegExp(n))}));if(i){var c=i.assignmentValue,l=Yn(e)[c];if(l){var s,d=gi(l.split(" as ")[0].replace("from ","").replace("import ","").split(" ").reduce((function(e,n){return n.trim()?e.concat(n):e}),[]).join(".").split("."),t),f=function(e,n){var t=e;n&&(t=t.split(" as ".concat(n))[0]);var r="[\\w.]+",o=["from ".concat(r," import (").concat(r,")"),"import (".concat(r,")")],i=new RegExp("(".concat(o.join("|"),")"),"g"),c=(0,u.Z)(t.matchAll(i))[0];if(c){var l=(0,a.Z)(c,4),s=l[2],d=l[3];return s||d}}(l,c);return null===d||void 0===d||null===(s=d.methods_for_class)||void 0===s?void 0:s[f]}}return[]}function xi(e,n,t){var r,o,i;return((null===(r=t.outputs)||void 0===r||null===(o=r[0])||void 0===o||null===(i=o.sample_data)||void 0===i?void 0:i.columns)||[]).map((function(t){return{label:"".concat(t," column"),kind:e.languages.CompletionItemKind.Variable,insertText:"'".concat(t,"'"),range:n}}))}function yi(e,n){var t=e.word.split(""),r=new RegExp(t.reduce((function(e,n,r){var o=t[r+1],i=o?"^".concat(o):"";return e+"".concat(n,"[w ").concat(i,"]*")}),""));return n.reduce((function(e,n){return n.label.match(r)?e.concat(n):e}),[])}function ji(e){var n=e.autocompleteItems,t=e.block,r=e.blocks,o=e.pipeline,i=t.type,l=t.upstream_blocks,s=(0,kn.HK)(n,(function(e){return e.id}));return function(t){return function(d,f){var p=[],h=d.getValueInRange({endColumn:f.column,endLineNumber:f.lineNumber,startColumn:1,startLineNumber:1}),m=d.getWordUntilPosition(f),v=m.endColumn,g=m.startColumn,b={endColumn:v,endLineNumber:f.lineNumber,startColumn:g,startLineNumber:f.lineNumber},x=bi(h,b,s);if((null===x||void 0===x?void 0:x.length)>=1){var y=yi(m,x.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Method,label:e,range:b}})));if(y.length>=1)return{suggestions:y}}var j=function(e,n,t){var r=qn(e,n);if(r=r.match(/([\w_]+)./)){var o=Yn(e)[r[1]];if(o){var i=gi(o.split(" as ")[0].replace("from ","").replace("import ","").split(" ").reduce((function(e,n){return n.trim()?e.concat(n):e}),[]).join(".").split("."),t);if(null!==i&&void 0!==i&&i.functions)return null===i||void 0===i?void 0:i.functions}}return[]}(h,b,s);if((null===j||void 0===j?void 0:j.length)>=1){var k=yi(m,j.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Function,label:e,range:b}})));if(k.length>=1)return{suggestions:k}}if((null===l||void 0===l?void 0:l.length)>=1){var O=new RegExp("\n@".concat(i));h.match(O)&&p.push.apply(p,(0,u.Z)(yi(m,function(e,n,t){var r=t.block,o=t.blocks,i=r.upstream_blocks,c=(0,kn.HK)(o,(function(e){return e.uuid}));return i.map((function(t,r){var o=c[t].type,i=0===r?"df":"args[".concat(r-1,"]");return{label:"df ".concat(t," ").concat(o," block"),kind:e.languages.CompletionItemKind.Variable,documentation:"Variable for ".concat(o," ").concat(t," data."),insertText:i,range:n}}))}(t,b,e))))}if(m.word.match(/i|f/)){var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,o=(arguments.length>2?arguments[2]:void 0).word,i=new Set,c={};e.forEach((function(e){var n=e.group,t=e.id,r=e.imports;if([fi.MAGE_LIBRARY,fi.USER_LIBRARY].includes(n)){var o=t;o.match(/__init__.py/)&&(o=o.replace(/\/__init__.py/,"")),o=o.split(".py")[0].replaceAll("/","."),c[o]=e}var l=t.replace(".py","").replace("/__init__","").split("/");if(1===l.length)i.add("import ".concat(l[0]));else if(l.length>=2){var u=l.slice(0,l.length-1).join(".");i.add("from ".concat(u," import ").concat(l[l.length-1]))}r.forEach((function(e){return i.add(e)}))}));var l,s="i"===o,d="f"===o,f=s?"import":d?"from":"",p=qn(n,r);if(s&&p.match(/from/)&&(l=p.match(/from ([A-Za-z0-9_.]+) /)[1]),l&&c[l]){var h=c[l],m=h.classes,v=h.constants,g=h.files,b=h.functions,x=[];return[[v,t.languages.CompletionItemKind.Constant],[m,t.languages.CompletionItemKind.Class],[b,t.languages.CompletionItemKind.Function]].forEach((function(e){var n=(0,a.Z)(e,2),t=n[0],o=n[1];t.forEach((function(e){x.push({filterText:"import ".concat(e),insertText:"import ".concat(e),kind:o,label:e,range:r})}))})),g.forEach((function(e){var n=e.split("/"),o=n[n.length-1].split(".py")[0];x.push({filterText:"import ".concat(o),insertText:"import ".concat(o),kind:t.languages.CompletionItemKind.Variable,label:o,range:r})})),x}return(0,u.Z)(i).map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.File,label:e,range:r}})).concat(Object.entries(c).map((function(e){var n=(0,a.Z)(e,2),o=n[0];return n[1],{filterText:"".concat(f," ").concat(o),insertText:"".concat(f," ").concat(o," "),kind:t.languages.CompletionItemKind.File,label:"".concat(o),range:vi({},r)}})))}(n,h,m,t,b,e);p.push.apply(p,(0,u.Z)(C))}if(c.CHART===i||c.SCRATCHPAD===i){var w=[];if(c.CHART===i?l.forEach((function(e,n){w.push({block:r.find((function(n){var t=n.uuid;return e===t})),matchIndex:0,variableName:"df_".concat(n+1)})})):c.SCRATCHPAD===i&&function(e,n){return e.map((function(e){return{block:e,regex:new RegExp("([\\w_]+)[ ]*=[ ]*get_variable\\('".concat(n.uuid,"', '").concat(e.uuid,"', 'df'\\)"),"g")}}))}(r,o).forEach((function(e){var n=e.block,t=e.regex,r=h.matchAll(t);(0,u.Z)(r).forEach((function(e){var t=null===e||void 0===e?void 0:e.index,r=null===e||void 0===e?void 0:e[1];r&&w.push({block:n,matchIndex:t,variableName:r})}))})),w.length>=1){var Z,_=null===(Z=h.split("\n")[f.lineNumber-1])||void 0===Z?void 0:Z.slice(0,m.startColumn-1);if(_){var P=[];if(w.forEach((function(e){var n=e.block,r=e.matchIndex,o=e.variableName,i=new RegExp("".concat(o,"\\["));_.match(i)&&P.push({items:xi(t,b,n),matchIndex:r})})),P.length>=1)return{suggestions:yi(m,(0,kn.YC)(P,"matchIndex",{ascending:!1})[0].items)}}}1===g&&(c.CHART===i?p.push.apply(p,(0,u.Z)(yi(m,l.map((function(e,n){var r="df_".concat(n+1);return{label:"".concat(r," ").concat(e," block"),kind:t.languages.CompletionItemKind.Snippet,insertText:r,range:b}}))))):c.SCRATCHPAD===i&&p.push.apply(p,(0,u.Z)(yi(m,function(e,n,t){var r=t.block,o=t.blocks,i=t.pipeline;return o.reduce((function(t,o){var l=o.type,u=o.uuid;return r.uuid!==u&&[c.DATA_LOADER,c.TRANSFORMER].includes(l)?t.concat({label:"df ".concat(u," ").concat(l," block"),kind:e.languages.CompletionItemKind.Snippet,documentation:"Get the data from ".concat(l," block ").concat(u,"."),insertText:"from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(i.uuid,"', '").concat(u,"', 'df')\n"),range:n}):t}),[])}(t,b,e)))))}var S=new Set;r.concat({content:h}).forEach((function(e){var n=e.content;(0,u.Z)(n.matchAll("([A-Za-z_0-9]+)","g")).forEach((function(e){return S.add(e[1])}))}));var E=(0,u.Z)(S);if(E.length){var I=E.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Variable,label:e,range:b}}));p.push.apply(p,(0,u.Z)(yi(m,I)))}return{suggestions:p}}}}function ki(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Oi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ki(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ki(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ci(e,n){var t,r,o,l,d,f=e.addNewBlock,p=e.addNewBlockMenuOpenIdx,v=e.addWidget,g=e.autocompleteItems,b=e.block,x=e.blockIdx,y=e.blockRefs,j=e.blocks,w=e.dataProviders,Z=e.defaultValue,P=void 0===Z?"":Z,S=e.deleteBlock,E=e.executionState,I=e.fetchFileTree,A=e.fetchPipeline,R=e.height,F=e.interruptKernel,B=e.mainContainerRef,N=e.mainContainerWidth,L=e.messages,U=void 0===L?[]:L,W=e.noDivider,Q=e.onChange,G=e.openSidekickView,V=e.pipeline,K=e.runBlock,Y=e.runningBlocks,q=e.savePipelineContent,X=e.selected,J=e.setAddNewBlockMenuOpenIdx,$=e.setAnyInputFocused,ee=e.setEditingBlock,ne=e.setOutputBlocks,te=e.setRecsWindowOpenBlockIdx,re=e.setSelected,oe=e.setSelectedOutputBlock,ie=e.setTextareaFocused,ae=e.textareaFocused,se=e.widgets,de=(0,h.useContext)(O.ThemeContext),fe=(0,h.useState)(!1),pe=fe[0],he=fe[1],me=(0,h.useState)(null),ve=me[0],ge=me[1],be=(0,h.useState)(!1),xe=be[0],ye=be[1],je=(0,h.useState)(!1),ke=je[0],Oe=je[1],Ce=(0,h.useState)(P),we=Ce[0],Ze=Ce[1],_e=(0,h.useState)(null),Se=_e[0],Ee=_e[1],Ie=(0,h.useState)((l={},(0,s.Z)(l,ce,null===b||void 0===b||null===(t=b.configuration)||void 0===t?void 0:t.data_provider),(0,s.Z)(l,le,null===b||void 0===b||null===(r=b.configuration)||void 0===r?void 0:r.data_provider_profile),(0,s.Z)(l,ue,null===b||void 0===b||null===(o=b.configuration)||void 0===o?void 0:o.data_provider_schema),l)),Ae=Ie[0],Re=Ie[1],Me=(0,h.useState)(null),Fe=Me[0],Be=Me[1],Ne=(0,h.useState)(!1),He=Ne[0],Le=Ne[1],Ue=(0,h.useState)(b.uuid),We=Ue[0],Qe=Ue[1],Ge=(0,h.useState)(!1),Ve=Ge[0],Ke=Ge[1],Ye=(0,h.useState)(0),qe=Ye[0],Xe=Ye[1],Je=(0,h.useState)(null),$e=Je[0],en=Je[1],nn=(0,h.useState)(null),tn=nn[0],rn=nn[1],on=(0,h.useState)(U),cn=on[0],ln=on[1],un=(0,Ln.Z)(b);(0,h.useEffect)((function(){if(JSON.stringify(b)!=JSON.stringify(un)){var e=Xo([b]).messages;ln((null===e||void 0===e?void 0:e[null===b||void 0===b?void 0:b.uuid])||[])}}),[b,un,ln]);var an=(0,Ln.Z)(U);(0,h.useEffect)((function(){"undefined"!==typeof U&&U.length!==(null===an||void 0===an?void 0:an.length)&&ln(U)}),[U,an,ln]);var dn=(0,h.useMemo)((function(){var e=new Set;return null===w||void 0===w||w.forEach((function(n){var t=n.profiles;e=new Set([].concat((0,u.Z)(e),(0,u.Z)(t)))})),(0,u.Z)(e)}),[w]),pn=(0,h.useMemo)((function(){return"".concat(null===V||void 0===V?void 0:V.uuid,"/").concat(null===b||void 0===b?void 0:b.uuid,"/codeCollapsed")}),[null===V||void 0===V?void 0:V.uuid,null===b||void 0===b?void 0:b.uuid]),yn=(0,h.useMemo)((function(){return"".concat(null===V||void 0===V?void 0:V.uuid,"/").concat(null===b||void 0===b?void 0:b.uuid,"/outputCollapsed")}),[null===V||void 0===V?void 0:V.uuid,null===b||void 0===b?void 0:b.uuid]);(0,h.useEffect)((function(){Oe((0,sn.U2)(pn,!1)),Ke((0,sn.U2)(yn,!1))}),[]);var jn=(0,h.useRef)(null),On=(0,h.useMemo)((function(){return(0,kn.HK)(j,(function(e){return e.uuid}))}),[j]),Cn=(0,h.useMemo)((function(){return!!se.find((function(e){return e.upstream_blocks.includes(b.uuid)}))}),[b,se]),wn=(0,h.useCallback)((function(e){var n=e||{},t=n.block,r=n.code,o=n.disableReset,i=n.runDownstream,c=n.runUpstream,l=n.runTests;K({block:t,code:r||we,runDownstream:i||Cn,runUpstream:c||!1,runTests:l||!1}),o||(Xe(1+Number(qe)),en(null),Ke(!1))}),[we,Cn,qe,K,Xe,en]),Zn=!!Y.find((function(e){return e.uuid===b.uuid}))||(null===cn||void 0===cn?void 0:cn.length)>=1&&E!==no.IDLE;(0,h.useEffect)((function(){Zn&&rn(Number(new Date))}),[Zn,rn]);var _n=(0,Ln.Z)(E);(0,h.useEffect)((function(){E===no.IDLE&&E!==_n&&en(Number(new Date))}),[E,_n,en]);var Pn=(0,h.useCallback)((function(e){var n=e.editorRect,t=(n.height,n.top),r=e.position.lineNumber;if(null!==B&&void 0!==B&&B.current){var o=B.current.getBoundingClientRect().height,i=21*r;if(t+i>o){var c=B.current.scrollTop+(i-o+t);B.current.scrollTo(0,c)}else if(i+t<21){var l=B.current.scrollTop+(i+t-21);B.current.scrollTo(0,l)}}}),[B]),Sn=(0,h.useMemo)((function(){return(null===Fe||void 0===Fe?void 0:Fe.length)>=0?Fe.map((function(e){return{data:e,execution_state:no.IDLE,type:to.TEXT_PLAIN}})):cn.filter((function(e){return null===e||void 0===e?void 0:e.type}))}),[Fe,cn]),En=!!Sn.find((function(e){return e.error})),In=fn(b.type,{theme:de}).accent,Tn=(null===b||void 0===b||null===(d=b.upstream_blocks)||void 0===d?void 0:d.length)||0,An=(0,h.useMemo)((function(){return{blockType:b.type,hasError:En,selected:X}}),[b.type,En,X]),Rn=Sn.length>=1,Dn=(0,h.useCallback)((function(){X||($(!1),re(!0))}),[$,re]),Fn=(0,m.Db)(Qt.ZP.blocks.pipelines.useUpdate(null===V||void 0===V?void 0:V.uuid,b.uuid),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(){Le(!1),A(),I(),Ze(we)},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})},onError:function(e){var n=(0,Gt.qQ)(e).messages;Be(n)}}),Bn=(0,a.Z)(Fn,1)[0],Nn="CodeBlock/".concat(b.uuid),Hn=(0,z.y)(),zn=Hn.registerOnKeyDown,Un=Hn.unregisterOnKeyDown;(0,h.useEffect)((function(){return function(){Un(Nn)}}),[Un,Nn]),zn(Nn,(function(e,n,t){He&&String(t[0])===String(H.Uq)&&String(t[1])!==String(H.zX)?Bn({block:Oi(Oi({},b),{},{name:We})}):X&&(Vt([H.zX,H.Uq],n)||Vt([H.PQ,H.Uq],n)?wn({block:b}):Vt([H.XR,H.Uq],n)&&(e.preventDefault(),f({language:b.language,type:b.type,upstream_blocks:[b.uuid]}),wn({block:b})))}),[f,b,He,We,wn,X,Bn]),(0,h.useEffect)((function(){var e;return tn&&(e=setInterval((function(){return Ee(Number(new Date))}),1e3)),function(){return clearInterval(e)}}),[tn]);var Wn=(0,h.useCallback)((function(e){return(0,s.Z)({},c.SCRATCHPAD,(0,u.Z)(ai(e,j,"block_menu/scratchpad",f)).map((function(e){return Oi(Oi({},e),{},{onClick:function(){return q().then((function(){return e.onClick()}))}})})))[e.type]}),[f,j,ai,q]),Qn=(0,h.useMemo)((function(){return(0,_.jsx)(Jn,{autoHeight:!0,autocompleteProviders:ve,height:R,language:b.language,onChange:function(e){Ze(e),null===Q||void 0===Q||Q(e)},onDidChangeCursorPosition:Pn,placeholder:"Start typing here...",selected:X,setSelected:re,setTextareaFocused:ie,shortcuts:[function(e,n){return function(e,n){return{contextMenuGroupId:"navigation",contextMenuOrder:1.5,id:"executeCode",keybindingContext:null,keybindings:[e.KeyMod.CtrlCmd|e.KeyCode.Enter],label:"Run selected block",precondition:null,run:function(){return n()}}}(e,(function(){wn({block:b,code:n.getValue()})}))}],textareaFocused:ae,value:we,width:"100%"})}),[ve,b,j,we,R,V,X,ae]);(0,h.useEffect)((function(){ge({python:ji({autocompleteItems:g,block:b,blocks:j,pipeline:V})})}),[g,b,j,V]);var Gn=(0,h.useMemo)((function(){return(0,_.jsx)(ri,Oi(Oi({},An),{},{block:b,collapsed:Ve,isInProgress:Zn,mainContainerWidth:N,messages:Sn,openSidekickView:G,pipeline:V,runCount:qe,runEndTime:$e,runStartTime:tn,selected:X,setCollapsed:function(e){Ke((function(){return(0,sn.t8)(yn,e),e}))},setOutputBlocks:ne,setSelectedOutputBlock:oe}))}),[b,An,Zn,N,Sn,Ve,qe,$e,tn,X]),Vn=(0,h.useCallback)((function(){return ye(!1)}),[]),Kn=(0,h.useCallback)((function(e){Re((function(n){var t=Oi(Oi({},n),e);return t.data_provider&&t.data_provider_profile&&q({block:{configuration:t,uuid:b.uuid}}),t}))}),[b,q]);return(0,_.jsxs)("div",{ref:n,style:{position:"relative",zIndex:x===p?11:null},children:[(0,_.jsxs)(k.Z,{alignItems:"center",justifyContent:"space-between",style:{marginBottom:T.iI/2},children:[(0,_.jsxs)(De.Z,{alignItems:"center",flex:1,children:[(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsx)(ze,{color:In,size:1.5*T.iI,square:!0}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsx)(go,{items:Wn(b),onClickCallback:Vn,onClickOutside:Vn,open:xe,parentRef:jn,uuid:"CodeBlock/block_menu",children:(0,_.jsxs)(C.ZP,{color:In,monospace:!0,children:[c.DATA_EXPORTER===b.type&&(0,_.jsx)(_.Fragment,{children:"DATA EXPORTER"}),c.DATA_LOADER===b.type&&(0,_.jsx)(_.Fragment,{children:"DATA LOADER\xa0"}),c.SCRATCHPAD===b.type&&(0,_.jsx)(_.Fragment,{children:"SCRATCHPAD\xa0"}),c.TRANSFORMER===b.type&&(0,_.jsx)(_.Fragment,{children:"TRANSFORMER\xa0"})]})}),c.SCRATCHPAD===b.type&&(0,_.jsx)(Te.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return ye(!0)},transparent:!0,children:(0,_.jsx)(M.K5,{muted:!0})}),(0,_.jsx)(D.Z,{mr:1})]}),(0,_.jsx)(D.Z,{mr:T.cd}),(0,_.jsx)(M.iU,{size:1.5*T.iI}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsx)(wr,{bold:!1,inputValue:We,monospace:!0,muted:!0,notRequired:!0,onBlur:function(){return setTimeout((function(){$(!1),Le(!1)}),300)},onChange:function(e){Qe(e.target.value),e.preventDefault()},onClick:function(){$(!0),Le(!0)},onFocus:function(){$(!0),Le(!0)},stacked:!0,value:!He&&b.uuid}),He&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(D.Z,{ml:1}),(0,_.jsx)(Mn.Z,{onClick:function(){return q({block:{name:We,uuid:b.uuid}}).then((function(){Le(!1),A(),I()}))},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Update name"})]})]})]}),c.DATA_LOADER!==b.type&&c.SCRATCHPAD!==b.type&&(0,_.jsx)(k.Z,{alignItems:"center",children:(0,_.jsx)(gr,{appearBefore:!0,block:!0,label:"\n                ".concat((0,Pe._6)("parent block",Tn),". ").concat(0===Tn?"Click to select 1 or more blocks to depend on.":"Edit parent blocks.","\n              "),size:null,widthFitContent:!0,children:(0,_.jsx)(Te.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){var e;re(!0),ee({upstreamBlocks:{block:b,values:null===(e=b.upstream_blocks)||void 0===e?void 0:e.map((function(e){return{uuid:e}}))}})},children:(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsxs)(C.ZP,{monospace:Tn>=1,underline:0===Tn,children:[0===Tn&&"Click to set parent blocks",Tn>=1&&(0,Pe._6)("parent block",Tn)]}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsx)(M.Kq,{size:2*T.iI})]})})})}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsx)(D.Z,{px:1,children:(0,_.jsx)(Te.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){Oe((function(e){return(0,sn.t8)(pn,!e),!e})),ke||Ke((function(){return(0,sn.t8)(yn,!0),!0}))},transparent:!0,children:ke?(0,_.jsx)(M._M,{muted:!0,size:2*T.iI}):(0,_.jsx)(M.Kh,{muted:!0,size:2*T.iI})})})]}),(X||Zn)&&(0,_.jsx)(pi,{addNewBlock:f,addWidget:v,block:b,blocks:j,deleteBlock:S,executionState:E,interruptKernel:F,runBlock:wn,savePipelineContent:q,setOutputCollapsed:Ke,updateBlock:Bn}),(0,_.jsxs)(hn,{onClick:function(){return Dn()},children:[(0,_.jsxs)(mn,Oi(Oi({},An),{},{className:X&&ae?"selected":null,hasOutput:Rn,children:[i.SQL===b.language&&!ke&&(0,_.jsx)(bn,{children:(0,_.jsxs)(k.Z,{children:[(0,_.jsxs)(hi.Z,{compact:!0,label:"Data provider",onChange:function(e){return Kn((0,s.Z)({},ce,e.target.value))},small:!0,value:Ae.data_provider,children:[(0,_.jsx)("option",{value:""}),null===w||void 0===w?void 0:w.map((function(e){var n=e.id,t=e.value;return(0,_.jsx)("option",{value:t,children:n})}))]}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsxs)(hi.Z,{compact:!0,label:"Profile",onChange:function(e){return Kn((0,s.Z)({},le,e.target.value))},small:!0,value:Ae.data_provider_profile,children:[(0,_.jsx)("option",{value:""}),null===dn||void 0===dn?void 0:dn.map((function(e){return(0,_.jsx)("option",{value:e,children:e})}))]}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsx)(C.ZP,{monospace:!0,muted:!0,small:!0,children:"Schema to save data:"}),(0,_.jsx)("span",{children:"\xa0"}),(0,_.jsx)(tr.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){$(!1)}),300)},onChange:function(e){Kn((0,s.Z)({},ue,e.target.value)),e.preventDefault()},onFocus:function(){$(!0)},small:!0,value:Ae.data_provider_schema})]})]})}),b.upstream_blocks.length>=1&&!ke&&(0,_.jsxs)(bn,{children:[(0,_.jsxs)(C.ZP,{small:!0,children:[i.SQL!==b.language&&"Positional arguments for decorated function:",i.SQL===b.language&&"Tables available in query from upstream blocks:"]}),(0,_.jsxs)(D.Z,{mt:1,children:[i.SQL!==b.language&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(C.ZP,{monospace:!0,muted:!0,small:!0,children:[c.DATA_EXPORTER===b.type&&"@data_exporter",c.DATA_LOADER===b.type&&"@data_loader",c.TRANSFORMER===b.type&&"@transformer"]}),(0,_.jsxs)(C.ZP,{monospace:!0,muted:!0,small:!0,children:["def ",(c.DATA_EXPORTER===b.type?"export_data":c.DATA_LOADER===b.type&&"load_data")||c.TRANSFORMER===b.type&&"transform_df","(",b.upstream_blocks.map((function(e,n){return n>=1?"df_".concat(n+1):"df"})).join(", "),"):"]})]}),b.upstream_blocks.map((function(e,n){var t=On[e],r=fn(null===t||void 0===t?void 0:t.type,{theme:de}).accent;return(0,_.jsxs)("div",{children:[i.SQL!==b.language&&(0,_.jsxs)(C.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:["\xa0\xa0\xa0\xa0df",n>=1?"_".concat(n+1):null]}),i.SQL===b.language&&(0,_.jsx)(C.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"{{ df_".concat(n+1," }}")})," ",(0,_.jsx)(C.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"\u2192"})," ",(0,_.jsx)(Mn.Z,{color:r,onClick:function(){var e,n,r=null===y||void 0===y||null===(e=y.current)||void 0===e?void 0:e["".concat(null===t||void 0===t?void 0:t.type,"s/").concat(null===t||void 0===t?void 0:t.uuid,".py")];null===r||void 0===r||null===(n=r.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,_.jsx)(C.ZP,{color:r,inline:!0,monospace:!0,small:!0,children:e})})]},e)}))]})]}),ke?(0,_.jsx)(D.Z,{px:1,children:(0,_.jsxs)(C.ZP,{monospace:!0,muted:!0,children:["(",(0,Pe._6)("line",null===we||void 0===we?void 0:we.split(/\r\n|\r|\n/).length)," collapsed)"]})}):Qn,Zn&&Se&&Se>tn&&(0,_.jsx)(xn,{children:(0,_.jsxs)(C.ZP,{muted:!0,children:["".concat(Math.round((Se-tn)/1e3)),"s"]})})]})),Rn&&Gn]}),!W&&(0,_.jsxs)(vn,{onMouseEnter:function(){return he(!0)},onMouseLeave:function(){he(!1),J(null)},children:[pe&&(0,_.jsx)(No,{addNewBlock:function(e){var n=e.content,t=e.configuration,r=ui(b,e);return[c.DATA_LOADER,c.TRANSFORMER].includes(b.type)&&c.SCRATCHPAD===e.type&&(n="from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(V.uuid,"', '").concat(b.uuid,"', 'df')\n")),i.SQL===b.language&&(t=Oi(Oi({},b.configuration),t)),f(Oi(Oi({},e),{},{configuration:t,content:n,upstream_blocks:r}))},blockIdx:x,compact:!0,pipeline:V,setAddNewBlockMenuOpenIdx:J,setRecsWindowOpenBlockIdx:te}),(0,_.jsx)(gn,{className:"block-divider-inner"})]})]})}!function(e){e.DATA_EXPORTER="data_exporter",e.DATA_LOADER="data_loader",e.MAGE_LIBRARY="mage_library",e.TRANSFORMER="transformer",e.USER_LIBRARY="user_library"}(fi||(fi={}));var wi=h.forwardRef(Ci);function Zi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Zi(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Zi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Pi=function(e){var n=e.addNewBlockAtIndex,t=e.addWidget,r=e.anyInputFocused,o=e.autocompleteItems,l=e.blockRefs,u=e.blocks,a=void 0===u?[]:u,d=e.dataProviders,f=e.deleteBlock,p=e.fetchFileTree,m=e.fetchPipeline,v=e.interruptKernel,g=(e.isPipelineUpdating,e.kernel,e.mainContainerRef),b=e.mainContainerWidth,x=e.messages,y=e.onChangeCodeBlock,j=e.openSidekickView,k=e.pipeline,O=e.pipelineContentTouched,C=(e.pipelineLastSaved,e.restartKernel),w=e.runBlock,Z=e.runningBlocks,P=void 0===Z?[]:Z,S=e.savePipelineContent,E=e.selectedBlock,I=e.setAnyInputFocused,A=e.setEditingBlock,R=(e.setMessages,e.setOutputBlocks),M=e.setPipelineContentTouched,F=e.setRecsWindowOpenBlockIdx,B=(e.setRunningBlocks,e.setSelectedBlock),N=e.setSelectedOutputBlock,L=e.setTextareaFocused,U=e.textareaFocused,W=e.widgets,Q=(0,h.useState)(!1),G=Q[0],V=Q[1],K=(0,h.useState)(!0),Y=K[0],q=K[1],X=(0,h.useState)(null),J=X[0],$=X[1],ee=(0,h.useMemo)((function(){return P.reduce((function(e,n,t){return _i(_i({},e),{},(0,s.Z)({},n.uuid,_i(_i({},n),{},{priority:t})))}),{})}),[P]),ne=(0,Ln.Z)(E),te=(0,h.useMemo)((function(){return a.length}),[a]),re="PipelineDetail/index",oe=(0,z.y)(),ie=oe.registerOnKeyDown,ce=oe.unregisterOnKeyDown;(0,h.useEffect)((function(){return function(){ce(re)}}),[ce,re]),ie(re,(function(e,t,o){if(O&&Vt([H.zX,H.hS],t)){e.preventDefault();"undefined"!==typeof location&&window.confirm("You have changes that are unsaved. Click cancel and save your changes before reloading page.")&&location.reload()}else if(Vt([H.zX,H.Um],t))e.preventDefault(),S();else if(U)t[H.vP]?L(!1):O||H.Z1.find((function(e){return t[e]}))||M(!0);else{if(E){var i=a.findIndex((function(e){var n=e.uuid;return E.uuid===n}));if(t[H.vP])B(null),F(null);else if(o[0]===H.xD&&o[1]===H.xD)v();else if(o[0]===H.l1&&o[1]===H.l1&&-1!==i)f(E).then((function(e){null!==e&&void 0!==e&&e.error||setTimeout((function(){i===a.length-1?B(a[i-1]):a.length>=0?B(a[i+1]):B(null)}),100)}));else if(t[H.Bu]&&i>=1){var u=a[i-1];if(u){var s,d;B(u);var p="".concat(u.type,"s/").concat(u.uuid,".py");null===(s=l.current[p])||void 0===s||null===(d=s.current)||void 0===d||d.scrollIntoView()}}else if(t[H.kD]&&i<=te-2){var h=a[i+1];if(h){var m,g;B(h);var b="".concat(h.type,"s/").concat(h.uuid,".py");null===(m=l.current[b])||void 0===m||null===(g=m.current)||void 0===g||g.scrollIntoView()}}else Vt([H.Uq],t)?L(!0):!r&&Vt([H.zH],t)?n({type:c.SCRATCHPAD},i,B):!r&&Vt([H.Fv],t)&&n({type:c.SCRATCHPAD},i+1,B)}else ne&&t[H.Uq]&&B(ne);o[0]===H.OC&&o[1]===H.OC&&C()}}),[n,r,l.current,a,v,te,O,C,S,E,ne,M,B,L,U]),(0,h.useEffect)((function(){var e=setInterval((function(){O&&S()}),5e3);return function(){clearInterval(e)}}),[O,S]),(0,h.useEffect)((function(){setTimeout((function(){return V(!0)}),600)}),[k]);var le=(0,h.useMemo)((function(){return a.map((function(e,r){var i=e.type,c=e.uuid,u=(null===E||void 0===E?void 0:E.uuid)===c,s=ee[c],O=s?0===s.priority?no.BUSY:no.QUEUED:no.IDLE,C="".concat(i,"s/").concat(c,".py");return l.current[C]=(0,h.createRef)(),(0,_.jsx)(wi,{addNewBlock:function(e){return L(!0),n(e,r+1,B)},addNewBlockMenuOpenIdx:J,addWidget:t,autocompleteItems:o,block:e,blockIdx:r,blockRefs:l,blocks:a,dataProviders:d,defaultValue:e.content,deleteBlock:function(e){f(e),I(!1)},executionState:O,fetchFileTree:p,fetchPipeline:m,interruptKernel:v,mainContainerRef:g,mainContainerWidth:b,messages:x[c],noDivider:r===te-1,onChange:function(e){return y(c,e)},openSidekickView:j,pipeline:k,ref:l.current[C],runBlock:w,runningBlocks:P,savePipelineContent:S,selected:u,setAddNewBlockMenuOpenIdx:$,setAnyInputFocused:I,setEditingBlock:A,setOutputBlocks:R,setRecsWindowOpenBlockIdx:F,setSelected:function(n){return B(!0===n?e:null)},setSelectedOutputBlock:N,setTextareaFocused:L,textareaFocused:u&&U,widgets:W},c)}))}),[n,J,t,o,l,a,f,p,m,v,g,b,x,te,y,j,k,w,P,ee,S,E,$,I,A,R,F,B,N,L,U,W]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(qr,{children:Y&&(0,_.jsx)(co.Z,{classNames:"pipeline-detail",in:G,onEntered:function(){return setTimeout((function(){return q(!1)}),Yr)},timeout:1,children:(0,_.jsx)(Xr,{})})}),(0,_.jsxs)(D.Z,{mt:1,px:T.cd,children:[le,(0,_.jsx)(D.Z,{mt:T.cd,children:(0,_.jsx)(No,{addNewBlock:function(e){var t=a[a.length-1],r=null,o={},l=[];t&&(o=t.configuration,c.CHART!==t.type&&c.SCRATCHPAD!==t.type&&c.DATA_LOADER!==e.type&&c.CHART!==e.type&&c.SCRATCHPAD!==e.type&&l.push(t.uuid),[c.DATA_LOADER,c.TRANSFORMER].includes(t.type)&&c.SCRATCHPAD===e.type&&(r="from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(k.uuid,"', '").concat(t.uuid,"', 'df')\n")),i.SQL===t.language&&(o=_i(_i({},t.configuration),o))),n(_i(_i({},e),{},{configuration:o,content:r,upstream_blocks:l}),te,B),L(!0)},pipeline:k,setRecsWindowOpenBlockIdx:F})})]})]})},Si=6.25*T.iI,Ei=100*T.iI,Ii=O.default.div.withConfig({displayName:"indexstyle__WindowContainerStyle",componentId:"sc-16gmugf-0"})(["border-radius:","px;width:100%;max-width:","px;z-index:101;position:absolute;overflow:hidden;top:50%;left:50%;transform:translate(-50%,-50%);",""],Z.n_,Ei,(function(e){return"\n    box-shadow: ".concat((e.theme||w.Z).shadow.window,";\n    background-color: ").concat((e.theme||w.Z).background.panel,";\n  ")})),Ti=(0,O.css)(["display:flex;align-items:center;justify-content:space-between;height:","px;padding:","px ","px;",""],Si,T.iI,T.cd*T.iI,(function(e){return"\n    background-color: ".concat((e.theme||w.Z).background.output,";\n  ")})),Ai=O.default.div.withConfig({displayName:"indexstyle__WindowHeaderStyle",componentId:"sc-16gmugf-1"})([""," border-top-left-radius:","px;border-top-right-radius:","px;",""],Ti,Z.n_,Z.n_,(function(e){return"\n    border-bottom: ".concat(Z.YF,"px ").concat(Z.M8," ").concat((e.theme||w.Z).borders.medium,";\n  ")})),Ri=O.default.div.withConfig({displayName:"indexstyle__WindowContentStyle",componentId:"sc-16gmugf-2"})(["overflow:auto;padding:","px 0;"," "," "," ",""],T.iI,_r.w5,(0,dn.eR)(),(function(e){return e.minMaxHeight&&"\n    max-height: ".concat(7*T.iI,"px;\n  ")}),(function(e){return!e.minMaxHeight&&"\n    max-height: 75vh;\n  "})),Di=O.default.div.withConfig({displayName:"indexstyle__WindowFooterStyle",componentId:"sc-16gmugf-3"})([""," border-bottom-left-radius:","px;border-bottom-right-radius:","px;",""],Ti,Z.n_,Z.n_,(function(e){return"\n    border-top: ".concat(Z.YF,"px ").concat(Z.M8," ").concat((e.theme||w.Z).borders.medium,";\n  ")})),Mi=O.default.div.withConfig({displayName:"indexstyle__RowStyle",componentId:"sc-16gmugf-4"})(["padding:","px ","px;",""],T.iI,T.iI*T.cd,(function(e){return!e.disableHover&&"\n    &:hover {\n      cursor: pointer;\n      background-color: ".concat((e.theme||w.Z).background.output,";\n    }\n  ")}));var Fi=function(e){var n=e.suggestion,t=e.onClick,r=n||{},o=r.action_payload,i=r.message,c=r.title,l=(null===o||void 0===o?void 0:o.action_arguments)||[];return(0,_.jsx)(Mi,{onClick:function(){return t(n)},children:(0,_.jsxs)(k.Z,{alignItems:"flex-start",children:[(0,_.jsx)(D.Z,{pr:2,pt:"4px",children:(0,_.jsx)(M.Lp,{size:So})}),(0,_.jsxs)(De.Z,{flexDirection:"column",children:[(0,_.jsx)(C.ZP,{monospace:!0,children:c}),(0,_.jsx)(C.ZP,{monospace:!0,secondary:!0,small:!0,children:i}),(0,_.jsxs)(C.ZP,{muted:!0,small:!0,children:["Columns affected: ",l.join(", ")]})]})]})})};function Bi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ni(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Bi(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Hi=function(e){var n=e.addNewBlockAtIndex,t=e.blockInsertionIndex,r=e.blocks,o=void 0===r?[]:r,i=e.children,l=e.loading,u=e.selectedBlock,a=e.setRecsWindowOpenBlockIdx,s=e.setSelectedBlock,d=(e.suggestions,h.Children.count(i)),f="undefined"===typeof t?o.length:t+1,p=null===u?"Select a block to view data cleaning recommendations.":"No recommendations available.";return(0,_.jsxs)(Ii,{children:[(0,_.jsxs)(Ai,{children:[(0,_.jsxs)(De.Z,{alignItems:"center",children:[(0,_.jsx)("div",{children:(0,_.jsx)(xo,{})}),(0,_.jsx)(D.Z,{pr:1}),(0,_.jsx)(C.ZP,{disableWordBreak:!0,monospace:!0,children:"Recommendations:\xa0"}),(0,_.jsx)(hi.Z,{compact:!0,label:"Select block",monospace:!0,onChange:function(e){var n=e.target.value,t=o.find((function(e){return e.uuid===n}));s(t)},value:null===u||void 0===u?void 0:u.uuid,children:o.map((function(e){var n=e.uuid;return(0,_.jsxs)("option",{value:n,children:[n,"\xa0"]},n)}))})]}),(0,_.jsx)(Te.Z,{iconOnly:!0,onClick:function(){return a(null)},children:(0,_.jsx)(M.x8,{muted:!0})})]}),(0,_.jsxs)(Ri,{minMaxHeight:0===d,children:[l&&(0,_.jsx)(D.Z,{p:1,children:(0,_.jsx)(k.Z,{justifyContent:"center",children:(0,_.jsx)(Dt.Z,{inverted:!0})})}),l||0!==d?h.Children.map(i,(function(e,t){return h.cloneElement(e,{key:t,onClick:function(e){var t=ui(u),r=(0,Pe.RA)((null===e||void 0===e?void 0:e.title)||"").toLowerCase(),o="".concat(r,"_").concat((0,Pe.Lo)());n({config:{suggested_action:Ni({},e)},name:o,type:c.TRANSFORMER,upstream_blocks:t},f,s)}})})):(0,_.jsx)(Mi,{disableHover:!0,children:(0,_.jsx)(C.ZP,{children:p})})]}),(0,_.jsxs)(Di,{children:[(0,_.jsxs)(C.ZP,{default:!0,monospace:!0,children:[d," results"]}),d>0&&(0,_.jsx)(C.ZP,{default:!0,children:"Click on a row to add a new code block, which you can edit after."})]})]})},Li=t(70001),zi=t(47256),Ui=t(11754);var Wi=function(e){var n=e.afterWidth,t=e.features,r=e.insightsOverview,o=e.statistics,i=r.correlations,c=void 0===i?[]:i,l=n-(2*T.cd*T.iI+_r.nn),u=function(e){var n=[];return{heatmapData:null===e||void 0===e?void 0:e.map((function(e,t){var r=e.correlations,o=e.feature.uuid;n.push({label:o});var i=r[0].y.map((function(e){var n=e.value;return(0,Pe.QV)(n)}));return i.splice(t,0,1),i})),xyLabels:n}}(c),s=u.heatmapData,d=u.xyLabels,f=function(e,n){return(0,kn.YC)(null===e||void 0===e?void 0:e.map((function(e){return{feature:e,value:1-n["".concat(e.uuid,"/null_value_rate")]}})),"value")}(t,o),p=function(e,n){return(0,kn.YC)(null===e||void 0===e?void 0:e.map((function(e){return{feature:e,value:n["".concat(e.uuid,"/count_distinct")]}})),"value")}(t,o),h=function(e,n){return(0,kn.YC)(null===e||void 0===e?void 0:e.map((function(e){var t=Object.entries(n["".concat(e.uuid,"/value_counts")]||{})[0]||[],r=(0,a.Z)(t,2),o=r[0],i=r[1];return{feature:e,percentage:Number(i)/n.count,value:o}})),"percentage")}(t,o);return(0,_.jsxs)(k.Z,{flexDirection:"column",children:[(null===f||void 0===f?void 0:f.length)>=1&&(0,_.jsx)(Ui.Z,{headerTitle:"Data completion",width:l,children:(0,_.jsx)(Li.Z,{data:f.map((function(e){var n=e.feature;return{x:e.value,y:n.uuid}})),height:Math.max(3*f.length*T.iI,50*T.iI),renderTooltipContent:function(e){var n=e.x;return"".concat((0,Pe.T3)(n)," of rows have a value")},xNumTicks:2,ySerialize:function(e){return e.y}})}),(null===p||void 0===p?void 0:p.length)>=1&&(0,_.jsx)(Ui.Z,{headerTitle:"Number of unique values",width:l,children:(0,_.jsx)(Li.Z,{data:p.map((function(e){var n=e.feature;return{x:e.value,y:n.uuid}})),height:Math.max(3*f.length*T.iI,50*T.iI),renderTooltipContent:function(e){var n=e.x;return"".concat(n," unique values")},xNumTicks:2,ySerialize:function(e){return e.y}})}),h.length>=1&&(0,_.jsx)(Ui.Z,{headerTitle:"Distribution of values",width:l,children:(0,_.jsx)(Li.Z,{data:h.map((function(e){var n=e.feature,t=e.percentage;return{feature:n,value:e.value,x:t,y:n.uuid}})),height:Math.max(3*h.length*T.iI,50*T.iI),renderTooltipContent:function(e){var n=e.value,t=e.x;return"".concat(n," is ").concat((0,Pe.T3)(t)," of all rows")},xNumTicks:2,ySerialize:function(e){return e.y}})}),c&&(null===s||void 0===s?void 0:s.length)>=1&&(0,_.jsx)(Ui.Z,{headerTitle:"Correlations",children:(0,_.jsx)(D.Z,{p:1,children:(0,_.jsx)(zi.Z,{countMidpoint:0,data:s,height:8*T.iI*d.length,minCount:-1,xLabels:d,yLabels:d})})})]})},Qi=t(92083),Gi=t.n(Qi),Vi=t(26226),Ki=t(84969),Yi=t(90948),qi=t(65743),Xi=t(39048),Ji=t(79487),$i=t(29989),ec=t(59381),nc=t(9846),tc=t(65376),rc=t(52359),oc=t(48072),ic=t(24903),cc=t(98677),lc=t(84181);function uc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ac(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?uc(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var sc={bottom:T.iI*(3+T.cd),left:T.iI*T.cd,right:T.iI*T.cd,top:T.iI*T.cd};function dc(e,n){return Math.max.apply(Math,(0,u.Z)(e.map(n)))}function fc(e){var n=e.data,t=e.height,r=e.keyForYData,o=e.large,i=e.margin,c=void 0===i?{}:i,l=e.orientationVertical,a=void 0!==l&&l,s=e.showTooltip,d=e.width,f=e.yLabelFormat,p=(0,h.useContext)(O.ThemeContext),m=(0,h.useCallback)((function(e){return e[r]}),[r]),v=f;v||(v=function(e){return e.length>20?"".concat(e.substring(0,20),"..."):e});var g=o?Wn.iD:Wn.J5,b=ac(ac({},sc),c),x=n.slice(Math.max(0,n.length-50)),y=(0,h.useMemo)((function(){return Object.keys((null===x||void 0===x?void 0:x[0])||{}).filter((function(e){return e!==r}))}),[x,r]),j=(0,ic.Z)({domain:y,range:[Mt.a$,Mt.Ej,Mt.hM,Mt.ZA,Mt.$R,Mt.X_,Mt.er,Mt.hl,Mt.nQ]}),k=(0,h.useMemo)((function(){return x.map(m)}),[x,m]),C=(0,cc.Z)({domain:k,padding:.1}),Z=(0,cc.Z)({domain:y,padding:.1}),_=(0,lc.Z)({domain:[0,dc(x,(function(e){return dc(y,(function(n){return Number(e[n])}))}))]}),P={active:(null===p||void 0===p?void 0:p.content.default)||w.Z.content.default,backgroundPrimary:(null===p||void 0===p?void 0:p.chart.backgroundPrimary)||w.Z.chart.backgroundPrimary,backgroundSecondary:(null===p||void 0===p?void 0:p.chart.backgroundSecondary)||w.Z.chart.backgroundSecondary,muted:(null===p||void 0===p?void 0:p.content.muted)||w.Z.content.muted,primary:(null===p||void 0===p?void 0:p.chart.primary)||w.Z.chart.primary,tooltipBackground:(null===p||void 0===p?void 0:p.background.navigation)||w.Z.background.navigation},S=k;a&&(S=x.reduce((function(e,n){return e.concat(y.map((function(e){var t=n[e];return(0,Pe.kE)(t)?parseInt(String(t)):t})))}),[]));var E=Math.min(Math.max.apply(Math,(0,u.Z)(S.map((function(e){return String(e).length})))),20);b.left+=7*E;var I=d-(b.left+b.right),T=t-(b.top+b.bottom);a?(C.rangeRound([0,I]),_.rangeRound([T,0])):(C.rangeRound([T,0]),_.rangeRound([0,I])),Z.rangeRound([0,C.bandwidth()]);var A=x.map(m).length,R=0;a||(R=C(S[A-1]));var D=(0,h.useCallback)((function(e){var n=(0,oc.Z)(e)||{x:0,y:0},t=n.x,r=n.y,o=t-b.left,i=r-b.top,c=0;c=a?(o-R/2)/(I-R):1-(i-R/2)/(T-R);var l=Math.floor(c*A),u=x[l];"undefined"===typeof u&&(u=x[l-1]),a?o>R&&o<I+b.left-R&&s({tooltipData:u,tooltipLeft:t,tooltipTop:r}):i>R&&i<T-R&&s({tooltipData:u,tooltipLeft:t,tooltipTop:r})}),[x,A,b.left,b.top,a,s,R,I,T]);return{colorScale:j,colors:P,data:x,fontSize:g,handleTooltip:D,margin:b,tempScale:_,tickValues:S,xKeys:y,xMax:I,y1Scale:Z,yLabelFormat:v,yMax:T,yScale:C,ySerialize:m}}var pc=["height","width","xAxisLabel","yAxisLabel"];function hc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function mc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?hc(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):hc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}T.iI,T.iI,T.iI;var vc=(0,ec.Z)((function(e){var n=e.data,t=e.height,r=e.hideTooltip,o=e.keyForYData,i=void 0===o?"__y":o,c=e.large,l=e.margin,u=void 0===l?{}:l,s=e.renderNoDataText,d=e.renderTooltipContent,f=e.showTooltip,p=e.tooltipData,h=e.tooltipLeft,m=e.tooltipOpen,v=e.tooltipTop,g=e.width,b=e.xAxisLabel,x=e.xNumTicks,y=e.yLabelFormat,j=fc({data:n,height:t,keyForYData:i,large:c,margin:u,showTooltip:f,width:g,yLabelFormat:y}),k=j.colorScale,O=j.colors,w=j.data,Z=j.fontSize,P=j.handleTooltip,S=j.margin,E=j.tempScale,I=j.tickValues,T=j.xKeys,A=j.xMax,R=j.y1Scale,D=j.yLabelFormat,M=j.yMax,F=j.yScale,B=j.ySerialize;return g<10?null:(0,_.jsxs)("div",{children:[(0,_.jsxs)("svg",{height:t,width:g,children:[s&&!(null!==w&&void 0!==w&&w.length)&&(0,_.jsx)("text",{fill:O.active,dominantBaseline:"middle",textAnchor:"middle",fontFamily:Un.ry,fontSize:Z,x:"50%",y:"50%",children:s()}),(0,_.jsx)(qi.Z,{fill:"transparent",height:t-(S.top+S.bottom),onMouseLeave:function(){return r()},onMouseMove:P,onTouchMove:P,onTouchStart:P,rx:14,width:g-(S.left+S.right),x:S.left,y:S.top}),(null===w||void 0===w?void 0:w.length)&&(0,_.jsxs)($i.Z,{left:S.left,top:S.top,children:[(0,_.jsx)(Xi.Z,{color:k,data:w,keys:T,width:A,xScale:E,y0:B,y0Scale:F,y1Scale:R,children:function(e){return e.map((function(e){return(0,_.jsx)($i.Z,{top:e.y0,children:e.bars.map((function(n){return(0,_.jsx)("g",{children:(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("rect",{fill:n.color,height:n.height,pointerEvents:"none",rx:4,width:n.width,x:n.x,y:n.y})})},"".concat(e.index,"-").concat(n.index,"-").concat(n.key))}))},"bar-group-horizontal-".concat(e.index,"-").concat(e.y0))}))}}),(0,_.jsx)(Ki.Z,{hideTicks:!0,scale:F,stroke:O.muted,tickFormat:function(e){return D(e)},tickLabelProps:function(){return{fill:O.active,fontFamily:Un.ry,fontSize:Z,style:{width:"10px"},textAnchor:"end"}},tickStroke:O.muted,tickValues:I,top:2}),(0,_.jsx)(Yi.Z,{label:b,labelProps:{fill:O.muted,fontFamily:Un.ry,fontSize:Z,textAnchor:"middle"},numTicks:x,scale:E,stroke:O.muted,tickLabelProps:function(){return{fill:O.active,fontFamily:Un.ry,fontSize:Z,textAnchor:"middle"}},tickStroke:O.muted,top:M})]}),p&&(0,_.jsx)("g",{children:(0,_.jsx)(Ji.Z,{from:{x:S.left,y:v},pointerEvents:"none",stroke:O.active,strokeDasharray:"5,2",strokeWidth:1,to:{x:A+S.left,y:v}})})]}),m&&p&&(0,_.jsxs)(nc.Z,{left:h,style:mc(mc({},tc.j),{},{backgroundColor:O.tooltipBackground}),top:v,children:[d&&d(p),!d&&Object.entries(p).map((function(e){var n=(0,a.Z)(e,2),t=n[0],r=n[1];if(i!==t){var o=r;return(0,Pe.kE)(o)&&String(o).split(".").length>=2&&(o=o.toFixed(4)),(0,_.jsxs)(C.ZP,{inverted:!0,small:!0,children:[t,": ",o]},t)}}))]})]})}));var gc=function(e){var n,t=e.height,r=e.width,o=e.xAxisLabel,i=e.yAxisLabel,c=(0,Re.Z)(e,pc);return n="undefined"===typeof r?"100%":i?0===r?r:r-28:r,(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{style:{display:"flex",height:t,marginBottom:o?T.iI:null,width:"100%"},children:[i&&(0,_.jsx)(k.Z,{alignItems:"center",fullHeight:!0,justifyContent:"center",width:28,children:(0,_.jsx)(rc.Z,{children:(0,_.jsx)(C.ZP,{center:!0,muted:!0,small:!0,children:i})})}),(0,_.jsx)("div",{style:{height:t,width:n},children:(0,_.jsx)(Vi.Z,{children:function(e){var n=e.width,t=e.height;return(0,_.jsx)(vc,mc(mc({},c),{},{height:t,width:n}))}})})]}),o&&(0,_.jsx)("div",{style:{paddingLeft:i?36:0,paddingTop:4},children:(0,_.jsx)(C.ZP,{center:!0,muted:!0,small:!0,children:o})})]})},bc=t(95422),xc=["keyForYData"],yc=["height","width","xAxisLabel","yAxisLabel"];function jc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function kc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?jc(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Oc=(0,ec.Z)((function(e){var n=e.keyForYData,t=void 0===n?"__y":n,r=(0,Re.Z)(e,xc),o=r.height,i=r.hideTooltip,c=r.renderNoDataText,l=r.renderTooltipContent,u=r.tooltipData,s=r.tooltipLeft,d=r.tooltipOpen,f=r.tooltipTop,p=r.width,h=r.xLabelFormat,m=r.xNumTicks,v=r.yNumTicks,g=fc(kc(kc({},r),{},{keyForYData:t,orientationVertical:!0})),b=g.colorScale,x=g.colors,y=g.data,j=g.fontSize,k=g.handleTooltip,O=g.margin,w=g.tempScale,Z=(g.tickValues,g.xKeys),P=(g.xMax,g.y1Scale),S=g.yLabelFormat,E=g.yMax,I=g.yScale,T=g.ySerialize;return p<10?null:(0,_.jsxs)("div",{children:[(0,_.jsxs)("svg",{height:o,width:p,children:[c&&!(null!==y&&void 0!==y&&y.length)&&(0,_.jsx)("text",{fill:x.active,dominantBaseline:"middle",textAnchor:"middle",fontFamily:Un.ry,fontSize:j,x:"50%",y:"50%",children:c()}),(null===y||void 0===y?void 0:y.length)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(qi.Z,{fill:"transparent",height:o-(O.top+O.bottom),onMouseLeave:function(){return i()},onMouseMove:k,onTouchMove:k,onTouchStart:k,rx:14,width:p-(O.left+O.right),x:O.left,y:2*O.top}),(0,_.jsxs)($i.Z,{top:O.top,children:[(0,_.jsx)(bc.Z,{color:b,data:y,height:E,keys:Z,x0:T,x0Scale:I,x1Scale:P,yScale:w,children:function(e){return e.map((function(e){return(0,_.jsx)($i.Z,{left:e.x0+O.left,top:O.top,children:e.bars.map((function(n){return(0,_.jsx)("g",{children:(0,_.jsx)("rect",{fill:n.color,height:n.height,pointerEvents:"none",rx:4,width:n.width,x:n.x,y:n.y})},"".concat(e.index,"-").concat(n.index,"-").concat(n.key))}))},"bar-group-horizontal-".concat(e.index,"-").concat(e.x0))}))}}),(0,_.jsx)(Ki.Z,{left:O.left,numTicks:v,scale:w,stroke:x.muted,tickFormat:function(e){return S(e)},tickLabelProps:function(){return{fill:x.active,fontFamily:Un.ry,fontSize:j,textAnchor:"end",transform:"translate(-2,2.5)"}},tickStroke:x.muted,top:O.top}),(0,_.jsx)(Yi.Z,{hideTicks:!0,left:O.left,numTicks:m,scale:I,stroke:x.muted,tickFormat:h,tickLabelProps:function(){return{fill:x.active,fontFamily:Un.ry,fontSize:j,textAnchor:"middle"}},tickStroke:x.muted,top:E+O.top})]})]}),u&&(0,_.jsx)("g",{children:(0,_.jsx)(Ji.Z,{from:{x:s,y:2*O.top},pointerEvents:"none",stroke:x.active,strokeDasharray:"5,2",strokeWidth:1,to:{x:s,y:E+2*O.top}})})]}),d&&u&&(0,_.jsxs)(nc.Z,{left:s,style:kc(kc({},tc.j),{},{backgroundColor:x.tooltipBackground}),top:f,children:[l&&l(u),!l&&Object.entries(u).map((function(e){var n=(0,a.Z)(e,2),r=n[0],o=n[1];if(t!==r){var i=o;return(0,Pe.kE)(i)&&String(i).split(".").length>=2&&(i=i.toFixed(4)),(0,_.jsxs)(C.ZP,{inverted:!0,small:!0,children:[r,": ",i]},r)}})),(0,_.jsx)("br",{}),(0,_.jsxs)(C.ZP,{inverted:!0,small:!0,children:[h&&h(T(u)),!h&&T(u)]})]})]})}));var Cc=function(e){var n=e.height,t=e.width,r=e.xAxisLabel,o=e.yAxisLabel,i=(0,Re.Z)(e,yc);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{style:{display:"flex",height:n,marginBottom:r?T.iI:null,width:"100%"},children:[o&&(0,_.jsx)(k.Z,{alignItems:"center",fullHeight:!0,justifyContent:"center",width:28,children:(0,_.jsx)(rc.Z,{children:(0,_.jsx)(C.ZP,{center:!0,muted:!0,small:!0,children:o})})}),(0,_.jsx)("div",{style:{height:n,width:o?0===t?t:t-28:t},children:(0,_.jsx)(Vi.Z,{children:function(e){var n=e.height,t=e.width;return(0,_.jsx)(Oc,kc(kc({},i),{},{height:n,width:t}))}})})]}),r&&(0,_.jsx)("div",{style:{paddingLeft:o?36:0,paddingTop:4},children:(0,_.jsx)(C.ZP,{center:!0,muted:!0,small:!0,children:r})})]})},wc=t(66872),Zc=t(68735),_c=t(320),Pc=40*T.iI,Sc=O.default.div.withConfig({displayName:"indexstyle__ChartBlockStyle",componentId:"sc-1c3ufnj-0"})(["border-radius:","px;margin-left:","px;margin-right:","px;margin-top:","px;",""],Z.n_,.5*T.iI,.5*T.iI,1*T.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).chartBlock,";\n  ")})),Ec=O.default.div.withConfig({displayName:"indexstyle__ConfigurationOptionsStyle",componentId:"sc-1c3ufnj-1"})(["flex:4;padding-left:","px;padding-right:","px;"],1*T.iI,1*T.iI),Ic=O.default.div.withConfig({displayName:"indexstyle__CodeStyle",componentId:"sc-1c3ufnj-2"})(["padding-top:","px;",""],T.iI/2,(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).codeTextarea,";\n  ")})),Tc=O.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-1c3ufnj-3"})(["margin-bottom:","px;padding-bottom:","px;padding-left:","px;",""],T.cd*T.iI,T.iI,T.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||w.Z.borders).medium,";\n  ")}));function Ac(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Rc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ac(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ac(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Dc=function(e){var n,t=e.block,r=e.data,o=e.width,i=t.configuration,c=void 0===i?{}:i,l=c||{},u=l.chart_style,d=l.chart_type,f=l.y_sort_order,p=c.height||Pc,h=(null===c||void 0===c||null===(n=c.metrics)||void 0===n?void 0:n.map((function(e){return"".concat((n=e).aggregation,"(").concat(n.column,")");var n})))||[],m=Pe.n1,v=c.time_interval;if([he.HOUR,he.MINUTE,he.SECOND].includes(v)&&(m=Pe.OC),Q.BAR_CHART===d||Q.TIME_SERIES_BAR_CHART===d){var g=r.x,b=r.y,x=Q.TIME_SERIES_BAR_CHART===d;if(g&&b&&Array.isArray(g)&&Array.isArray(b)){var y,j=null===(y=c.group_by)||void 0===y?void 0:y.join(", "),k=null===h||void 0===h?void 0:h.join(", ");h.length||h.push(oe);var O=h[0],w=g.map((function(e,n){return Rc({__y:e},h.reduce((function(e,t,r){var o,i=null===b||void 0===b||null===(o=b[r])||void 0===o?void 0:o[n];return"undefined"===typeof i?e:Rc(Rc({},e),{},(0,s.Z)({},t,i))}),{}))}));pe.ASCENDING===f?w=(0,kn.YC)(w,(function(e){return e[O]}),{ascending:!1}):pe.DESCENDING===f&&(w=(0,kn.YC)(w,(function(e){return e[O]}),{ascending:!0}));var Z={data:w,height:p,renderNoDataText:function(){return"No data matching query"},width:o,xNumTicks:3};return se.HORIZONTAL===u?(0,_.jsx)(gc,Rc(Rc({},Z),{},{xAxisLabel:k||c.y,yAxisLabel:j||c.x})):(0,_.jsx)(Cc,Rc(Rc({},Z),{},{xAxisLabel:j,xLabelFormat:function(e){return x?Gi()(1e3*e).format(Pe.n1):e},yAxisLabel:k,yNumTicks:3}))}}else if(Q.HISTOGRAM===d){var P,S=r.x,E=r.y,I=null===(P=c.group_by)||void 0===P?void 0:P.join(", ");if(S&&E&&Array.isArray(S))return(0,_.jsx)(wc.Z,{data:S.map((function(e,n){var t,r=e.max,o=e.min;return[r,null===E||void 0===E||null===(t=E[n])||void 0===t?void 0:t.value,o]})),height:p,width:o,large:!0,margin:{left:5*T.iI,right:1*T.iI,top:3*T.iI},noPadding:!0,renderTooltipContent:function(e){var n=(0,a.Z)(e,3),t=n[0],r=n[1],o=n[2];return(0,_.jsxs)(C.ZP,{inverted:!0,monospace:!0,small:!0,children:["Count : ",r,(0,_.jsx)("br",{}),"Bucket: ",o,"-",t]})},showAxisLabels:!0,showYAxisLabels:!0,showZeroes:!0,sortData:function(e){return(0,kn.YC)(e,"[0]")},xAxisLabel:I||c.x,yAxisLabel:I?"count(".concat(I,")"):c.y})}else if(Q.LINE_CHART===d||Q.TIME_SERIES_LINE_CHART===d){var A=r.x,R=r.y,D=Q.TIME_SERIES_LINE_CHART===d;if(A&&R&&Array.isArray(A)&&Array.isArray(R)&&Array.isArray(null===R||void 0===R?void 0:R[0])){var M,F=h;c.legend_labels&&(F=c.legend_labels.split(",").map((function(e){return e.trim()})));var B=A.map((function(e,n){return{x:e,y:(0,kn.w6)(R.length).map((function(e,t){var r=R[t][n];return"undefined"===typeof r||null===r?0:r}))}})),N=null===(M=c.group_by)||void 0===M?void 0:M.join(", "),H=h.join(", ");return(0,_.jsx)(Zc.Z,{data:B,height:p,lineLegendNames:F,margin:{bottom:8*T.iI,left:5*T.iI},noCurve:!0,renderXTooltipContent:function(e){e.index;var n=e.x,t=c.x,r=n;return c.group_by&&(t=c.group_by.map(String).join(", ")),D&&(r=Gi()(1e3*n).format(m)),(0,_.jsxs)(C.ZP,{inverted:!0,small:!0,children:[t,": ",r]})},renderYTooltipContent:function(e,n){var t=e.y;return(0,_.jsxs)(C.ZP,{inverted:!0,small:!0,children:[F&&F[n]&&"".concat(F[n],": "),t&&(0,Pe.x6)((0,Pe.QV)(t[n],4))]})},width:o?o-3*T.iI:o,xAxisLabel:N||String(c.x),xLabelFormat:function(e){return D?Gi()(1e3*e).format(Pe.n1):e},yAxisLabel:H||String(c.y),yLabelFormat:function(e){return e}})}}else if(Q.PIE_CHART===d){var L,z=r[String(c.x)],U=null===(L=c.group_by)||void 0===L?void 0:L.join(", ");if(z)return(0,_.jsx)(_c.Z,{data:Object.entries(z),getX:function(e){var n=(0,a.Z)(e,2),t=n[0],r=n[1];return"".concat(t," (").concat((0,Pe.x6)(r),")")},getY:function(e){return(0,a.Z)(e,2)[1]},height:p,width:o,xAxisLabel:U||String(c.x)})}else if(Q.TABLE===d){var W=r.index,G=r.x,V=r.y;return Array.isArray(G)&&Array.isArray(V)&&Array.isArray(V[0])&&(0,_.jsx)(zo.Z,{columns:G,index:W,height:c.height?null:p,maxHeight:c.height?p:null,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!0,rows:V,width:o})}return(0,_.jsx)("div",{})},Mc=O.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," ",""],(function(e){return"\n    background-color: ".concat((e.theme.background||w.Z.background).popup,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((T.iI+Wn.Al)/2,"px;\n    height: ").concat(1.5*T.iI+Wn.Al,"px;\n    padding: ").concat(T.iI/1.5,"px ").concat(1.25*T.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((T.iI/2+Wn.Al)/2,"px;\n    height: ").concat(Wn.Al+T.iI/2,"px;\n    padding: ").concat(T.iI/4,"px ").concat(T.iI,"px;\n  ")})),Fc=function(e){var n=e.children,t=e.label,r=e.onClick,o=e.small;return(0,_.jsx)(Mc,{small:o,children:(0,_.jsx)(Te.Z,{basic:!0,noPadding:!0,noBackground:!0,onClick:r,transparent:!0,children:(0,_.jsxs)(k.Z,{alignItems:"center",children:[n,t&&(0,_.jsx)(C.ZP,{small:o,children:t}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsx)(M.x8,{muted:!0,size:o?T.iI:1.25*T.iI})]})})})},Bc=t(33591),Nc=["children","fullHeight","gutter","style"];function Hc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Lc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Hc(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Hc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var zc=function(e){var n=e.children,t=e.fullHeight,r=e.gutter,o=e.style,i=void 0===o?{}:o,c=(0,Re.Z)(e,Nc),l=Lc({},i);return r&&(l.paddingLeft=r,l.paddingRight=l.paddingLeft),t&&(l.height="100%"),(0,_.jsx)(Bc.Col,Lc(Lc({},c),{},{style:l,children:n}))};var Uc=function(e){var n=e.children,t=e.onChange,r=(0,h.useState)(h.Children.map(n,(function(){return null}))),o=r[0],i=r[1],c=(0,h.useState)(0),l=c[0],u=c[1];return(0,_.jsx)(k.Z,{children:h.Children.map(n,(function(e,n){return(0,_.jsx)(D.Z,{ml:n>=1?1:0,style:{display:"flex",flex:1},children:h.cloneElement(e,{onChange:function(e){i((function(r){return r[n]=e.target.value,t(r,{resetValues:function(){return u((function(e){return e+1}))},setValues:i}),r}))},value:o[n]})},"multi-select-child-".concat(n,"-").concat(l))}))})},Wc=t(7715);function Qc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Gc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Qc(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Vc(e,n){var t,r,o,l=e.autocompleteItems,u=e.block,d=e.blockRefs,f=e.blocks,p=e.deleteWidget,v=e.executionState,b=e.fetchPipeline,x=e.fetchFileTree,y=e.messages,j=void 0===y?[]:y,Z=e.onChangeContent,P=e.pipeline,S=e.runBlock,E=e.runningBlocks,I=e.savePipelineContent,A=e.selected,R=e.setAnyInputFocused,F=e.setSelectedBlock,B=e.setTextareaFocused,N=e.textareaFocused,L=e.updateWidget,U=e.width,W=(0,h.useRef)(null),G=(0,h.useContext)(O.ThemeContext),V=u.outputs,K=void 0===V?[]:V,Y=(0,h.useState)(null),q=Y[0],X=Y[1],J=(0,h.useState)(null===(t=u.configuration)||void 0===t?void 0:t.chart_type),$=J[0],ee=J[1],ne=(0,h.useState)(u.configuration),re=ne[0],oe=ne[1],ie=(0,h.useState)(u.content),ce=ie[0],le=ie[1],ue=(0,h.useState)(!$||0===K.length),se=ue[0],de=ue[1],pe=(0,h.useState)(!1),he=pe[0],me=pe[1],ve=(0,h.useState)(null),ge=ve[0],be=ve[1],xe=(0,h.useState)(null===u||void 0===u?void 0:u.upstream_blocks),ye=xe[0],Oe=xe[1],_e=(0,h.useState)((null===K||void 0===K?void 0:K.length)||0),Se=_e[0],Ee=_e[1],Ie=(0,h.useState)(u.uuid),Te=Ie[0],Ae=Ie[1],Re=Ce[$],Me=we[$],Fe=(0,h.useMemo)((function(){return null===f||void 0===f?void 0:f.filter((function(e){var n=e.type;return[c.DATA_LOADER,c.TRANSFORMER].includes(n)}))}),[f]),Be=(0,h.useMemo)((function(){return(0,kn.HK)(Fe,(function(e){return e.uuid}))}),[Fe]),Ne=!!E.find((function(e){return e.uuid===u.uuid}))||(null===j||void 0===j?void 0:j.length)>=1&&v!==no.IDLE,He=(0,h.useMemo)((function(){return null===j||void 0===j?void 0:j.filter((function(e){return null===e||void 0===e?void 0:e.type}))}),[j]),Le=!!He.find((function(e){return e.error})),ze=He.length>=1,Ue=(fn(u.type,{theme:G}).accent,(0,h.useMemo)((function(){return{blockType:u.type,hasError:Le,selected:A}}),[u.type,Le,A]));if(null!==He&&void 0!==He&&He.length){var We,Qe,Ge=He.length-1;o=null===He||void 0===He||null===(We=He[Ge])||void 0===We||null===(Qe=We.data)||void 0===Qe?void 0:Qe[0]}o?(o=(o=o.slice(1,o.length-1)).replaceAll('\\"','"').replaceAll("\\'","'"),(0,Pe.Pb)(o)&&(r=JSON.parse(o))):(null===K||void 0===K?void 0:K.length)>=1&&(r={},K.forEach((function(e){var n=e||{},t=n.text_data,o=n.type,i=n.variable_uuid;to.TEXT===o&&(0,Pe.Pb)(t)&&(r[i]=JSON.parse(t))})));var Ve=(0,h.useCallback)((function(e){var n=Gc(Gc(Gc({},u),e),{},{configuration:Gc(Gc({},u.configuration),e.configuration)});I().then((function(){S({block:n,code:ce,ignoreAlreadyRunning:!0,runUpstream:!!ye.find((function(e){var n;return![g.EXECUTED,g.UPDATED].includes(null===(n=Be[e])||void 0===n?void 0:n.status)}))})})),Ee((function(e){return e+1}))}),[u,Be,ce,Ee,ye]),Ke=(0,h.useCallback)((function(e){le(e),Z(e)}),[Z,le]),Ye=(0,h.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.autoRun;oe((function(n){return Gc(Gc({},n),e)}));var r=Gc(Gc({},u),{},{configuration:Gc(Gc(Gc({},re),e),{},{chart_type:$})});L(r);Object.keys(e);Se&&t&&Ve(r)}),[u,$,re,Se,Ve,oe,L]);(0,h.useEffect)((function(){X({python:ji({autocompleteItems:l,block:u,blocks:f,pipeline:P})})}),[l,u,f,P]);var qe=(0,h.useMemo)((function(){return(0,_.jsx)(Jn,{autoHeight:!0,autocompleteProviders:q,onChange:Ke,selected:A,setSelected:function(e){return F(!0===e?u:null)},setTextareaFocused:B,showLineNumbers:!1,textareaFocused:N||Q.TABLE===$&&!se,value:ce,width:"100%"})}),[q,$,ce,se,A,F,B,N,Ke]),Xe=(0,h.useMemo)((function(){return Le&&ze&&(0,_.jsx)(ri,Gc(Gc({},Ue),{},{block:u,contained:!1,hideExtraInfo:!0,isInProgress:Ne,messages:He,selected:A}))}),[u,Ue,Le,ze,Ne,He,A]),Je=(0,Ln.Z)(se),$e=(0,Ln.Z)(U);(0,h.useEffect)((function(){var e,n=null===W||void 0===W||null===(e=W.current)||void 0===e?void 0:e.getBoundingClientRect();Je!==se||$e!==U?(be(0),setTimeout((function(){return be(null===n||void 0===n?void 0:n.width)}),100)):n&&be(n.width)}),[se,Je,W.current,be,U,$e]);var en=(0,h.useMemo)((function(){var e=[];return ye.forEach((function(n,t){var r=Be[n],o=fn(null===r||void 0===r?void 0:r.type,{theme:G}).accent;e.push((0,_.jsxs)(D.Z,{ml:2,children:[(0,_.jsxs)(C.ZP,{bold:!0,inline:!0,monospace:!0,small:!0,children:["df_",t+1]})," ",(0,_.jsx)(C.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"->"})," ",(0,_.jsx)(Mn.Z,{color:o,inline:!0,onClick:function(){var e,n,t=null===d||void 0===d||null===(e=d.current)||void 0===e?void 0:e["".concat(null===r||void 0===r?void 0:r.type,"s/").concat(null===r||void 0===r?void 0:r.uuid,".py")];null===t||void 0===t||null===(n=t.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,_.jsx)(C.ZP,{color:o,monospace:!0,small:!0,children:n})})]},n))})),e}),[Be,ye]),nn=(0,h.useMemo)((function(){var e,n=[],t=null===Re||void 0===Re||null===(e=Re.code)||void 0===e?void 0:e.reduce((function(e,n){var t=n.uuid;return ae.includes(t)?e.concat(t):e}),[]);null===t||void 0===t||t.length;return null===t||void 0===t||t.forEach((function(e,t){var r=re[e];if(r){var o,i,c=null===(o=Ze[$])||void 0===o||null===(i=o[e])||void 0===i?void 0:i.call(o);n.push((0,_.jsxs)(D.Z,{ml:2,children:[(0,_.jsx)(C.ZP,{bold:!0,inline:!0,monospace:!0,small:!0,children:r})," ",c&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(C.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"->"})," ",(0,_.jsx)(C.ZP,{default:!0,inline:!0,small:!0,children:c})]})]},r))}})),n}),[re,Re]),tn=(0,Ln.Z)($),rn=(0,Ln.Z)(ye);(0,h.useEffect)((function(){if((!tn&&$&&null!==ye&&void 0!==ye&&ye.length||(null===rn||void 0===rn||!rn.length)&&(null===ye||void 0===ye?void 0:ye.length)>=1&&$)&&!ce&&(0,Wc.Qr)(re)&&Me){var e=Gc(Gc({},u),{},{upstream_blocks:ye});Me.configuration&&Ye(Me.configuration(e)),Me.content&&Ke(Me.content(e))}}),[u,$,tn,re,ce,Ye,Ke,ye,rn]);var on=(0,h.useMemo)((function(){return re.width_percentage||1}),[re]),cn=(0,h.useMemo)((function(){return Object.entries(Re||{}).reduce((function(e,n){var t=(0,a.Z)(n,2),r=t[0],o=t[1];return Gc(Gc({},e),{},(0,s.Z)({},r,o.map((function(e){var n,t=e.autoRun,r=e.label,o=e.monospace,i=e.options,c=e.settings,l=void 0===c?{}:c,a=e.type,d=e.uuid,f={fullWidth:!0,key:d,label:(0,Pe.kC)(r()),monospace:o,onBlur:function(){return F(u)},onChange:function(e){return Ye((0,s.Z)({},d,e.target.value),{autoRun:t})},onFocus:function(){return F(u)},value:(null===re||void 0===re?void 0:re[d])||""},p=ye.reduce((function(e,n){var t=Be[n];return t?e.concat(t):e}),[]),h=p.reduce((function(e,n){var t,r,o=n.outputs;return e.concat(null===o||void 0===o||null===(t=o[0])||void 0===t||null===(r=t.sample_data)||void 0===r?void 0:r.columns)}),[]);if(je.COLUMNS===a){var m=re[d]||[];n=(0,_.jsxs)(_.Fragment,{children:[(!l.maxValues||m.length<l.maxValues)&&(0,_.jsxs)(hi.Z,Gc(Gc({},f),{},{onChange:function(e){var n=re[d]||[],r=e.target.value;n.includes(r)?n=(0,kn.Od)(n,(function(e){return e===r})):n.push(r),Ye((0,s.Z)({},d,n),{autoRun:t})},value:null,children:[(0,_.jsx)("option",{value:""}),(0,kn.YC)(h.filter((function(e){return!m.includes(e)})),(function(e){return e})).map((function(e){return(0,_.jsx)("option",{value:e,children:e},e)}))]})),m.map((function(e){return(0,_.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:2},children:(0,_.jsx)(Fc,{label:e,onClick:function(){Ye((0,s.Z)({},d,(0,kn.Od)(m,(function(n){return n===e}))),{autoRun:t})}})},e)}))]})}else if(je.METRICS===a){var v=re[d]||[];n=(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(C.ZP,{bold:!0,children:"Metrics"}),(0,_.jsx)(C.ZP,{muted:!0,small:!0,children:"Select a column and an aggregation function."}),(0,_.jsxs)(Uc,{onChange:function(e,n){var r=n.resetValues,o=n.setValues;2===e.filter((function(e){return!!e})).length&&(v.find((function(n){var t=n.aggregation;return n.column===e[1]&&t===e[0]}))||(Ye((0,s.Z)({},d,v.concat({aggregation:e[0],column:e[1]})),{autoRun:t}),o([null,null]),r()))},children:[(0,_.jsxs)(hi.Z,Gc(Gc({},f),{},{label:"aggregation",children:[(0,_.jsx)("option",{value:""}),(0,kn.YC)(ke,(function(e){return e})).map((function(e){return(0,_.jsx)("option",{value:e,children:e},e)}))]})),(0,_.jsxs)(hi.Z,Gc(Gc({},f),{},{label:"column",children:[(0,_.jsx)("option",{value:""}),(0,kn.YC)(h,(function(e){return e})).map((function(e){return(0,_.jsx)("option",{value:e,children:e},e)}))]}))]}),v.map((function(e){var n=e.aggregation,r=e.column;return(0,_.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:2},children:(0,_.jsx)(Fc,{label:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(C.ZP,{inline:!0,monospace:!0,children:[n,"("]}),r,(0,_.jsx)(C.ZP,{inline:!0,monospace:!0,children:")"})]}),onClick:function(){Ye((0,s.Z)({},d,(0,kn.Od)(v,(function(e){var t=e.aggregation,o=e.column;return n===t&&r===o}))),{autoRun:t})}})},"".concat(n,"(").concat(r,")"))}))]})}else n=i?(0,_.jsx)(hi.Z,Gc(Gc({},f),{},{children:i.map((function(e){return(0,_.jsx)("option",{value:e,children:e},e)}))})):(0,_.jsx)(tr.Z,Gc(Gc({},f),{},{type:a}));return(0,_.jsx)(D.Z,{mb:1,children:n},d)}))))}),{noCode:[]})}),[Be,re,Re,F,Ye,ye]),ln=cn.code,un=cn.noCode,an=(0,m.Db)(Qt.ZP.widgets.pipelines.useUpdate(null===P||void 0===P?void 0:P.uuid,u.uuid),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(){me(!1),b(),x()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})},onError:function(e){(0,Gt.qQ)(e).messages}}),sn=(0,a.Z)(an,1)[0],dn="ChartBlock/".concat(u.uuid),pn=(0,z.y)(),hn=pn.registerOnKeyDown,mn=pn.unregisterOnKeyDown;return(0,h.useEffect)((function(){return function(){mn(dn)}}),[mn,dn]),hn(dn,(function(e,n,t){he&&String(t[0])===String(H.Uq)&&String(t[1])!==String(H.zX)&&sn({widget:Gc(Gc({},u),{},{name:Te})})}),[u,he,Te,sn]),(0,_.jsx)(zc,{sm:12,md:12*on,children:(0,_.jsxs)(Sc,{ref:n,children:[(0,_.jsx)(D.Z,{mt:1,pt:1,px:1,children:(0,_.jsxs)(k.Z,{alignItems:"center",fullWidth:!0,justifyContent:"space-between",children:[(0,_.jsxs)(De.Z,{flex:1,style:{position:"relative"},children:[(0,_.jsx)(wr,{bold:!1,fullWidth:!0,inputValue:Te,notRequired:!0,onBlur:function(){return setTimeout((function(){return me(!1)}),300)},onChange:function(e){Ae(e.target.value),e.preventDefault()},onClick:function(){R(!0),me(!0)},onFocus:function(){R(!0),me(!0)},small:!0,stacked:!0,value:!he&&u.uuid}),he&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(D.Z,{ml:1}),(0,_.jsx)(Mn.Z,{noWrapping:!0,onClick:function(){return sn({widget:Gc(Gc({},u),{},{name:Te})})},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Update chart name"})]})]}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsx)(hi.Z,{compact:!0,onChange:function(e){var n=[e.target.value],t=Gc(Gc({},u),{},{upstream_blocks:n});L(t),Ve(t),Oe(n)},placeholder:"Source block",small:!0,value:(null===ye||void 0===ye?void 0:ye[0])||"",children:null===Fe||void 0===Fe?void 0:Fe.map((function(e){var n=e.uuid;return(0,_.jsx)("option",{value:n,children:n},n)}))}),(0,_.jsx)(D.Z,{mr:1}),!Ne&&(0,_.jsx)(gr,{appearBefore:!0,default:!0,label:"Run chart block",size:null,widthFitContent:!0,children:(0,_.jsx)(Wt,{blackBorder:!0,compact:!0,inline:!0,onClick:function(){return Ve(u)},uuid:"ChartBlock/run/".concat(u.uuid),children:(0,_.jsx)(M.Py,{size:2*T.iI})})}),no.QUEUED===v&&(0,_.jsx)(Dt.Z,{color:(G||w.Z).content.active,small:!0,type:"cylon"}),no.BUSY===v&&(0,_.jsx)(Dt.Z,{color:(G||w.Z).content.active,small:!0}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsx)(gr,{appearBefore:!0,default:!0,label:"Edit chart",size:null,widthFitContent:!0,children:(0,_.jsx)(Wt,{blackBorder:!0,compact:!0,inline:!0,onClick:function(){return de((function(e){return!e}))},selected:se,uuid:"ChartBlock/edit/".concat(u.uuid),children:(0,_.jsx)(M.I8,{size:2*T.iI})})}),(0,_.jsx)(D.Z,{mr:1}),(0,_.jsx)(gr,{appearBefore:!0,default:!0,label:"Delete chart",size:null,widthFitContent:!0,children:(0,_.jsx)(Wt,{blackBorder:!0,compact:!0,inline:!0,onClick:function(){return p(u)},uuid:"ChartBlock/delete/".concat(u.uuid),children:(0,_.jsx)(M.rF,{size:2*T.iI})})})]})]})}),(0,_.jsx)(D.Z,{mt:1}),(0,_.jsxs)(k.Z,{justifyContent:"space-between",fullWidth:!0,children:[(0,_.jsx)(De.Z,{flex:6,ref:W,children:r&&!(0,Wc.Qr)(r)&&(0,_.jsx)(D.Z,{pb:3,children:(0,_.jsx)(Dc,{block:Gc(Gc({},u),{},{configuration:Gc(Gc({},u.configuration),re)}),data:r,width:ge})})}),se&&(0,_.jsx)(Ec,{children:(0,_.jsxs)(k.Z,{flexDirection:"column",fullWidth:!0,children:[(0,_.jsx)(D.Z,{mb:1,children:(0,_.jsx)(hi.Z,{onChange:function(e){var n=e.target.value,t=Gc(Gc({},u),{},{configuration:Gc(Gc({},re),{},{chart_type:n})});L(t),Ve(t),ee(n)},placeholder:"Select chart type",value:$,children:fe.map((function(e){return(0,_.jsx)("option",{value:e,children:(0,Pe.kC)(e)},e)}))})}),(0,_.jsx)(D.Z,{mb:1,children:(0,_.jsx)(hi.Z,{onChange:function(e){return Ye((0,s.Z)({},te,e.target.value))},placeholder:"Chart width",value:(null===re||void 0===re?void 0:re.width_percentage)||1,children:[["1/2 width",.5],["full width",1]].map((function(e){var n=(0,a.Z)(e,2),t=n[0],r=n[1];return(0,_.jsx)("option",{value:r,children:t},t)}))})}),un]})})]}),se&&!(null===ln||void 0===ln||!ln.length)&&i.SQL!==u.language&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(D.Z,{my:1,px:1,children:[(0,_.jsx)(C.ZP,{bold:!0,children:"Custom chart code"}),(0,_.jsxs)(C.ZP,{muted:!0,children:["Write custom logic mapping data to input values for your chart.",(0,_.jsx)("br",{}),"This code is only executed if you don\u2019t have any columns or metrics selected."]})]}),(0,_.jsxs)(Ic,{children:[ye.length>=1&&(0,_.jsxs)(Tc,{children:[(0,_.jsxs)(C.ZP,{muted:!0,small:!0,children:["Variables you can use in your code: ",en]}),(0,_.jsxs)(C.ZP,{muted:!0,small:!0,children:["Variables that you must define: ",nn]})]}),qe]})]}),Xe&&(0,_.jsx)(D.Z,{px:1,children:Xe})]})})}var Kc=h.forwardRef(Vc),Yc=["children","fullHeight","gutter","style"];function qc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Xc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qc(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Jc=function(e){var n=e.children,t=e.fullHeight,r=e.gutter,o=e.style,i=void 0===o?{}:o,c=(0,Re.Z)(e,Yc),l=Xc({},i);return r&&(l.marginLeft=-1*r,l.marginRight=l.marginLeft),t&&(l.height="100%"),(0,_.jsx)(Bc.Row,Xc(Xc({},c),{},{style:l,children:h.Children.map(n,(function(e,n){return e&&h.cloneElement(e,{gutter:r,key:n})}))}))},$c=["blockRefs","blocks","chartRefs","deleteWidget","messages","onChangeChartBlock","runBlock","runningBlocks","savePipelineContent","selectedBlock","setAnyInputFocused","setSelectedBlock","setTextareaFocused","textareaFocused","updateWidget","widgets","width"];function el(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function nl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?el(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):el(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var tl=function(e){var n=e.blockRefs,t=e.blocks,r=e.chartRefs,o=e.deleteWidget,i=e.messages,c=e.onChangeChartBlock,l=e.runBlock,u=e.runningBlocks,a=e.savePipelineContent,d=e.selectedBlock,f=e.setAnyInputFocused,p=e.setSelectedBlock,m=e.setTextareaFocused,v=e.textareaFocused,g=e.updateWidget,b=e.widgets,x=e.width,y=(0,Re.Z)(e,$c),j=(0,h.useMemo)((function(){return u.reduce((function(e,n,t){return nl(nl({},e),{},(0,s.Z)({},n.uuid,nl(nl({},n),{},{priority:t})))}),{})}),[u]);return(0,_.jsxs)(k.Z,{flexDirection:"column",fullWidth:!0,children:[(0,_.jsx)(Jc,{fullHeight:!0,style:{marginLeft:.5*T.iI,marginRight:.5*T.iI},children:null===b||void 0===b?void 0:b.map((function(e){var s=e.uuid,b=j[s],k=b?0===b.priority?no.BUSY:no.QUEUED:no.IDLE;return r.current[s]=(0,h.createRef)(),(0,h.createElement)(Kc,nl(nl({},y),{},{block:e,blockRefs:n,blocks:t,chartRefs:r,deleteWidget:o,executionState:k,key:s,messages:i[s],onChangeContent:function(e){return c(s,e)},ref:r.current[s],runBlock:l,runningBlocks:u,savePipelineContent:a,selected:(null===d||void 0===d?void 0:d.uuid)===s,setAnyInputFocused:f,setSelectedBlock:p,setTextareaFocused:m,textareaFocused:v,updateWidget:g,width:x}))}))}),(0,_.jsx)("div",{style:{height:"80vh"}})]})},rl=t(51774),ol=t.n(rl),il=(T.iI,[c.DATA_EXPORTER]),cl=O.default.div.withConfig({displayName:"indexstyle__GraphContainerStyle",componentId:"sc-bc2ei5-0"})(["div:only-child{","}",""],_r.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")})),ll=O.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-bc2ei5-1"})(["border:2px solid transparent;border-radius:","px;min-width:fit-content;"," "," ",""],Z.BG,(function(e){return e.selected&&"\n    border-color: ".concat((e.theme.content||w.Z.content).active,";\n  ")}),(function(e){return e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")}),(function(e){return e.disabled&&"\n    opacity: 0.5;\n\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}));var ul=function(e){var n=e.block,t=e.children,r=e.disabled,o=e.hasFailed,i=e.isInProgress,c=e.isQueued,l=e.isSuccessful,u=(e.onClick,e.selected),a=(0,h.useContext)(O.ThemeContext),s=n.type,d=n.uuid,f=!(i||c||o||l),p=l&&!(i||c),m=o&&!(i||c),v="";return f?v="No status":p?v="Successful execution":m?v="Failed execution":i&&(v="Currently executiing"),(0,_.jsx)(ll,{backgroundColor:fn(s,{theme:a}).accent,disabled:r,selected:u,children:(0,_.jsx)(D.Z,{p:1,children:(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsxs)(k.Z,{alignItems:"center",justifyContent:"center",style:{height:2*T.iI,width:2*T.iI},title:v,children:[i&&(0,_.jsx)(Dt.Z,{color:(a||w.Z).content.active,small:!0}),p&&(0,_.jsx)(M.Jr,{size:2*T.iI,success:!0}),m&&(0,_.jsx)(M.x8,{danger:!0,size:1.5*T.iI}),f&&(0,_.jsx)(ze,{borderSize:1,size:1*T.iI})]}),(0,_.jsx)(D.Z,{ml:1}),(0,_.jsx)(k.Z,{alignItems:"center",fullWidth:!0,justifyContent:"center",children:(0,_.jsx)(C.ZP,{inverted:il.includes(s),monospace:!0,small:!0,children:t})})]})})},d)};function al(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function sl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?al(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):al(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var dl=ol()((0,l.Z)(f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Canvas);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),fl=ol()((0,l.Z)(f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Node);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),pl=ol()((0,l.Z)(f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Edge);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}});ol()((0,l.Z)(f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.MarkerArrow);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),ol()((0,l.Z)(f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Port);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}});var hl=function(e){var n=e.blockRefs,t=e.editingBlock,r=e.fetchPipeline,o=e.height,i=e.pipeline,l=e.runningBlocks,s=e.selectedBlock,d=e.setEditingBlock,f=e.setSelectedBlock,p=(0,h.useContext)(O.ThemeContext),v=(null===t||void 0===t?void 0:t.upstreamBlocks)||{},b=v.block,x=v.values,y=void 0===x?[]:x,j=(0,h.useMemo)((function(){return y.length}),[y]),w=(0,h.useMemo)((function(){var e;return(null===i||void 0===i||null===(e=i.blocks)||void 0===e?void 0:e.filter((function(e){var n=e.type;return c.SCRATCHPAD!==n})))||[]}),[null===i||void 0===i?void 0:i.blocks]),Z=(0,h.useMemo)((function(){return(0,kn.HK)(w,(function(e){return e.uuid}))}),[w]),P=((0,h.useMemo)((function(){return(0,kn.HK)(y,(function(e){return e.uuid}))}),[y]),(0,h.useMemo)((function(){return(0,kn.HK)(l,(function(e){return e.uuid}))}),[l])),S=(0,m.Db)(Qt.ZP.blocks.pipelines.useUpdate(null===i||void 0===i?void 0:i.uuid,null===b||void 0===b?void 0:b.uuid),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(){d({upstreamBlocks:null}),r()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),E=(0,a.Z)(S,2),I=E[0],A=E[1].isLoading,R=(0,h.useCallback)((function(e){var t=e.type,r=e.uuid;if(f(e),null!==n&&void 0!==n&&n.current){var o,i=n.current["".concat(t,"s/").concat(r,".py")];null===i||void 0===i||null===(o=i.current)||void 0===o||o.scrollIntoView()}}),[n,f]),M=(0,h.useCallback)((function(e){d((function(n){var t=n.upstreamBlocks.values||[],r=t.findIndex((function(n){var t=n.uuid;return e.uuid===t}));return sl(sl({},n),{},{upstreamBlocks:sl(sl({},n.upstreamBlocks),{},{values:r>=0?(0,kn.oM)(t,r):t.concat(e)})})}))}),[d]),F=(0,h.useMemo)((function(){var e={};return w.forEach((function(n){n.upstream_blocks.forEach((function(t){e[t]||(e[t]=[]),e[t].push(n)}))})),e}),[w]),B=(0,h.useMemo)((function(){var e=[],n=[];return w.forEach((function(t){var r=t.upstream_blocks,o=void 0===r?[]:r,i=t.uuid,c=F[i],l=[];c&&l.push.apply(l,(0,u.Z)(c.map((function(e){return{height:10,id:"".concat(i,"-").concat(e.uuid,"-from"),side:"SOUTH",width:10}})))),null===o||void 0===o||o.forEach((function(e){l.push({height:10,id:"".concat(e,"-").concat(i,"-to"),side:"NORTH",width:10}),n.push({from:e,fromPort:"".concat(e,"-").concat(i,"-from"),id:"".concat(e,"-").concat(i),to:i,toPort:"".concat(e,"-").concat(i,"-to")})})),e.push({data:{block:t},height:37,id:i,ports:l,width:t.uuid.length*T.KF+5*T.iI+((null===b||void 0===b?void 0:b.uuid)===t.uuid?19*T.KF:0)})})),{edges:n,nodes:e}}),[b,w]),N=B.edges,H=B.nodes;return(0,_.jsxs)(_.Fragment,{children:[b&&(0,_.jsxs)(D.Z,{my:3,px:T.cd,children:[(0,_.jsxs)(D.Z,{mb:T.cd,children:[(0,_.jsxs)(C.ZP,{children:["Select parent block(s) for ",(0,_.jsx)(C.ZP,{color:fn(b.type,{theme:p}).accent,inline:!0,monospace:!0,children:b.uuid}),":"]}),(0,_.jsx)(D.Z,{mt:1,children:y.map((function(e,n){var t,r=e.uuid;return(0,_.jsxs)(C.ZP,{color:fn(null===(t=Z[r])||void 0===t?void 0:t.type,{theme:p}).accent,inline:!0,monospace:!0,children:[r,j>=2&&n<=j-2?(0,_.jsx)(C.ZP,{inline:!0,children:",\xa0"}):null]},r)}))})]}),(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsx)(Wt,{compact:!0,inline:!0,loading:A,onClick:function(){return I({block:sl(sl({},b),{},{upstream_blocks:y.map((function(e){return e.uuid}))})})},uuid:"DependencyGraph/save_parents",children:"Save dependencies"}),(0,_.jsx)(D.Z,{ml:1}),(0,_.jsx)(Wt,{compact:!0,inline:!0,noBackground:!0,onClick:function(){return d({upstreamBlocks:null})},uuid:"DependencyGraph/cancel_save_parents",children:"Cancel"})]})]}),(0,_.jsx)(cl,{height:o-10*T.iI,children:(0,_.jsx)(dl,{arrow:null,disabled:!1,edge:function(e){var n,t=Z[e.source];return(0,_.jsx)(pl,sl(sl({},e),{},{style:{stroke:null===(n=fn(null===t||void 0===t?void 0:t.type,{theme:p}))||void 0===n?void 0:n.accent}}))},edges:N,fit:!0,node:function(e){return(0,_.jsx)(fl,sl(sl({},e),{},{linkable:!1,onClick:function(e,n){var t=n.data.block;(null===b||void 0===b?void 0:b.uuid)===t.uuid||(b?M(t):R(t))},port:null,style:{fill:"transparent",stroke:"transparent",strokeWidth:0},children:function(e){var n,t=e.node.data.block;return(0,_.jsx)("foreignObject",{height:e.height,style:{pointerEvents:"none"},width:e.width,x:0,y:0,children:(0,_.jsxs)(ul,{block:t,disabled:(null===b||void 0===b?void 0:b.uuid)===t.uuid,hasFailed:g.FAILED===t.status,isInProgress:P[t.uuid],isQueued:P[t.uuid]&&(null===(n=l[0])||void 0===n?void 0:n.uuid)!==t.uuid,isSuccessful:g.EXECUTED===t.status,selected:b?(0,kn.sE)(y,(function(e){return e.uuid===t.uuid})):(null===s||void 0===s?void 0:s.uuid)===t.uuid,children:[t.uuid,(null===b||void 0===b?void 0:b.uuid)===t.uuid&&" (currently editing)"]},t.uuid)})}}))},nodes:H,zoomable:!0})})]})},ml=t(19537),vl=t(21764),gl=t(73199),bl=t.n(gl),xl=t(71735),yl=t(65292);var jl=function(e){var n=e.language,t=e.maxWidth,r=e.showLineNumbers,o=e.small,i=e.source,c=e.wrapLines,l=(0,h.useContext)(O.ThemeContext);return(0,_.jsx)(bl(),{source:i,renderers:{code:function(e){var i=e.value;return(0,_.jsx)(xl.Z,{customStyle:{backgroundColor:(l.background||w.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:Un.Vp,fontSize:o?12:14,marginBottom:0,marginTop:0,paddingBottom:2*T.iI,paddingTop:2*T.iI,maxWidth:t},lineNumberStyle:{color:(l.content||w.Z.content).muted},language:n,showLineNumbers:r,style:yl._4,useInlineStyles:!0,wrapLines:c,children:i})}}})},kl=t(87372),Ol=t(32151),Cl=(T.iI,Ol.O$,T.iI,Wn.dN,O.default.div.withConfig({displayName:"indexstyle__SidekickContainerStyle",componentId:"sc-cr39lf-0"})(["height:calc(100vh - ","px - ","px);width:fit-content;",""],Rr,_r.nn,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "})),O.default.div.withConfig({displayName:"indexstyle__PaddingContainerStyle",componentId:"sc-cr39lf-1"})(["padding:","px;",""],2*T.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "})),O.default.table.withConfig({displayName:"indexstyle__TableStyle",componentId:"sc-cr39lf-2"})([""])),wl=O.default.td.withConfig({displayName:"indexstyle__CellStyle",componentId:"sc-cr39lf-3"})(["display:flex;align-items:center;justify-content:space-between;border:1px solid #1C1C1C;height:100%;",""],(function(e){return!e.noPadding&&"\n    padding: 0 ".concat(2*T.iI,"px;\n  ")})),Zl=t(19963);var _l=function(e){var n=e.copyText,t=e.deleteVariable,r=e.variable,o=(0,h.useState)(!1),i=o[0],c=o[1],l=r.uuid,u=(r.type,r.value),a=n||l;return(0,_.jsx)("div",{onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:(0,_.jsxs)(Jc,{children:[(0,_.jsx)(zc,{md:1,hiddenSmDown:!0,children:(0,_.jsx)(wl,{noPadding:!0,children:(0,_.jsx)(Wt,{backgroundColor:Zl.qJ,borderless:!0,centerText:!0,muted:!0,onClick:function(){navigator.clipboard.writeText(a),vl.Am.success("Successfully copied to clipboard.",{position:vl.Am.POSITION.BOTTOM_RIGHT,toastId:l})},uuid:"Sidekick/GlobalVariables/".concat(l),withIcon:!0,children:(0,_.jsx)(M.CK,{size:2.5*T.iI})})})}),(0,_.jsx)(zc,{md:5,children:(0,_.jsxs)(wl,{children:[(0,_.jsx)(C.ZP,{color:Mt.Or,monospace:!0,small:!0,textOverflow:!0,children:l}),t&&i&&(0,_.jsx)(Wt,{backgroundColor:Zl.qJ,borderless:!0,inline:!0,muted:!0,onClick:t,uuid:"Sidekick/GlobalVariables/delete_".concat(l),withIcon:!0,children:(0,_.jsx)(M.rF,{size:2.5*T.iI})})]})}),(0,_.jsx)(zc,{md:6,children:(0,_.jsx)(wl,{children:(0,_.jsx)(C.ZP,{monospace:!0,small:!0,children:u})})})]})})},Pl=t(43313),Sl=t(84779);function El(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Il(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?El(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):El(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Tl(e,n){var t,r;return null===e||void 0===e||null===(t=e.find((function(e){var t=e.block;return n(t)})))||void 0===t||null===(r=t.variables)||void 0===r?void 0:r.map((function(e){var n=e.value;return Il(Il({},e),{},{value:"string"===typeof n?n:JSON.stringify(n)})}))}var Al=function(e){e.blocks;var n=e.fetchVariables,t=e.pipeline,r=e.selectedBlock,o=e.setErrorMessages,i=e.variables,l=e.width,u=(0,h.useState)(!1),s=u[0],d=u[1],f=(0,h.useState)(),p=f[0],v=f[1],g=(0,h.useState)(),b=g[0],x=g[1],y=null===t||void 0===t?void 0:t.uuid,j=(0,m.Db)(Qt.ZP.variables.pipelines.useCreate(y),{onSuccess:function(e){return(0,Gt.wD)(e,{onErrorCallback:function(e){var n=e.error.exception;o((function(e){return e.concat(n)}))}})}}),O=(0,a.Z)(j,1)[0],w=(0,m.Db)((function(e){return Qt.ZP.variables.pipelines.useDelete(y,e)()}),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(){n()},onErrorCallback:function(e){var n=e.error,t=(n.errors,n.message);o((function(e){return e.concat(t)}))}})}}),Z=(0,a.Z)(w,1)[0],P=(0,h.useCallback)((function(e){if("Enter"===e.key){var t=b;try{t=JSON.parse(b)}catch(r){}O({variable:{name:p,value:t}}).then((function(){n(),v(null),x(null)})),d(!1)}}),[O,n,p,b]),S=(0,h.useMemo)((function(){return l-4*T.iI}),[l]),E=(0,h.useMemo)((function(){return Tl(i,(function(e){return"global"===e.uuid}))}),[i]),I=(0,h.useMemo)((function(){return Tl(i,(function(e){return e.uuid===(null===r||void 0===r?void 0:r.uuid)}))}),[r,i]),A=(0,h.useMemo)((function(){return(0,_.jsxs)(Cl,{width:S,children:[s&&(0,_.jsxs)(Jc,{children:[(0,_.jsx)(zc,{md:1,children:(0,_.jsx)(wl,{noPadding:!0,children:(0,_.jsx)(Wt,{backgroundColor:Zl.qJ,borderless:!0,centerText:!0,muted:!0,onClick:function(){navigator.clipboard.writeText(p),vl.Am.success("Successfully copied to clipboard.",{position:vl.Am.POSITION.BOTTOM_RIGHT,toastId:p})},uuid:"Sidekick/GlobalVariables/".concat(p),withIcon:!0,children:(0,_.jsx)(M.CK,{size:2.5*T.iI})})})}),(0,_.jsx)(zc,{md:5,children:(0,_.jsx)(wl,{children:(0,_.jsx)(tr.Z,{compact:!0,borderless:!0,monospace:!0,onChange:function(e){v(e.target.value),e.preventDefault()},onKeyDown:P,paddingHorizontal:0,placeholder:"variable",small:!0,value:p})})}),(0,_.jsx)(zc,{md:6,children:(0,_.jsx)(wl,{children:(0,_.jsx)(tr.Z,{compact:!0,borderless:!0,monospace:!0,onChange:function(e){x(e.target.value),e.preventDefault()},onKeyDown:P,paddingHorizontal:0,placeholder:"enter value",small:!0,value:b})})})]}),null===E||void 0===E?void 0:E.map((function(e){return(0,_.jsx)(_l,{deleteVariable:function(){return Z(e.uuid)},variable:e})}))]})}),[Z,E,p,b,v,x,d,s,S]),R=(0,h.useMemo)((function(){return(0,_.jsx)(Cl,{width:S,children:null===I||void 0===I?void 0:I.map((function(e){return(0,_.jsx)(_l,{copyText:(n=e.uuid,"".concat(n," = get_variable(").concat(y,", ").concat(null===r||void 0===r?void 0:r.uuid,", ").concat(n,")")),variable:e});var n}))})}),[I,r,S]);return(0,_.jsxs)(D.Z,{p:T.cd,children:[(0,_.jsx)(D.Z,{mb:T.cd,children:(0,_.jsxs)(k.Z,{alignItems:"center",children:[(0,_.jsx)(kl.Z,{level:4,monospace:!0,children:"Global Variables"}),(0,_.jsx)(D.Z,{ml:2}),(0,_.jsx)(Wt,{Icon:M.mm,blackBorder:!0,inline:!0,onClick:function(){return d((function(e){return!e}))},uuid:"Sidekick/GlobalVariables/addNewVariable",children:"New"})]})}),(0,_.jsx)(D.Z,{mb:T.cd,children:A}),(0,_.jsx)(D.Z,{mb:T.cd,children:(0,_.jsx)(C.ZP,{children:"Global variables will be passed into all non-scratchpad blocks as keyword arguments. To load a global variable, use the following syntax:"})}),(0,_.jsx)(D.Z,{mb:T.cd,children:(0,_.jsx)(jl,{language:"python",small:!0,source:"\n    var = kwargs['variable_name']\n"})}),I&&I.length>0&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(D.Z,{my:2,children:(0,_.jsx)(kl.Z,{level:4,monospace:!0,children:"Block Output Variables"})}),(0,_.jsx)(D.Z,{mb:2,children:R}),(0,_.jsx)(D.Z,{mb:T.cd,children:(0,_.jsxs)(C.ZP,{children:["Output variables can be used in any ",(0,_.jsx)(C.ZP,{bold:!0,inline:!0,monospace:!0,children:c.SCRATCHPAD})," block."]})}),(0,_.jsx)(D.Z,{mb:T.cd,children:(0,_.jsx)(C.ZP,{children:"To load the variable, use the following syntax:"})}),(0,_.jsx)(D.Z,{mb:T.cd,children:(0,_.jsx)(jl,{language:"python",small:!0,source:"\n    from mage_ai.data_preparation.variable_manager import (\n        get_variable,\n    )\n\n\n    df = get_variable(\n        'pipeline_uuid',\n        'block_uuid',\n        'variable_name',\n    )\n"})})]})]})},Rl=O.default.div.withConfig({displayName:"indexstyle__OutputContainerStyle",componentId:"sc-wkjnrg-0"})([""," overflow-y:scroll;"," ",""],_r.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return!e.height&&"\n    height: ".concat(300,"px;\n  ")}));function Dl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ml(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Dl(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dl(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Fl=function(e){var n=e.cancelPipeline,t=e.executePipeline,r=e.isPipelineExecuting,o=e.pipelineMessages,i=(0,h.useMemo)((function(){return(null===o||void 0===o?void 0:o.length)||0}),[o]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(k.Z,{children:[(0,_.jsx)(Te.Z,{beforeIcon:(0,_.jsx)(M.JM,{inverted:!0,size:2*T.iI}),loading:r,onClick:t,success:!0,children:(0,_.jsx)(C.ZP,{bold:!0,inverted:!0,primary:!1,children:"Execute pipeline"})}),(0,_.jsx)(D.Z,{ml:1}),r&&(0,_.jsx)(Te.Z,{beforeIcon:(0,_.jsx)(M.x8,{inverted:!0,size:2*T.iI}),onClick:n,success:!0,children:(0,_.jsx)(C.ZP,{bold:!0,inverted:!0,primary:!1,children:"Cancel Pipeline"})})]}),(0,_.jsx)(Rl,{noScrollbarTrackBackground:!0,children:(0,_.jsx)(Uo,{executedAndIdle:!0,hasError:!1,selected:!0,children:o.map((function(e,n){var t=e.data,r=e.type,o=[],c=(o=(o=Array.isArray(t)?t:[t]).filter((function(e){return e}))).length;return o.map((function(e,t){var o,l={first:0===n&&0===t,last:n===i-1&&t===c-1};return io.includes(r)?o=(0,_.jsx)(Wo,Ml(Ml({},l),{},{children:(0,_.jsx)(C.ZP,{monospace:!0,preWrap:!0,children:(0,_.jsx)(Lo(),{children:e})})})):r===to.IMAGE_PNG&&(o=(0,_.jsx)("div",{style:{backgroundColor:"white"},children:(0,_.jsx)("img",{alt:"Image ".concat(n," from code output"),src:"data:image/png;base64, ".concat(e)})})),(0,_.jsx)("div",{children:o},"code-output-".concat(n,"-").concat(t))}))}))})})]})},Bl=t(92506),Nl=(T.iI,Ol.O$+3*T.iI+Wn.dN),Hl=O.default.div.withConfig({displayName:"indexstyle__SidekickContainerStyle",componentId:"sc-15ofupc-0"})(["height:calc(100vh - ","px - ","px);width:fit-content;",""],Rr,_r.nn,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "})),Ll=O.default.div.withConfig({displayName:"indexstyle__PaddingContainerStyle",componentId:"sc-15ofupc-1"})(["padding:","px;",""],2*T.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "})),zl=t(24141);var Ul=function(e){var n=e.activeView,t=e.afterWidth,r=e.autocompleteItems,o=e.blockRefs,i=e.blocks,c=e.cancelPipeline,l=e.chartRefs,u=e.deleteWidget,a=e.editingBlock,s=e.executePipeline,d=e.fetchFileTree,f=e.fetchPipeline,p=e.fetchVariables,m=e.globalVariables,v=e.insights,g=e.isPipelineExecuting,b=e.messages,x=e.metadata,y=e.onChangeChartBlock,j=e.pipeline,O=e.pipelineMessages,w=e.runBlock,Z=e.runningBlocks,P=e.sampleData,S=e.savePipelineContent,E=e.selectedBlock,I=e.setAnyInputFocused,A=e.setEditingBlock,R=e.setSelectedBlock,F=e.setTextareaFocused,B=e.statistics,N=e.textareaFocused,H=e.updateWidget,L=e.widgets,z=(0,zl.i)().height,U=Rr,W=(0,h.useState)([]),Q=W[0],G=W[1],V=((null===a||void 0===a?void 0:a.upstreamBlocks)||{}).block,K=((null===P||void 0===P?void 0:P.columns)||[]).slice(0,40),Y=(null===P||void 0===P?void 0:P.rows)||[],q=(null===x||void 0===x?void 0:x.column_types)||{},X=null===K||void 0===K?void 0:K.map((function(e){return{columnType:q[e],uuid:e}})),J=(null===v||void 0===v?void 0:v[1])||{},$=(0,h.useMemo)((function(){return(0,kn.HK)((null===v||void 0===v?void 0:v[0])||[],(function(e){return e.feature.uuid}))}),[v]),ee=function(e){var n=e.statistics,t=Object.keys(n),r=Array(Pl.Dy.length).fill(0);return 0===t.length?null:(t.forEach((function(e){if(Pl.Dy.includes(e)){var t=Pl.CC[e],o=n[e],i=o,c=!1,l=[2,3],u=Pl.Ub[e],a=Pl.oH[e],s=Pl.OD[e];if(Pl.y_.includes(e))c=!0,l=[2,1,2];else if(e in Pl.Sq){o=(0,Sl.Jw)(o,0);var d=Pl.Sq[e];i=n[d]}var f={columnFlexNumbers:l,name:t,progress:c,rate:i,successDirection:a,warning:s};Pl.y_.includes(e)||(f.value=o),r[u]=f}})),r)}({statistics:B}),ne=function(e){var n=e.columnTypes,t=void 0===n?{}:n,r=e.statistics,o=Object.keys(r);if(0===o.length)return null;var i=Object.values(t),c=i.length,l=[];l.push({name:"Column count",successDirection:Pl.oH.column_count,value:(0,Pe.x6)(c)}),o.forEach((function(e){if(Pl.Zu.includes(e)){var n=Pl.CC[e],t=r[e],o=Pl.OD[e];l.push({name:n,successDirection:Pl.oH[e],value:(0,Pe.x6)(t),warning:o})}}));var u=(0,Ol.QO)(i),a=u.countCategory,s=u.countDatetime,d=u.countNumerical;return l.push({name:"Categorical Features",rate:a/c,value:(0,Pe.x6)(a)},{name:"Numerical Features",rate:d/c,value:(0,Pe.x6)(d)},{name:"Datetime Features",rate:s/c,value:(0,Pe.x6)(s)}),l}({columnTypes:q,statistics:B}),te=P&&v&&Object.keys(B).length>0,re=(0,h.useCallback)((0,Ol.Fk)({columnTypes:q,columns:K,insightsByFeatureUUID:$,insightsOverview:J,noColumnLinks:!0,statistics:B}),[q,K,$,J,B]),oe=(0,h.useMemo)((function(){return(0,_.jsx)(Al,{blocks:i,fetchVariables:p,pipeline:j,selectedBlock:E,setErrorMessages:G,variables:m,width:t})}),[null===o||void 0===o?void 0:o.current,i,p,m,j,E,R]);return(0,_.jsxs)(_.Fragment,{children:[(null===Q||void 0===Q?void 0:Q.length)>=1&&(0,_.jsxs)(D.Z,{mb:3,mt:2,mx:2,children:[(0,_.jsxs)(k.Z,{justifyContent:"space-between",children:[(0,_.jsx)(C.ZP,{bold:!0,danger:!0,children:"Errors"}),(0,_.jsx)(Te.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return G([])},transparent:!0,children:(0,_.jsx)(M.x8,{muted:!0})})]}),null===Q||void 0===Q?void 0:Q.map((function(e){return(0,_.jsx)(D.Z,{pb:1,children:(0,_.jsx)(C.ZP,{monospace:!0,xsmall:!0,children:e})},e)}))]}),(0,_.jsxs)(Hl,{fullWidth:cn.includes(n),children:[n===rn.TREE&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(hl,{blockRefs:o,editingBlock:a,fetchPipeline:f,height:z-U-300,pipeline:j,runningBlocks:Z,selectedBlock:E,setEditingBlock:A,setSelectedBlock:R}),!V&&(0,_.jsx)(D.Z,{p:2,children:(0,_.jsx)(Fl,{cancelPipeline:c,executePipeline:s,isPipelineExecuting:g,pipelineMessages:O})})]}),n===rn.DATA&&K.length>0&&(0,_.jsx)(zo.Z,{columnHeaderHeight:Nl,columns:K,height:z-U-Dr,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!0,renderColumnHeader:re,rows:Y,width:t}),n===rn.REPORTS&&(0,_.jsx)(Ll,{noPadding:!E||!te,children:(0,_.jsxs)(k.Z,{flexDirection:"column",fullWidth:!0,children:[ee&&(0,_.jsx)(Bl.Z,{stats:ee,title:"Quality metrics"}),ne&&(0,_.jsx)(D.Z,{mt:T.cd,children:(0,_.jsx)(Bl.Z,{stats:ne,title:"Statistics"})}),X.length>0&&(0,_.jsx)(D.Z,{mt:T.cd,children:(0,_.jsx)(ml.Z,{features:X,statistics:B})})]})}),n===rn.GRAPHS&&(0,_.jsx)(Ll,{noPadding:!E||!te,children:(0,_.jsx)(Wi,{afterWidth:t,features:X,insightsOverview:J,statistics:B})}),rn.VARIABLES===n&&m&&oe,E&&te||!E&&te&&n===rn.DATA?null:ln.includes(n)&&(0,_.jsx)(k.Z,{alignItems:"center",justifyContent:"center",verticalHeight:90,verticalHeightOffset:U,width:t,children:(0,_.jsx)(C.ZP,{center:!0,default:!0,disableWordBreak:!0,large:!0,monospace:!0,children:E?!te&&"No data or insights available":"Select a block for insights"})}),rn.CHARTS===n&&(0,_.jsx)(tl,{autocompleteItems:r,blockRefs:o,blocks:i,chartRefs:l,deleteWidget:u,fetchFileTree:d,fetchPipeline:f,messages:b,onChangeChartBlock:y,pipeline:j,runBlock:w,runningBlocks:Z,savePipelineContent:S,selectedBlock:E,setAnyInputFocused:I,setSelectedBlock:R,setTextareaFocused:F,textareaFocused:N,updateWidget:H,widgets:L,width:t})]})]})},Wl=t(1887),Ql=t.n(Wl),Gl=t(57639);var Vl=function(e){var n=e.after,t=e.afterHeader,r=e.afterHidden,o=e.afterMousedownActive,i=e.afterSubheader,c=e.afterWidth,l=e.before,u=e.beforeHeader,a=e.beforeHidden,s=e.beforeMousedownActive,d=e.beforeWidth,f=e.children,p=e.mainContainerHeader,m=e.mainContainerRef,v=e.setAfterHidden,g=e.setAfterMousedownActive,b=e.setAfterWidth,x=e.setBeforeHidden,y=e.setBeforeMousedownActive,j=e.setBeforeWidth,O=(0,zl.i)().width,C=(0,h.useRef)(null),w=(0,h.useRef)(null),Z=(0,h.useRef)(null),P=(0,h.useRef)(null),S=(0,h.useCallback)((function(){var e=!r;v(e),(0,sn.t8)(sn.zg,e)}),[r,v]),E=(0,h.useCallback)((function(){var e=!a;x(e),(0,sn.t8)(sn.Uu,e)}),[a,x]);(0,h.useEffect)((function(){var e,n,t,r,o=function(e){var n,t;((null===Z||void 0===Z||null===(n=Z.current)||void 0===n||null===(t=n.getBoundingClientRect)||void 0===t?void 0:t.call(n))||{}).x;if(O){var r=e.x;r+Ar>O-c&&(r=O-c-Ar),j(Math.max(r,Er))}},i=function(e){var n,t;e.offsetX>=e.target.offsetWidth-Tr&&e.offsetX<=e.target.offsetWidth+Tr&&(y(!0),e.preventDefault(),null===(n=document)||void 0===n||null===(t=n.addEventListener)||void 0===t||t.call(n,"mousemove",o,!1))},l=function(){var e,n;y(!1),null===(e=document)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousemove",o,!1)};return null===P||void 0===P||null===(e=P.current)||void 0===e||null===(n=e.addEventListener)||void 0===n||n.call(e,"mousedown",i,!1),null===(t=document)||void 0===t||null===(r=t.addEventListener)||void 0===r||r.call(t,"mouseup",l,!1),function(){var e,n,t,r;null===P||void 0===P||null===(e=P.current)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousedown",i,!1),null===(t=document)||void 0===t||null===(r=t.removeEventListener)||void 0===r||r.call(t,"mouseup",l,!1),l()}}),[c,Z,P,y,j,O]),(0,h.useEffect)((function(){var e,n,t,r,o=function(e){var n,t;((null===C||void 0===C||null===(n=C.current)||void 0===n||null===(t=n.getBoundingClientRect)||void 0===t?void 0:t.call(n))||{}).x;if(O){var r=O-e.x;r+Ar>O-d&&(r=O-d-Ar),b(Math.max(r,Sr))}},i=function(e){var n,t;e.offsetX>=-1*Tr&&e.offsetX<=Tr&&(g(!0),e.preventDefault(),null===(n=document)||void 0===n||null===(t=n.addEventListener)||void 0===t||t.call(n,"mousemove",o,!1))},c=function(){var e,n;g(!1),null===(e=document)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousemove",o,!1)};return null===w||void 0===w||null===(e=w.current)||void 0===e||null===(n=e.addEventListener)||void 0===n||n.call(e,"mousedown",i,!1),null===(t=document)||void 0===t||null===(r=t.addEventListener)||void 0===r||r.call(t,"mouseup",c,!1),function(){var e,n,t,r;null===w||void 0===w||null===(e=w.current)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousedown",i,!1),null===(t=document)||void 0===t||null===(r=t.removeEventListener)||void 0===r||r.call(t,"mouseup",c,!1),c()}}),[d,C,w,g,b,O]);var I=r?4*T.iI:c,A=a?4*T.iI:d;return(0,_.jsxs)(Gl.Z,{children:[(o&&!r||s&&!a)&&(0,_.jsx)(Ql(),{children:(0,_.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n                body {\n                  cursor: col-resize;\n                }\n              "}})}),l&&(0,_.jsxs)(Lr,{style:{width:A},children:[(0,_.jsx)(Qr,{active:s,disabled:a,ref:P,right:0}),(0,_.jsx)(Nr,{style:{width:A},visible:a,children:(0,_.jsxs)(k.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,justifyContent:"space-between",children:[(0,_.jsxs)(De.Z,{children:[(0,_.jsx)(D.Z,{pl:a?1:0}),!a&&u]}),(0,_.jsxs)(De.Z,{children:[(0,_.jsx)(gr,{block:!0,label:a?"Show sidebar":"Hide sidebar",size:null,widthFitContent:!0,children:(0,_.jsxs)(Te.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return E()},children:[a&&(0,_.jsx)(M._Q,{neutral:!0,size:2*T.iI}),!a&&(0,_.jsx)(M.s$,{neutral:!0,size:2*T.iI})]})},a?"before-is-hidden":"before-is-visible"),(0,_.jsx)(D.Z,{pr:a?1:2})]})]})}),(0,_.jsx)(zr,{noScrollbarTrackBackground:!0,ref:Z,children:!a&&l})]}),(0,_.jsxs)(Gr,{style:{left:A,width:"calc(100% - ".concat(A+I,"px)")},children:[p,(0,_.jsx)(Vr,{headerOffset:p?Rr:null,style:{width:"calc(100% - ".concat(A+I,"px)")},children:(0,_.jsx)(Kr,{noScrollbarTrackBackground:!0,ref:m,children:f})})]}),n&&(0,_.jsxs)(Ur,{style:{width:I},children:[(0,_.jsx)(Qr,{active:o,disabled:r,left:0,ref:w}),(0,_.jsx)(Nr,{style:{width:I},visible:r,children:(0,_.jsxs)(k.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,children:[(0,_.jsxs)(De.Z,{children:[(0,_.jsx)(D.Z,{pl:r?1:2}),(0,_.jsxs)(Te.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return S()},children:[r&&(0,_.jsx)(M.s$,{neutral:!0,size:2*T.iI}),!r&&(0,_.jsx)(M._Q,{neutral:!0,size:2*T.iI})]})]}),!r&&t]})}),!r&&i&&(0,_.jsx)(Hr,{style:{width:I},visible:r,children:i}),(0,_.jsx)(Wr,{noScrollbarTrackBackground:!0,ref:C,children:!r&&n})]})]})},Kl=t(28799),Yl=t(59e3);function ql(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Xl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ql(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ql(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Jl(e){var n,t,r,o,i,l=e.pipeline,d=(0,v.useRouter)(),f=(0,zl.i)(),g=f.height,b=f.width,x=(0,h.useState)((0,sn.U2)(sn.L8,Pr)),y=x[0],j=x[1],O=(0,h.useState)(null),C=O[0],w=O[1],Z=(0,h.useState)((0,sn.U2)(sn.J3,Ir)),P=Z[0],S=Z[1],E=(0,h.useState)(!!(0,sn.U2)(sn.zg)),I=E[0],A=E[1],R=(0,h.useState)(!!(0,sn.U2)(sn.Uu)),F=R[0],B=R[1],N=(0,h.useState)(!1),H=N[0],L=N[1],z=(0,h.useState)(!1),U=z[0],W=z[1],Q=(0,h.useState)(null),G=Q[0],V=Q[1],K=(0,h.useState)(null),Y=K[0],q=K[1],X=(0,h.useState)(null),J=X[0],$=X[1],ee=(0,h.useState)([]),ne=ee[0],te=ee[1],re=(0,h.useState)(!1),oe=re[0],ie=re[1],ce=(0,h.useState)({}),le=ce[0],ue=ce[1],ae=(0,h.useState)(!1),se=ae[0],de=ae[1],fe=(0,h.useState)(!1),pe=fe[0],he=fe[1],me=(0,h.useState)(null),ve=me[0],ge=me[1],be=(0,h.useState)(!1),xe=be[0],ye=be[1],je=Qt.ZP.pipelines.list(),ke=je.data,Oe=je.mutate,Ce=(0,h.useMemo)((function(){return null===ke||void 0===ke?void 0:ke.pipelines}),[ke]),we=(0,h.useMemo)((function(){return(null===Ce||void 0===Ce?void 0:Ce.length)||0}),[Ce]),Ze=(0,Yl.iV)(),_e=Ze.sideview,Se=Ze.file_path,Ee=(0,h.useMemo)((function(){var e=Ze["file_paths[]"]||[];return Array.isArray(e)||(e=[e]),e}),[Ze]),Re=(0,h.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,Yl.iV)().sideview!==e&&(0,eo.u)((0,s.Z)({},on,e),{pushHistory:n})}),[]);(0,h.useEffect)((function(){_e||Re(rn.TREE,!1)}),[_e]);var Me=(0,h.useCallback)((function(e,n){Re(e,n),A(!1)}),[Re]),Fe=(0,h.useRef)(null),Be=(0,h.useRef)({}),Ne=(0,h.useRef)({}),He=(0,h.useRef)({}),Le=(0,h.useRef)({}),ze=(0,h.useRef)(null),Ue=l.uuid,We=(0,Ln.Z)(Ue),Qe=(0,h.useCallback)((function(e){He.current=Xl(Xl({},He.current),e)}),[He]),Ge=(0,h.useCallback)((function(e,n){Qe((0,s.Z)({},e,n)),ye(!0)}),[Qe,ye]),Ve=(0,h.useCallback)((function(e){Le.current=Xl(Xl({},Le.current),e)}),[Le]),Ke=(0,h.useCallback)((function(e,n){Ve((0,s.Z)({},e,n)),ye(!0)}),[Ve,ye]),Ye=(0,h.useState)(null),qe=Ye[0],Xe=Ye[1];(0,h.useEffect)((function(){null===ze||void 0===ze||!ze.current||H||U||Xe(ze.current.getBoundingClientRect().width)}),[H,U,I,y,F,P,null===ze||void 0===ze?void 0:ze.current,Xe,b]),(0,h.useEffect)((function(){H||(w(y),(0,sn.t8)(sn.L8,y))}),[H,y,w]),(0,h.useEffect)((function(){U||(0,sn.t8)(sn.J3,P)}),[U,P]);var Je=Qt.ZP.data_providers.list().data,$e=null===Je||void 0===Je?void 0:Je.data_providers,en=Qt.ZP.variables.pipelines.list(!I&&Ue),nn=en.data,tn=en.mutate,cn=null===nn||void 0===nn?void 0:nn.variables,ln=(0,h.useState)([]),dn=ln[0],fn=ln[1],pn=(0,h.useState)([]),hn=pn[0],mn=pn[1],vn=(0,h.useRef)({}),gn=(0,h.useCallback)((function(e){var n;ye(!0);var t=vn.current[e.uuid]||{},r=t.upstream_blocks;(null===e||void 0===e||null===(n=e.upstream_blocks)||void 0===n?void 0:n.length)>=1&&(r=e.upstream_blocks),vn.current[e.uuid]=Xl(Xl(Xl({},t),e),{},{configuration:Xl(Xl({},t.configuration),e.configuration),upstream_blocks:r})}),[ye,vn.current]),bn=(0,h.useState)(!1),xn=bn[0],yn=bn[1],jn=(0,h.useState)({upstreamBlocks:null}),On=jn[0],Cn=jn[1],wn=(0,h.useState)([]),Zn=wn[0],_n=wn[1],Pn=(0,h.useState)(null),Sn=Pn[0],En=Pn[1],An=(0,h.useState)(null),Rn=An[0],Mn=An[1],Fn=function(e,n){var t=(0,kn.HK)(n,(function(e){return e.uuid}));return e.map((function(e){return t[e]})).filter((function(e){return!!e}))}(ei(Ue),dn),Nn=(0,h.useState)(Fn),Hn=Nn[0],zn=Nn[1],Un=(0,h.useState)(null),Wn=Un[0],Qn=Un[1],Gn=(0,Ln.Z)(Hn),Vn=(0,h.useCallback)((function(){Cn({upstreamBlocks:{block:null,values:[]}}),mt({}),ye(!1),ge(null),_n([]),En(null)}),[]);(0,h.useEffect)((function(){Ue!==We&&(He.current={})}),[Ue,We]);var Kn=Qt.ZP.blocks.pipelines.outputs.detail(!I&&Ue,(null===Wn||void 0===Wn?void 0:Wn.type)!==c.SCRATCHPAD&&(null===Wn||void 0===Wn?void 0:Wn.type)!==c.CHART&&(null===Wn||void 0===Wn?void 0:Wn.uuid)),Yn=Kn.data,qn=Kn.mutate,Xn=null===Yn||void 0===Yn||null===(n=Yn.outputs)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.sample_data,Jn=Qt.ZP.blocks.pipelines.analyses.detail(!I&&Ue,(null===Wn||void 0===Wn?void 0:Wn.type)!==c.SCRATCHPAD&&(null===Wn||void 0===Wn?void 0:Wn.type)!==c.CHART&&(null===Wn||void 0===Wn?void 0:Wn.uuid)),$n=Jn.data,et=Jn.mutate,nt=(null===$n||void 0===$n||null===(r=$n.analyses)||void 0===r?void 0:r[0])||{},tt=nt.insights,rt=nt.metadata,ot=nt.statistics,it=void 0===ot?{}:ot,ct=Qt.ZP.blocks.pipelines.analyses.detail(Ue,(null===Sn||void 0===Sn?void 0:Sn.type)!==c.CHART&&null!==Rn&&(null===Sn||void 0===Sn?void 0:Sn.uuid)),lt=ct.data,ut=(ct.mutate,(null===lt||void 0===lt||null===(o=lt.analyses)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.suggestions)||[]);(0,h.useEffect)((function(){0===Zn.length&&(et(),qn(),tn())}),[et,qn,tn,Zn]),(0,h.useEffect)((function(){if(0===Hn.length)Qn(null);else if((null===Gn||void 0===Gn?void 0:Gn.length)!==(null===Hn||void 0===Hn?void 0:Hn.length)&&(null===Hn||void 0===Hn?void 0:Hn.length)<(null===Gn||void 0===Gn?void 0:Gn.length)){var e=Gn.findIndex((function(e){return e.uuid===(null===Wn||void 0===Wn?void 0:Wn.uuid)})),n=Gn.length-1===e?e-1:e+1;Qn(Gn[Math.max(0,n)])}}),[Hn,Gn,null===Wn||void 0===Wn?void 0:Wn.uuid]),(0,h.useEffect)((function(){var e;null!==(e=On.upstreamBlocks)&&void 0!==e&&e.block&&(A(!1),Re(rn.TREE))}),[On.upstreamBlocks]);var at=Qt.ZP.autocomplete_items.list({},{refreshInterval:!1,revalidateOnFocus:!0}),st=at.data,dt=at.mutate,ft=null===st||void 0===st?void 0:st.autocomplete_items,pt=(0,h.useState)({}),ht=pt[0],mt=pt[1],vt=(0,h.useState)([]),gt=vt[0],bt=vt[1],xt=Qt.ZP.pipelines.detail(Ue),yt=xt.data,jt=(xt.isLoading,xt.mutate),kt=Qt.ZP.files.list(),Ot=kt.data,Ct=kt.mutate,wt=null===yt||void 0===yt?void 0:yt.pipeline,Zt=Qt.ZP.kernels.list({},{refreshInterval:5e3,revalidateOnFocus:!0}),_t=Zt.data,Pt=Zt.mutate,St=null===_t||void 0===_t?void 0:_t.kernels,Et=(null===St||void 0===St?void 0:St.find((function(e){return e.name===Zr[null===wt||void 0===wt?void 0:wt.type]})))||(null===St||void 0===St?void 0:St[0]);(0,h.useEffect)((function(){$(Se)}),[Se]),(0,h.useEffect)((function(){(0,kn.fS)(Ee,ne)||te(Ee)}),[Ee]);var It=(0,m.Db)(Qt.ZP.pipelines.useCreate(),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(e){var n=e.pipeline.uuid;d.push("/pipelines/[...slug]","/pipelines/".concat(n)),Ct(),Oe()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),Tt=(0,a.Z)(It,1)[0],At=(0,m.Db)(Qt.ZP.pipelines.useUpdate(Ue,{update_content:!0}),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(){return ye(!1)},onErrorCallback:function(e,n){return V({errors:n,response:e})}})}}),Rt=(0,a.Z)(At,2),Dt=Rt[0],Mt=Rt[1].isLoading,Ft=(0,h.useCallback)((function(e){var n=e||{},t=n.block,r=n.pipeline,o=void 0===r?{}:r;return ge(new Date),Dt({pipeline:Xl(Xl(Xl({},wt),o),{},{blocks:dn.map((function(e){var n=He.current[e.uuid];"undefined"===typeof n&&(n=e.content);var r=Xl(Xl({},e),{},{content:n,outputs:c.SCRATCHPAD===e.type&&ht[e.uuid]?ht[e.uuid].map((function(n,t){return{text_data:JSON.stringify(n),variable_uuid:"".concat(e.uuid,"_").concat(t)}})):e.outputs});return(null===t||void 0===t?void 0:t.uuid)===e.uuid&&Object.entries(t).forEach((function(e){var n=(0,a.Z)(e,2),t=n[0],o=n[1];"object"===typeof o?Object.entries(o).forEach((function(e){var n=(0,a.Z)(e,2),o=n[0],i=n[1];r[t]||(r[t]={}),r[t][o]=i})):r[t]=o})),r})),widgets:hn.map((function(e){var n=Le.current[e.uuid],t=vn.current[e.uuid]||{};return"undefined"===typeof n&&(n=e.content),Xl(Xl(Xl({},e),t),{},{content:n,configuration:Xl(Xl({},e.configuration),t.configuration)})}))})})}),[dn,He.current,Le.current,ht,wt,ge,Dt,vn.current,hn]),Bt=(0,h.useCallback)((function(e){Ft();var n=encodeURIComponent(e),t=(0,Yl.iV)()["file_paths[]"]||[];Array.isArray(t)||(t=[t]),t.includes(n)||t.push(n),(0,eo.u)({"file_paths[]":t,file_path:n})}),[Ft]),Nt=(0,h.useCallback)((function(e,n){return Ft({pipeline:{name:e,type:n}}).then((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.pipeline){var r=e.data.pipeline.uuid;Ct(),n!==(null===wt||void 0===wt?void 0:wt.type)&&jt(),Jo(dn,Ue,r),d.push("/pipelines/".concat(r))}}))}),[dn,Ct,Ue,Ft,Jo]),Ht=(0,m.Db)((function(e){return Qt.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(e){e.pipeline.uuid===Ue&&function(e,n){var t="/pipelines/".concat(null===e||void 0===e?void 0:e[0]),r=n.query;(null===e||void 0===e?void 0:e.length)>=1&&n.push({pathname:t,query:r})}(Ce,d),function(e,n){e.forEach((function(e){(0,sn.Od)("".concat(n,"/").concat(e.uuid,"/codeCollapsed")),(0,sn.Od)("".concat(n,"/").concat(e.uuid,"/outputCollapsed"))}))}(dn,Ue),Ct(),Oe()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),Lt=(0,a.Z)(Ht,1)[0],zt=(0,m.Db)((function(e){var n=e.uuid;return Qt.ZP.blocks.pipelines.useDelete(Ue,n)()}),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(e){var n=e.block,t=n.type,r=n.uuid;fn((function(e){return(0,kn.oM)(e,e.findIndex((function(e){var n=e.uuid;return r===n})))})),jt(),En(null),t===c.SCRATCHPAD&&Ct()},onErrorCallback:function(e,n){var t=e.url_parameters,r=n.messages;mt((function(e){return Xl(Xl({},e),{},(0,s.Z)({},t.block_uuid,r.map((function(e){return{data:"".concat(e,"\n"),error:"".concat(e,"\n"),type:to.TEXT_PLAIN}}))))}))}})}}),Ut=(0,a.Z)(zt,1)[0],Vt=(0,m.Db)((function(e){var n=e.uuid;return Qt.ZP.widgets.pipelines.useDelete(Ue,n)()}),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(e){var n=e.widget.uuid;mn((function(e){return(0,kn.oM)(e,e.findIndex((function(e){var t=e.uuid;return n===t})))})),jt(),Ct()},onErrorCallback:function(e,n){var t=e.url_parameters,r=n.messages;mt((function(e){return Xl(Xl({},e),{},(0,s.Z)({},t.block_uuid,r.map((function(e){return{data:"".concat(e,"\n"),error:"".concat(e,"\n"),type:to.TEXT_PLAIN}}))))}))}})}}),Kt=(0,a.Z)(Vt,1)[0],Yt=(0,m.Db)((function(e){var n=e.type,t=e.uuid;return Qt.ZP.blocks.useDelete(encodeURIComponent("".concat(n,"/").concat(t)))()}),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(){dt(),jt(),Ct()},onErrorCallback:function(e,n){return V({errors:n,displayMessage:"Error deleting block file. Check that there are no downstream blocks, then try again.",response:e})}})}}),Xt=(0,a.Z)(Yt,1)[0],Jt=(0,m.Db)(Qt.ZP.restart.kernels.useCreate(null===Et||void 0===Et?void 0:Et.id),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(){return Pt()},onErrorCallback:function(e,n){return V({errors:n,response:e})}})}}),$t=(0,a.Z)(Jt,1)[0],tr=(0,m.Db)(Qt.ZP.interrupt.kernels.useCreate(null===Et||void 0===Et?void 0:Et.id),{onSuccess:function(e){return(0,Gt.wD)(e,{callback:function(e){},onErrorCallback:function(e,n){return V({errors:n,response:e})}})}}),rr=(0,a.Z)(tr,1)[0],or=((0,h.useCallback)((function(){window.confirm("Do you want to restart the kernel? All variables will be cleared.")&&$t()}),[$t]),(0,m.Db)(Qt.ZP.blocks.pipelines.useCreate(Ue))),ir=(0,a.Z)(or,1)[0],cr=(0,h.useCallback)((function(e,n,t){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,Pe.Y6)();return e.converted_from&&(r=He.current[e.converted_from]),ir({block:Xl({content:r,name:o,priority:n},e)}).then((function(e){(0,Gt.wD)(e,{callback:function(){var r=e.data.block;fn((function(e){return(0,kn.Hk)(r,n,e)})),null===t||void 0===t||t(r),Mn(null),Ct(),jt()},onErrorCallback:function(e,n){return V({errors:n,response:e})}})}))}),[He.current,ir,fn]),lr=Qt.ZP.widgets.pipelines.list(!I&&Ue),ur=(lr.data,lr.mutate,(0,m.Db)(Qt.ZP.widgets.pipelines.useCreate(Ue))),ar=(0,a.Z)(ur,1)[0],sr=(0,h.useCallback)((function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,Pe.Y6)();return ar({widget:Xl({name:r,priority:n,type:c.CHART},e)}).then((function(e){return(0,Gt.wD)(e,{callback:function(){var n=e.data.widget;null===t||void 0===t||t(n),Ct(),jt(),Re(rn.CHARTS),q(n)},onErrorCallback:function(e,n){return V({errors:n,response:e})}})}))}),[_e,Ne.current,ar,Re]);(0,h.useEffect)((function(){if(Y){var e,n=null===(e=Ne.current[Y.uuid])||void 0===e?void 0:e.current;n&&(n.scrollIntoView(),q(null))}}),[Ne.current[null===Y||void 0===Y?void 0:Y.uuid],q]),(0,h.useEffect)((function(){We!==Ue&&(fn([]),mn([]),zn([]))}),[Ue,We]),(0,h.useEffect)((function(){"undefined"!==typeof(null===wt||void 0===wt?void 0:wt.blocks)&&fn(wt.blocks)}),[null===wt||void 0===wt?void 0:wt.blocks]),(0,h.useEffect)((function(){"undefined"!==typeof(null===wt||void 0===wt?void 0:wt.widgets)&&mn(wt.widgets)}),[null===wt||void 0===wt?void 0:wt.widgets]),(0,h.useEffect)((function(){(null===Fn||void 0===Fn?void 0:Fn.length)>0&&0===(null===Hn||void 0===Hn?void 0:Hn.length)&&(zn(Fn),Qn(Fn[0]))}),[null===Hn||void 0===Hn?void 0:Hn.length,null===Fn||void 0===Fn?void 0:Fn.length]);var dr=(0,Ln.Z)(dn);(0,h.useEffect)((function(){if("undefined"!==typeof(null===wt||void 0===wt?void 0:wt.blocks)&&(!dn.length||(null===dr||void 0===dr?void 0:dr.map((function(e){return e.uuid})).sort())!==(null===dn||void 0===dn?void 0:dn.map((function(e){return e.uuid})).sort()))){var e=Xo(wt.blocks),n=e.content,t=e.messages;He.current=n,mt((function(e){return Xl(Xl({},t),e)}))}}),[dn,dr,null===wt||void 0===wt?void 0:wt.blocks,fn,mt]),(0,h.useEffect)((function(){if(!hn.length&&"undefined"!==typeof(null===wt||void 0===wt?void 0:wt.widgets)){var e=Xo(wt.widgets),n=e.content,t=e.messages;Le.current=n,mt((function(e){return Xl(Xl({},t),e)}))}}),[null===wt||void 0===wt?void 0:wt.widgets,fn,mt,hn]);var fr=(0,h.useCallback)((function(e,n,t){var r=dn.find((function(t){var r=t.type,o=t.uuid;return r===n&&o===e}));if(r){if(En(r),null!==Be&&void 0!==Be&&Be.current){var o,i=Be.current["".concat(r.type,"s/").concat(r.uuid,".py")];null===i||void 0===i||null===(o=i.current)||void 0===o||o.scrollIntoView()}}else if(n===c.CHART){var l=hn.find((function(n){return n.uuid===e}));if(l&&(En(l),null!==Ne&&void 0!==Ne&&Ne.current)){var u,a=Ne.current[l.uuid];null===a||void 0===a||null===(u=a.current)||void 0===u||u.scrollIntoView()}}else Bt(t)}),[dn]),pr=(0,p.ZP)((0,Kl.Ib)(),{onOpen:function(){return console.log("socketUrlPublish opened")},shouldReconnect:function(e){return console.log("Attempting to reconnect..."),!0}}),hr=pr.lastMessage,mr=(pr.readyState,pr.sendMessage);(0,h.useEffect)((function(){if(hr){var e=JSON.parse(hr.data),n=e.execution_state,t=e.msg_type,r=e.uuid,o=dn.find((function(e){var n=e.uuid;return r===n}));"stream_pipeline"!==t?mt((function(n){var t=n[r]||[];return Xl(Xl({},n),{},(0,s.Z)({},r,t.concat(e)))})):(bt((function(n){return[].concat((0,u.Z)(n),[e])})),no.IDLE===n&&(_n([]),jt(),r||yn(!1))),no.BUSY===n?_n((function(e){return e.find((function(e){var n=e.uuid;return r===n}))||!o?e:e.concat(o)})):no.IDLE===n&&_n((function(e){return e.filter((function(e){var n=e.uuid;return r!==n}))})),ye(!0)}}),[hr]);var vr=(0,h.useCallback)((function(){Ft().then((function(){yn(!0),bt([]),mr(JSON.stringify({execute_pipeline:!0,pipeline_uuid:Ue}))}))}),[Ue]),gr=(0,h.useCallback)((function(){mr(JSON.stringify({cancel_pipeline:!0,pipeline_uuid:Ue}))}),[Ue,mr]),br=(0,h.useCallback)((function(e){var n=e.block,t=e.code,r=e.ignoreAlreadyRunning,o=e.runDownstream,i=void 0!==o&&o,c=e.runUpstream,l=void 0!==c&&c,u=e.runTests,a=void 0!==u&&u,s=n.uuid;Zn.find((function(e){var n=e.uuid;return s===n}))&&!r||(mr(JSON.stringify({code:t,pipeline_uuid:null===wt||void 0===wt?void 0:wt.uuid,type:n.type,uuid:s,run_downstream:i,run_upstream:l,run_tests:a})),mt((function(e){return delete e[s],e})),de(!1),_n((function(e){return e.find((function(e){var n=e.uuid;return s===n}))?e:e.concat(n)})))}),[jt,wt,Zn,mr,mt,_n,de]),xr=(0,h.useRef)(null),yr=(0,h.useMemo)((function(){return(0,_.jsx)(Dn,{areaRef:xr,createPipeline:Tt,deleteBlockFile:Xt,deletePipeline:Lt,enableContextItem:!0,numPipelines:we,type:In.FILE_BROWSER,children:(0,_.jsx)(Tn,{files:null===Ot||void 0===Ot?void 0:Ot.files,onSelectBlockFile:fr,openFile:Bt,openPipeline:function(e){Vn(),d.push("/pipelines/[...slug]","/pipelines/".concat(e))},openSidekickView:Me,ref:xr})})}),[null===Ot||void 0===Ot?void 0:Ot.files,fr]),jr=(null===Hn||void 0===Hn?void 0:Hn.length)>0?un:un.filter((function(e){return e.key!==rn.DATA})),kr=(0,h.useMemo)((function(){return(0,_.jsx)(Ul,{activeView:_e,afterWidth:C,autocompleteItems:ft,blockRefs:Be,blocks:dn,cancelPipeline:gr,chartRefs:Ne,deleteWidget:Kt,editingBlock:On,executePipeline:vr,fetchFileTree:Ct,fetchPipeline:jt,fetchVariables:tn,globalVariables:cn,insights:tt,isPipelineExecuting:xn,messages:ht,metadata:rt,onChangeChartBlock:Ke,pipeline:wt,pipelineMessages:gt,runBlock:br,runningBlocks:Zn,sampleData:Xn,savePipelineContent:Ft,selectedBlock:Sn,setAnyInputFocused:he,setEditingBlock:Cn,setSelectedBlock:En,setTextareaFocused:de,statistics:it,textareaFocused:se,updateWidget:gn,widgets:hn})}),[_e,C,ft,Be,dn,Kt,On,Ct,jt,tn,cn,tt,ht,rt,Ke,wt,gt,br,Zn,Xn,Ft,Sn,mr,he,Cn,bt,de,it,se,gn,hn]),Or=(0,h.useMemo)((function(){return(0,_.jsx)(Pi,{addNewBlockAtIndex:cr,addWidget:function(e,n){var t=n.onCreateCallback;return sr(e,hn.length,t)},anyInputFocused:pe,autocompleteItems:ft,blockRefs:Be,blocks:dn,dataProviders:$e,deleteBlock:Ut,fetchFileTree:Ct,fetchPipeline:jt,interruptKernel:rr,isPipelineUpdating:Mt,kernel:Et,mainContainerRef:ze,mainContainerWidth:qe,messages:ht,onChangeCodeBlock:Ge,openSidekickView:Me,pipeline:wt,pipelineContentTouched:xe,pipelineLastSaved:ve,restartKernel:$t,runBlock:br,runningBlocks:Zn,savePipelineContent:Ft,selectedBlock:Sn,setAnyInputFocused:he,setEditingBlock:Cn,setMessages:mt,setOutputBlocks:zn,setPipelineContentTouched:ye,setRecsWindowOpenBlockIdx:Mn,setRunningBlocks:_n,setSelectedBlock:En,setSelectedOutputBlock:Qn,setTextareaFocused:de,textareaFocused:se,widgets:hn})}),[cr,sr,pe,ft,Be,dn,$e,Ut,Ct,jt,rr,Mt,Et,ze,qe,ht,Ge,wt,xe,ve,$t,br,Zn,Ft,Sn,he,Cn,mt,ye,_n,En,de,se,hn]),Cr=(0,h.useMemo)((function(){return(0,_.jsx)(ro,{filePaths:ne,filesTouched:le,isBusy:Zn.length>=1,isPipelineUpdating:Mt,kernel:Et,pipeline:wt,pipelineContentTouched:xe,pipelineLastSaved:ve,restartKernel:$t,savePipelineContent:Ft,selectedFilePath:J,updatePipelineMetadata:Nt})}),[le,Mt,Et,wt,xe,ve,$t,Zn,Ft,J,ne,Nt]),wr=(0,h.useMemo)((function(){var e=null===dn||void 0===dn?void 0:dn.filter((function(e){var n=e.type;return c.SCRATCHPAD!==n}));return(0,_.jsxs)(k.Z,{alignItems:"center",fullWidth:!0,justifyContent:"space-between",children:[(0,_.jsx)(De.Z,{children:jr.map((function(e){var n=e.key,t=e.label,r=n===_e,o=an[n];return(0,_.jsx)(D.Z,{pl:1,children:(0,_.jsx)(Wt,{beforeElement:(0,_.jsx)(o,{}),blackBorder:!0,compact:!0,onClick:function(){return Re(n)},selected:r,uuid:n,children:t})},n)}))}),(0,_.jsxs)(D.Z,{px:1,ref:Fe,style:{position:"relative"},children:[(0,_.jsx)(Wt,{beforeElement:(0,_.jsx)(M.mm,{}),blackBorder:!0,compact:!0,onClick:function(){return ie(!0)},primaryGradient:!0,uuid:"Pipeline/afterHeader/add_chart",children:"Add chart"}),(0,_.jsx)(Ae.Z,{disableEscape:!0,onClickOutside:function(){return ie(!1)},open:oe,children:(0,_.jsx)(Ie,{addWidget:function(e,n){var t=n.onCreateCallback;return sr(e,hn.length,t)},block:e[e.length-1],onClickCallback:function(){return ie(!1)},open:oe,parentRef:Fe,rightOffset:2*T.iI,runBlock:br})})]})]})}),[sr,dn,jr,Fe,br,ie,oe,hn]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(nr.Z,{title:null===wt||void 0===wt?void 0:wt.name}),(0,_.jsxs)(Vl,{after:kr,afterHeader:wr,afterHidden:I,afterMousedownActive:H,afterSubheader:(null===Hn||void 0===Hn?void 0:Hn.length)>0&&_e===rn.DATA&&(0,_.jsx)(k.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,children:Hn.map((function(e){var n=e.uuid,t=(null===Wn||void 0===Wn?void 0:Wn.uuid)===n;return(0,_.jsx)(D.Z,{pl:1,children:(0,_.jsx)(Wt,{afterElement:t?(0,_.jsx)(Te.Z,{basic:!0,highlightOnHover:!0,onClick:function(){!function(e,n){var t=ei(e).filter((function(e){return e!==n}));(0,sn.t8)($o(e),t)}(Ue,e.uuid),zn((function(e){return e.filter((function(e){return e.uuid!==n}))}))},padding:"2px",transparent:!0,children:(0,_.jsx)(M.x8,{muted:!0,size:1.25*T.iI})}):null,blackBorder:!0,compact:!0,muted:!0,onClick:function(){return Qn(e)},selected:t,uuid:n,children:n})},n)}))}),afterWidth:y,before:yr,beforeHeader:(0,_.jsx)(er,{cancelPipeline:gr,createPipeline:Tt,executePipeline:vr,interruptKernel:rr,isPipelineExecuting:xn,restartKernel:$t,savePipelineContent:Ft,setMessages:mt}),beforeHidden:F,beforeMousedownActive:U,beforeWidth:P,mainContainerHeader:Cr,mainContainerRef:ze,setAfterHidden:A,setAfterMousedownActive:L,setAfterWidth:j,setBeforeHidden:B,setBeforeMousedownActive:W,setBeforeWidth:S,children:[(0,_.jsx)("div",{style:{height:J?0:null,visibility:J?"hidden":null,opacity:J?0:null},children:Or}),null===Ee||void 0===Ee?void 0:Ee.map((function(e){return(0,_.jsx)("div",{style:{display:J===e?null:"none"},children:(0,_.jsx)(qt,{active:J===e,addNewBlock:function(e){cr(e,dn.length,En,e.name),d.push("/pipelines/".concat(Ue))},filePath:e,pipeline:wt,setFilesTouched:ue})},e)})),(0,_.jsx)(D.Z,{pb:Math.max(Math.floor(g/2/T.iI),0)})]}),G&&(0,_.jsx)(Bn,Xl(Xl({},G),{},{onClose:function(){return V(null)}})),null!==Rn&&(0,_.jsx)(Hi,{addNewBlockAtIndex:cr,blockInsertionIndex:Rn,blocks:dn,loading:!lt&&null!==Sn,selectedBlock:Sn,setRecsWindowOpenBlockIdx:Mn,setSelectedBlock:En,suggestions:ut,children:null===ut||void 0===ut?void 0:ut.map((function(e,n){return(0,_.jsx)(Fi,{suggestion:e},"".concat((0,Pe.RA)(e.title),"_").concat(n))}))})]})}Jl.getInitialProps=function(){var e=(0,l.Z)(f().mark((function e(n){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.slug,Array.isArray(t)&&(r=t[0]),e.abrupt("return",{pipeline:{uuid:r}});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var $l=Jl},26039:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[...slug]",function(){return t(9041)}])}},function(e){e.O(0,[3662,4259,240,1125,7305,7673,412,1374,9774,2888,179],(function(){return n=26039,e(e.s=n);var n}));var n=e.O();_N_E=n}]);