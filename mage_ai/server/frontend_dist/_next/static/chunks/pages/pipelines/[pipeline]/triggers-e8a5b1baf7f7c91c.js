(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4249],{58122:function(e,n,r){"use strict";r.d(n,{CL:function(){return f},FS:function(){return v},JZ:function(){return g},e7:function(){return b},v0:function(){return p},wx:function(){return h}});var t=r(12757),i=r(82394),o=r(43313),c=r(93348),u=r(32151),l=r(5679),a=r(84779);function s(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function d(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?s(Object(r),!0).forEach((function(n){(0,i.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function p(e){var n=e.statistics,r=Object.keys(n),t=Array(o.Dy.length).fill(0);return 0===r.length?null:(r.forEach((function(e){if(o.Dy.includes(e)){var r=o.CC[e],i=n[e],c=i,u=!1,l=[2,3],s=o.Ub[e],d=o.oH[e],p=o.OD[e];if(o.y_.includes(e))u=!0,l=[2,1,2];else if(e in o.Sq){i=(0,a.Jw)(i,0);var f=o.Sq[e];c=n[f]}var v={columnFlexNumbers:l,name:r,progress:u,rate:c,successDirection:d,warning:p};o.y_.includes(e)||(v.value=i),t[s]=v}})),t)}function f(e){var n=e.columnTypes,r=void 0===n?{}:n,t=e.statistics,i=Object.keys(t);if(0===i.length)return null;var c=Object.values(r),a=c.length,s=[];s.push({name:"Column count",successDirection:o.oH.column_count,value:(0,l.x6)(a)}),i.forEach((function(e){if(o.Zu.includes(e)){var n=o.CC[e],r=t[e],i=o.OD[e];s.push({name:n,successDirection:o.oH[e],value:(0,l.x6)(r),warning:i})}}));var d=(0,u.QO)(c),p=d.countCategory,f=d.countDatetime,v=d.countNumerical;return s.push({name:"Categorical Features",rate:p/a,value:(0,l.x6)(p)},{name:"Numerical Features",rate:v/a,value:(0,l.x6)(v)},{name:"Datetime Features",rate:f/a,value:(0,l.x6)(f)}),s}function v(e){return"string"===typeof e?e:JSON.stringify(e)}function h(e,n){var r,t;return null===e||void 0===e||null===(r=e.find((function(e){var r=e.block;return n(r)})))||void 0===r||null===(t=r.variables)||void 0===t?void 0:t.map((function(e){var n=e.value;return d(d({},e),{},{value:v(n)})}))}function g(e,n){return n===c.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===c.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function b(e){return e?Object.entries(e).reduce((function(e,n){var r=(0,t.Z)(n,2),o=r[0],c=r[1],u=c;try{u=JSON.parse(c)}catch(l){}return d(d({},e),{},(0,i.Z)({},o,u))}),{}):e}},17903:function(e,n,r){"use strict";r.d(n,{Z:function(){return y}});var t=r(82394),i=r(12691),o=r.n(i),c=r(82684),u=r(10919),l=r(19711),a=r(46313),s=r(23831),d=r(49125),p=a.default.table.withConfig({displayName:"indexstyle__TableStyle",componentId:"sc-1wzfyed-0"})(["contain:size;width:100%;"]),f=a.default.tr.withConfig({displayName:"indexstyle__TableRowStyle",componentId:"sc-1wzfyed-1"})(["",""],(function(e){return!e.noHover&&"\n    &:hover {\n      background: ".concat((e.theme.interactive||s.Z.interactive).rowHoverBackground,";\n      cursor: pointer;\n    }\n  ")})),v=(0,a.css)(["text-overflow:ellipsis;white-space:nowrap;"," "," "," "," "," ",""],(function(e){return!e.alignTop&&"\n    vertical-align: middle;\n  "}),(function(e){return e.alignTop&&"\n    vertical-align: top;\n  "}),(function(e){return!e.noBorder&&"\n    border-bottom: 1px solid ".concat((e.theme.borders||s.Z.borders).light,";\n  ")}),(function(e){return e.compact&&"\n    padding: ".concat(d.iI/2,"px ").concat(d.iI,"px;\n  ")}),(function(e){return!e.compact&&"\n    padding: ".concat(d.iI,"px ").concat(2*d.iI,"px;\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,";\n  ")})),h=a.default.th.withConfig({displayName:"indexstyle__TableHeadStyle",componentId:"sc-1wzfyed-2"})(["",""],v),g=a.default.td.withConfig({displayName:"indexstyle__TableDataStyle",componentId:"sc-1wzfyed-3"})([""," ",""],v,(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.interactive||s.Z.interactive).activeBorder,";\n  ")})),b=r(28598);function m(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function x(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?m(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var y=function(e){var n=e.alignTop,r=e.buildLinkProps,t=e.columnFlex,i=e.columnMaxWidth,a=e.columns,s=void 0===a?[]:a,d=e.compact,v=e.isSelectedRow,m=e.noBorder,y=e.onClickRow,j=e.rows,O=e.uuid,w=(0,c.useMemo)((function(){return t.reduce((function(e,n){return e+(n||0)}),0)}),t),Z=(0,c.useCallback)((function(e){if(t[e]){var n=Math.round(t[e]/w*100);return"".concat(n,"%")}return null}),[]),P=(0,c.useMemo)((function(){return null===j||void 0===j?void 0:j.map((function(e,t){var c=null===r||void 0===r?void 0:r(t),l=e.map((function(e,r){return(0,b.jsx)(g,{alignTop:n,compact:d,maxWidth:null===i||void 0===i?void 0:i(r),noBorder:m,selected:null===v||void 0===v?void 0:v(t),width:Z(r),children:e},"".concat(O,"-row-").concat(t,"-cell-").concat(r))})),a=(0,b.jsx)(f,{noHover:!(c||y),onClick:y?function(){return y(t)}:null,children:l},"".concat(O,"-row-").concat(t));return c?(0,b.jsx)(o(),x(x({},c),{},{passHref:!0,children:(0,b.jsx)(u.Z,{fullWidth:!0,noHoverUnderline:!0,noOutline:!0,style:{display:"table-row-group"},verticalAlignContent:!0,children:a})})):a}))}),[n,r,Z,i,s,d,v,m,y,j]);return(0,b.jsxs)(p,{children:[(null===s||void 0===s?void 0:s.length)>=1&&(0,b.jsx)(f,{noHover:!0,children:s.map((function(e,n){return(0,b.jsx)(h,{compact:d,noBorder:m,children:(0,b.jsx)(l.ZP,{bold:!0,leftAligned:!0,monospace:!0,muted:!0,children:e.label?e.label():e.uuid})},"".concat(O,"-col-").concat(e.uuid,"-").concat(n))}))}),P]})}},93348:function(e,n,r){"use strict";r.d(n,{U5:function(){return u},Xm:function(){return i},Z4:function(){return l},fq:function(){return c}});var t,i,o=r(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(i||(i={}));var c,u,l=(t={},(0,o.Z)(t,i.API,(function(){return"API"})),(0,o.Z)(t,i.EVENT,(function(){return"event"})),(0,o.Z)(t,i.TIME,(function(){return"schedule"})),t);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(c||(c={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(u||(u={}))},1410:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return W}});var t=r(77837),i=r(82394),o=r(12757),c=r(38860),u=r.n(c),l=r(12691),a=r.n(l),s=r(82684),d=r(83455),p=r(34376),f=r(60328),v=r(86532),h=r(34744),g=r(87372),b=r(31866),m=r(10919),x=r(38965),y=r(93348),j=r(86673),O=r(19711),w=r(46313),Z=r(23831),P=r(73942),_=r(49125),C=r(37391),k=w.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1xgfh62-0"})(["border-bottom:1px solid ",";padding:","px;"],Z.Z.borders.medium,_.tr),I=w.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-1xgfh62-1"})([""," height:80px;display:flex;overflow-x:scroll;"],C.w5),E=w.default.div.withConfig({displayName:"indexstyle__VariableCardStyle",componentId:"sc-1xgfh62-2"})(["background-color:",";border-radius:","px;flex-shrink:0;margin-right:","px;padding:","px;"],Z.Z.background.output,P.n_,_.iI,_.tr),T=r(73899),S=r(58122),D=r(28598);var N=function(e){var n=e.hasOverride,r=e.scheduleType,t=e.variables,i=[];return Object.entries(t).forEach((function(e){var n=(0,o.Z)(e,2),r=n[0],t=n[1];i.push({uuid:r,value:(0,S.FS)(t)})})),(0,S.JZ)(i,r),(0,D.jsxs)(k,{children:[(0,D.jsx)(j.Z,{mb:2,children:(0,D.jsxs)(O.ZP,{bold:!0,large:!0,monospace:!0,muted:!0,children:["Runtime variables",n&&" (override)"]})}),(0,D.jsx)(I,{noScrollbarTrackBackground:!0,children:t&&i.map((function(e){var n=e.uuid,r=e.value;return(0,D.jsxs)(E,{children:[(0,D.jsx)(O.ZP,{monospace:!0,small:!0,children:n}),(0,D.jsx)(O.ZP,{color:T.Or,monospace:!0,small:!0,children:(0,S.FS)(r)})]})}))})]})},A=r(17903),B=r(41374),H=r(10503),R=r(59920),V=r(7715),M=r(96510),q=r(66653),z=r(5679);function F(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function L(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?F(Object(r),!0).forEach((function(n){(0,i.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function U(e){var n=e.pipeline,r=(0,p.useRouter)(),t=n.uuid,c=B.ZP.variables.pipelines.list(t).data,u=null===c||void 0===c?void 0:c.variables,l=B.ZP.pipeline_schedules.pipelines.list(t),w=l.data,Z=l.mutate,P=(0,s.useMemo)((function(){return(null===w||void 0===w?void 0:w.pipeline_schedules)||[]}),[w]),C=(0,d.Db)(B.ZP.pipeline_schedules.pipelines.useCreate(t),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(e){var t=e.pipeline_schedule.id;return r.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(null===n||void 0===n?void 0:n.uuid,"/triggers/").concat(t,"/edit"))},onErrorCallback:function(e){var n=e.error,r=n.errors,t=n.message;console.log(r,t)}})}}),k=(0,o.Z)(C,2),I=k[0],E=k[1].isLoading,T=(0,d.Db)((function(e){return B.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:e})}),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(){Z()},onErrorCallback:function(e){var n=e.error,r=n.errors,t=n.message;console.log(r,t)}})}}),F=(0,o.Z)(T,2),U=F[0],W=(F[1].isLoading,(0,s.useState)()),J=W[0],X=W[1],Y=(0,s.useMemo)((function(){var e,n=null===(e=(0,S.wx)(u,(function(e){return"global"===e.uuid})))||void 0===e?void 0:e.reduce((function(e,n){var r=n.uuid,t=n.value;return L(L({},e),{},(0,i.Z)({},r,t))}),{}),r=null===J||void 0===J?void 0:J.variables,o=!(0,V.Qr)(r),c=o?null===J||void 0===J?void 0:J.variables:(0,V.Qr)(n)?null:n;return function(e){var n=e.height-(c?151:0);return(0,D.jsxs)(D.Fragment,{children:[c&&(0,D.jsx)(N,{hasOverride:o,variables:c,scheduleType:null===J||void 0===J?void 0:J.schedule_type}),!c&&(0,D.jsxs)(j.Z,{p:_.cd,children:[(0,D.jsx)(O.ZP,{children:"This pipeline has no runtime variables."}),(0,D.jsxs)(j.Z,{mt:1,children:[(0,D.jsx)(a(),{as:"/pipelines/".concat(t,"/edit?sideview=variables"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,D.jsx)(m.Z,{children:"Click here"})})," ",(0,D.jsx)(O.ZP,{inline:!0,children:"to add variables to this pipeline."})]})]}),(0,D.jsx)(v.Z,L(L({},e),{},{height:n,noStatus:!0}))]})}}),[u,J]);return(0,D.jsxs)(x.Z,{breadcrumbs:[{label:function(){return"Triggers"}}],buildSidekick:Y,pageName:R.M.TRIGGERS,pipeline:n,subheaderBackgroundImage:"/images/banner-shape-purple-peach.jpg",subheaderButton:(0,D.jsx)(b.ZP,{blackBorder:!0,beforeElement:(0,D.jsx)(H.mm,{size:2.5*_.iI}),inline:!0,loading:E,noHoverUnderline:!0,onClick:function(){return I({pipeline_schedule:{name:(0,z.Y6)()}})},sameColorAsText:!0,uuid:"PipelineDetailPage/add_new_schedule",children:"Create"}),subheaderText:(0,D.jsx)(O.ZP,{bold:!0,large:!0,children:"Set up a new trigger for this pipeline."}),title:function(e){var n=e.name;return"".concat(n," triggers")},uuid:"".concat(R.M.TRIGGERS,"_").concat(t),children:[(0,D.jsx)(j.Z,{mt:_.cd,px:_.cd,children:(0,D.jsx)(g.Z,{level:5,children:"Pipeline triggers"})}),(0,D.jsx)(h.Z,{light:!0,mt:_.cd,short:!0}),(0,D.jsx)(A.Z,{columnFlex:[null,1,1,3,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:"Status"},{uuid:"Type"},{uuid:"Name"},{uuid:"Frequency"},{uuid:"Runs"},{uuid:"Logs"},{label:function(){return""},uuid:"edit"}],isSelectedRow:function(e){return P[e].id===(null===J||void 0===J?void 0:J.id)},onClickRow:function(e){return X(P[e])},rows:P.map((function(e){var n,i=e.id,o=e.pipeline_runs_count,c=e.name,u=e.schedule_interval,l=e.status;return[(0,D.jsx)(f.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,q.j)(n),U({id:e.id,status:y.fq.ACTIVE===l?y.fq.INACTIVE:y.fq.ACTIVE})},children:y.fq.ACTIVE===l?(0,D.jsx)(H.dz,{muted:!0,size:2*_.iI}):(0,D.jsx)(H.Py,{default:!0,size:2*_.iI})}),(0,D.jsx)(O.ZP,{default:y.fq.INACTIVE===l,monospace:!0,success:y.fq.ACTIVE===l,children:l}),(0,D.jsx)(O.ZP,{default:!0,monospace:!0,children:null===(n=y.Z4[e.schedule_type])||void 0===n?void 0:n.call(y.Z4)}),(0,D.jsx)(a(),{as:"/pipelines/".concat(t,"/triggers/").concat(i),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,D.jsx)(m.Z,{bold:!0,onClick:function(e){(0,q.j)(e),r.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(t,"/triggers/").concat(i))},sameColorAsText:!0,children:c})}),(0,D.jsx)(O.ZP,{default:!0,monospace:!0,children:u}),(0,D.jsx)(O.ZP,{default:!0,monospace:!0,children:o}),(0,D.jsx)(f.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return r.push("/pipelines/".concat(t,"/logs?pipeline_schedule_id[]=").concat(i))},children:(0,D.jsx)(H.B4,{default:!0,size:2*_.iI})}),(0,D.jsx)(f.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return r.push("/pipelines/".concat(t,"/triggers/").concat(i,"/edit"))},children:(0,D.jsx)(H.I8,{default:!0,size:2*_.iI})})]})),uuid:"pipeline-triggers"})]})}U.getInitialProps=function(){var e=(0,t.Z)(u().mark((function e(n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:r}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var W=U},66653:function(e,n,r){"use strict";function t(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}r.d(n,{j:function(){return t}})},40183:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/triggers",function(){return r(1410)}])}},function(e){e.O(0,[5339,2083,6674,1774,3668,2874,3903,8933,8965,5981,2151,6532,9774,2888,179],(function(){return n=40183,e(e.s=n);var n}));var n=e.O();_N_E=n}]);